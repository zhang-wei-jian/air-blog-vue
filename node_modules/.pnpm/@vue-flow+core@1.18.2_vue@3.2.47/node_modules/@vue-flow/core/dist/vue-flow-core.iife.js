var VueFlowCore=function(K,r){"use strict";var ro;const nn=typeof window<"u",ji=e=>typeof e<"u",Qi=e=>typeof e=="boolean",we=e=>typeof e=="function",_e=e=>typeof e=="number",Ce=e=>typeof e=="string",Ji=()=>{};nn&&((ro=window==null?void 0:window.navigator)!=null&&ro.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Re(e){return typeof e=="function"?e():r.unref(e)}function er(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const ao=e=>e();function tr(e=ao){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:r.readonly(t),pause:n,resume:o,eventFilter:i}}function lo(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function nr(e){return e}function on(e,t){let n,o,i;const a=r.ref(!0),l=()=>{a.value=!0,i()};r.watch(e,l,{flush:"sync"});const s=we(t)?t:t.get,c=we(t)?void 0:t.set,u=r.customRef((d,m)=>(o=d,i=m,{get(){return a.value&&(n=s(),a.value=!1),o(),n},set(p){c==null||c(p)}}));return Object.isExtensible(u)&&(u.trigger=l),u}function Ae(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function or(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function rn(e,t=!1){function n(m,{flush:p="sync",deep:E=!1,timeout:h,throwOnTimeout:f}={}){let x=null;const S=[new Promise(P=>{x=r.watch(e,_=>{m(_)!==t&&(x==null||x(),P(_))},{flush:p,deep:E,immediate:!0})})];return h!=null&&S.push(lo(h,f).then(()=>Re(e)).finally(()=>x==null?void 0:x())),Promise.race(S)}function o(m,p){if(!r.isRef(m))return n(_=>_===m,p);const{flush:E="sync",deep:h=!1,timeout:f,throwOnTimeout:x}=p??{};let w=null;const P=[new Promise(_=>{w=r.watch([e,m],([C,R])=>{t!==(C===R)&&(w==null||w(),_(C))},{flush:E,deep:h,immediate:!0})})];return f!=null&&P.push(lo(f,x).then(()=>Re(e)).finally(()=>(w==null||w(),Re(e)))),Promise.race(P)}function i(m){return n(p=>Boolean(p),m)}function a(m){return o(null,m)}function l(m){return o(void 0,m)}function s(m){return n(Number.isNaN,m)}function c(m,p){return n(E=>{const h=Array.from(E);return h.includes(m)||h.includes(Re(m))},p)}function u(m){return d(1,m)}function d(m=1,p){let E=-1;return n(()=>(E+=1,E>=m),p)}return Array.isArray(Re(e))?{toMatch:n,toContains:c,changed:u,changedTimes:d,get not(){return rn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:s,toBeUndefined:l,changed:u,changedTimes:d,get not(){return rn(e,!t)}}}function ce(e){return rn(e)}var so=Object.getOwnPropertySymbols,ir=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,ar=(e,t)=>{var n={};for(var o in e)ir.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&so)for(var o of so(e))t.indexOf(o)<0&&rr.call(e,o)&&(n[o]=e[o]);return n};function lr(e,t,n={}){const o=n,{eventFilter:i=ao}=o,a=ar(o,["eventFilter"]);return r.watch(e,er(i,t),a)}var sr=Object.defineProperty,cr=Object.defineProperties,ur=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable,fo=(e,t,n)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dr=(e,t)=>{for(var n in t||(t={}))co.call(t,n)&&fo(e,n,t[n]);if(ht)for(var n of ht(t))uo.call(t,n)&&fo(e,n,t[n]);return e},fr=(e,t)=>cr(e,ur(t)),hr=(e,t)=>{var n={};for(var o in e)co.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&ht)for(var o of ht(e))t.indexOf(o)<0&&uo.call(e,o)&&(n[o]=e[o]);return n};function Ve(e,t,n={}){const o=n,{eventFilter:i}=o,a=hr(o,["eventFilter"]),{eventFilter:l,pause:s,resume:c,isActive:u}=tr(i);return{stop:lr(e,t,fr(dr({},a),{eventFilter:l})),pause:s,resume:c,isActive:u}}function ho(e){var t;const n=Re(e);return(t=n==null?void 0:n.$el)!=null?t:n}const an=nn?window:void 0;function ln(...e){let t,n,o,i;if(Ce(e[0])||Array.isArray(e[0])?([n,o,i]=e,t=an):[t,n,o,i]=e,!t)return Ji;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],l=()=>{a.forEach(d=>d()),a.length=0},s=(d,m,p,E)=>(d.addEventListener(m,p,E),()=>d.removeEventListener(m,p,E)),c=r.watch(()=>[ho(t),Re(i)],([d,m])=>{l(),d&&a.push(...n.flatMap(p=>o.map(E=>s(d,p,E,m))))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return Ae(u),u}const gr=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function go(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=an,eventName:a="keydown",passive:l=!1}=o,s=gr(t);return ln(i,a,u=>{s(u)&&n(u)},l)}function mr(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),or(o,t),n}function pr(e){return JSON.parse(JSON.stringify(e))}const sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn="__vueuse_ssr_handlers__";sn[cn]=sn[cn]||{},sn[cn];var mo=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,wr=(e,t)=>{var n={};for(var o in e)yr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&mo)for(var o of mo(e))t.indexOf(o)<0&&vr.call(e,o)&&(n[o]=e[o]);return n};function _r(e,t,n={}){const o=n,{window:i=an}=o,a=wr(o,["window"]);let l;const s=mr(()=>i&&"ResizeObserver"in i),c=()=>{l&&(l.disconnect(),l=void 0)},u=r.watch(()=>ho(e),m=>{c(),s.value&&i&&m&&(l=new ResizeObserver(t),l.observe(m,a))},{immediate:!0,flush:"post"}),d=()=>{c(),u()};return Ae(d),{isSupported:s,stop:d}}var po;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(po||(po={}));var xr=Object.defineProperty,yo=Object.getOwnPropertySymbols,Er=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable,vo=(e,t,n)=>t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sr=(e,t)=>{for(var n in t||(t={}))Er.call(t,n)&&vo(e,n,t[n]);if(yo)for(var n of yo(t))br.call(t,n)&&vo(e,n,t[n]);return e};Sr({linear:nr},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function Ze(e,t,n,o={}){var i,a,l;const{clone:s=!1,passive:c=!1,eventName:u,deep:d=!1,defaultValue:m}=o,p=r.getCurrentInstance(),E=n||(p==null?void 0:p.emit)||((i=p==null?void 0:p.$emit)==null?void 0:i.bind(p))||((l=(a=p==null?void 0:p.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(p==null?void 0:p.proxy));let h=u;t||(t="modelValue"),h=u||h||`update:${t.toString()}`;const f=w=>s?we(s)?s(w):pr(w):w,x=()=>ji(e[t])?f(e[t]):m;if(c){const w=x(),S=r.ref(w);return r.watch(()=>e[t],P=>S.value=f(P)),r.watch(S,P=>{(P!==e[t]||d)&&E(h,P)},{deep:d}),S}else return r.computed({get(){return x()},set(w){E(h,w)}})}function Y(e=()=>{}){const t=r.ref(new Set);e&&t.value.add(e);const n=a=>{t.value.delete(a)};return{on:a=>{t.value.has(e)&&t.value.delete(e),t.value.add(a);const l=()=>n(a);return Ae(l),{off:l}},off:n,trigger:a=>Promise.all(Array.from(t.value).map(l=>l(a))),fns:t}}const Nr=["production","prod"];function Ke(e,...t){Nr.includes(production||"")||console.warn(`[Vue Flow]: ${e}`,...t)}function Cr(){return{edgesChange:Y(),nodesChange:Y(),nodeDoubleClick:Y(),nodeClick:Y(),nodeMouseEnter:Y(),nodeMouseMove:Y(),nodeMouseLeave:Y(),nodeContextMenu:Y(),nodeDragStart:Y(),nodeDrag:Y(),nodeDragStop:Y(),nodesInitialized:Y(),miniMapNodeClick:Y(),miniMapNodeDoubleClick:Y(),miniMapNodeMouseEnter:Y(),miniMapNodeMouseMove:Y(),miniMapNodeMouseLeave:Y(),connect:Y(),connectStart:Y(),connectEnd:Y(),clickConnectStart:Y(),clickConnectEnd:Y(),paneReady:Y(),move:Y(),moveStart:Y(),moveEnd:Y(),selectionDragStart:Y(),selectionDrag:Y(),selectionDragStop:Y(),selectionContextMenu:Y(),selectionStart:Y(),selectionEnd:Y(),viewportChangeStart:Y(),viewportChange:Y(),viewportChangeEnd:Y(),paneScroll:Y(),paneClick:Y(),paneContextMenu:Y(),paneMouseEnter:Y(),paneMouseMove:Y(),paneMouseLeave:Y(),edgeContextMenu:Y(),edgeMouseEnter:Y(),edgeMouseMove:Y(),edgeMouseLeave:Y(),edgeDoubleClick:Y(),edgeClick:Y(),edgeUpdateStart:Y(),edgeUpdate:Y(),edgeUpdateEnd:Y(),updateNodeInternals:Y(),error:Y(e=>Ke(e.message))}}function kr(e,t){r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),Ae(()=>{o.off(i)})}})}var ae=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(ae||{});const un={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class le extends Error{constructor(t,...n){var o;super((o=un[t])==null?void 0:o.call(un,...n)),this.code=t}}const dn=()=>typeof window<"u"?window:{chrome:!1};function wo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function fn(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function gt(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Oe(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function hn(e,t){return{x:Oe(e.x,t[0][0],t[1][0]),y:Oe(e.y,t[0][1],t[1][1])}}function _o(e){const t=e.getRootNode(),n=dn();return"elementFromPoint"in t?t:n.document}function me(e){return e&&"id"in e&&"source"in e&&"target"in e}function gn(e){return me(e)&&"sourceNode"in e&&"targetNode"in e}function mt(e){return e&&"id"in e&&!me(e)}function xe(e){return mt(e)&&"computedPosition"in e}function Mr(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function $r(e,t={}){let n=t;return xe(e)||(n={type:e.type??t.type??"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:re(e.data)?e.data:{},events:r.markRaw(re(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function mn(e,t={}){const n=re(e.events)?e.events:t.events&&re(t.events)?t.events:{},o=re(e.data)?e.data:t.data&&re(t.data)?t.data:{};return t=gn(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:r.markRaw(n),label:(e.label&&!Ce(e.label)?r.markRaw(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function xo(e,t,n){if(!mt(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>me(a)&&a[o]===e.id).map(a=>me(a)&&a[n]);return t.filter(a=>i.includes(a.id))}function Ir(e,t){return xo(e,t,"target")}function Rr(e,t){return xo(e,t,"source")}function pt({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function pn(e,t){return t.some(n=>me(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Or(e,t,n){if(!e.source||!e.target)return Ke("Can't create edge. An edge needs a source and a target."),t;let o;return me(e)?o={...e}:o={...e,id:pt(e)},o=mn(o,n),pn(o,t)||t.push(o),t}function Tr(e,t,n){if(!t.source||!t.target)return Ke("Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>me(a)&&a.id===e.id);if(!o)return Ke(`The old edge with id=${e.id} does not exist.`),n;const i={...e,id:pt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)}function Br({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function yn({x:e,y:t},{x:n,y:o,zoom:i},a,[l,s]){const c={x:(e-n)/i,y:(t-o)/i};return a?{x:l*Math.round(c.x/l),y:s*Math.round(c.y/s)}:c}function Eo(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function yt({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function bo({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Pr(e,t){return bo(Eo(yt(e),yt(t)))}function vt(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>Eo(n,yt({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bo(t)}function zr({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function vn(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1,l=!1){const s={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(c=>{const{computedPosition:u={x:0,y:0},dimensions:d={width:0,height:0},selectable:m}=c;if(l&&!m)return!1;const p={...u,width:d.width||0,height:d.height||0},E=fn(s,p),h=typeof d.width>"u"||typeof d.height>"u"||d.width===0||d.height===0,f=a&&E>0,x=d.width*d.height;return h||f||E>=x})}function We(e,t){const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))}function qe(e,t,n,o,i,a=.1,l={x:0,y:0}){const s=t/(e.width*(1+a)),c=n/(e.height*(1+a)),u=Math.min(s,c),d=Oe(u,o,i),m=e.x+e.width/2,p=e.y+e.height/2,E=t/2-m*d+(l.x??0),h=n/2-p*d+(l.y??0);return{x:E,y:h,zoom:d}}function Dr(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function So(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:So(n,t):!1}function ke(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function re(e){return typeof r.unref(e)<"u"}function Ar(e,t,n){if(!e.source||!e.target)return n(new le(ae.EDGE_INVALID,e.id)),!1;let o;return me(e)?o=e:o={...e,id:pt(e)},o=mn(o),pn(o,t)?!1:o}function Vr(e,t,n,o,i,a){if(!t.source||!t.target)return a(new le(ae.EDGE_INVALID,e.id)),!1;const l=o(e.id);if(!l)return a(new le(ae.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...c}=e,u={...c,id:i?pt(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(l),1,u),u}function No(e,t,n,o){const i={},a=e.map(s=>{const c=$r(s,{...n(s.id),parentNode:s.parentNode});return s.parentNode&&(i[s.parentNode]=!0),c}),l=[...a,...t];return a.forEach(s=>{const c=l.find(u=>u.id===s.parentNode);s.parentNode&&!c&&o(new le(ae.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||i[s.id])&&(i[s.id]&&(s.isParent=!0),c&&(c.isParent=!0))}),a}var j=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(j||{}),wt=(e=>(e.Partial="partial",e.Full="full",e))(wt||{}),Me=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Me||{}),$e=(e=>(e.Strict="strict",e.Loose="loose",e))($e||{}),_t=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(_t||{}),je=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(je||{}),Co=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Co||{});const wn=Symbol("vueFlow"),_n=Symbol("nodeId"),ko=Symbol("nodeRef"),Mo=Symbol("edgeId"),$o=Symbol("edgeRef"),xt=Symbol("slots");function Io(e){const t=e??r.inject(_n,""),n=r.inject(ko,null),{findNode:o,getEdges:i,emits:a}=ie(),l=o(t);return l||a.error(new le(ae.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:r.computed(()=>l.parentNode?o(l.parentNode):void 0),connectedEdges:r.computed(()=>We([l],i.value))}}function xn(e){return"clientX"in e}function He(e,t){var a,l;const n=xn(e),o=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}function Et(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,i=((n==null?void 0:n.y)??0)+t.y,a=(n==null?void 0:n.width)??t.width,l=(n==null?void 0:n.height)??t.height;switch(e){case j.Top:return{x:o+a/2,y:i};case j.Right:return{x:o+a,y:i+l/2};case j.Bottom:return{x:o+a/2,y:i+l};case j.Left:return{x:o,y:i+l/2}}}function Ro(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function Hr(e,t,n,o,i,a){const l=Et(n,{...e.dimensions,...e.computedPosition},t),s=Et(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:l.x,sourceY:l.y,targetX:s.x,targetY:s.y}}function Fr({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:l,height:s,viewport:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=yt({x:(0-c.x)/c.zoom,y:(0-c.y)/c.zoom,width:l/c.zoom,height:s/c.zoom}),m=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(m*p)>0}function Lr(e,t,n=!1){let o=-1;const i=e.reduce((a,l)=>{const s=_e(l.zIndex);let c=s?l.zIndex:0;const u=t(l.source),d=t(l.target);return!u||!d||(n&&(c=s?l.zIndex:Math.max(u.computedPosition.z||0,d.computedPosition.z||0)),a[c]?a[c].push(l):a[c]=[l],o=c>o?c:o),a},{});return Object.entries(Object.keys(i).length?i:{0:[]}).map(([a,l])=>{const s=+a;return{edges:l,level:s,isMaxLevel:s===o}})}function En(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Oo(e,t,n,o){return(t[n]||[]).reduce((i,a)=>(`${e.id}-${a.id}-${n}`!==o&&i.push({id:a.id||null,type:n,nodeId:e.id,...Et(a.position,{...e.dimensions,...e.computedPosition},a)}),i),[])}function Gr(e,t,n){let o=null,i=1/0;return n.forEach(a=>{const l=Math.sqrt((a.x-e.x)**2+(a.y-e.y)**2);l<=t&&l<i&&(i=l,o=a)}),o}function To(e,t,n,o,i,a,l,s,c,u){const d=a==="target",m=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:p,y:E}=He(e),h=s.elementFromPoint(p,E),f=h!=null&&h.classList.contains("vue-flow__handle")?h:m,x={handleDomNode:f,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null};if(f){const w=Bo(void 0,f),S=f.getAttribute("data-nodeid"),P=f.getAttribute("data-handleid"),_=f.classList.contains("connectable"),C=f.classList.contains("connectableend"),R={source:d?S:o,sourceHandle:d?P:i,target:d?o:S,targetHandle:d?i:P};x.connection=R,_&&C&&(n===$e.Strict?d&&w==="source"||!d&&w==="target":S!==o||P!==i)&&(x.endHandle={nodeId:S,handleId:P,type:w},x.isValid=l(R,{edges:c,sourceNode:u(R.source),targetNode:u(R.target)}))}return x}function Yr({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((i,a)=>{const{handleBounds:l}=a;let s=[],c=[];return l&&(s=Oo(a,l,"source",`${t}-${n}-${o}`),c=Oo(a,l,"target",`${t}-${n}-${o}`)),i.push(...s,...c),i},[])}function Bo(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Xr(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Po(e,t,n){return e<t?Oe(Math.abs(e-t),1,50)/50:e>n?-Oe(Math.abs(e-n),1,50)/50:0}function zo(e,t){const n=Po(e.x,35,t.width-35)*20,o=Po(e.y,35,t.height-35)*20;return[n,o]}function bt(){return!0}function bn({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const s=r.computed(()=>r.unref(n)==="target"),c=r.computed(()=>r.unref(t)),u=r.computed(()=>r.unref(e)),d=r.computed(()=>r.unref(i)),{vueFlowRef:m,connectionMode:p,connectionRadius:E,connectOnClick:h,connectionClickStartHandle:f,nodesConnectable:x,autoPanOnConnect:w,findNode:S,panBy:P,getNodes:_,startConnection:C,updateConnection:R,endConnection:y,emits:L,viewport:D,edges:$,isValidConnection:V}=ie();let ee=null,W=!1,v=null;function H(O){var T;const Z=xn(O),G=_o(O.target);if(Z&&O.button===0||!Z){let X=function(oe){U=He(oe,I),z=Gr(yn(U,D.value,!1,[1,1]),E.value,Q),N||(J(),N=!0);const se=To(oe,z,p.value,c.value,u.value,s.value?"target":"source",ne,G,$.value,S);if(ee=se.connection,W=se.isValid,v=se.handleDomNode,R(z&&W?Br({x:z.x,y:z.y},D.value):U,se.endHandle,Xr(!!z,W)),!z&&!W&&!v)return En(A);ee&&ee.source!==ee.target&&v&&(En(A),A=v,v.classList.add("connecting","vue-flow__handle-connecting"),v.classList.toggle("valid",W),v.classList.toggle("vue-flow__handle-valid",W))},q=function(oe){(z||v)&&ee&&W&&(a?a(oe,ee):L.connect(ee)),L.connectEnd(oe),d&&(l==null||l(oe)),En(A),cancelAnimationFrame(M),y(oe),N=!1,W=!1,ee=null,v=null,G.removeEventListener("mousemove",X),G.removeEventListener("mouseup",q),G.removeEventListener("touchmove",X),G.removeEventListener("touchend",q)};const te=S(c.value);let ne=o||V.value||bt;!ne&&te&&(ne=(s?te.isValidSourcePos:te.isValidTargetPos)||bt);let z,M=0;const{x:F,y:g}=He(O),b=G==null?void 0:G.elementFromPoint(F,g),B=Bo(d.value,b),I=(T=m.value)==null?void 0:T.getBoundingClientRect();if(!I||!B)return;let A,U=He(O,I),N=!1;const Q=Yr({nodes:_.value,nodeId:c.value,handleId:u.value,handleType:B}),J=()=>{if(!w)return;const[oe,se]=zo(U,I);P({x:oe,y:se}),M=requestAnimationFrame(J)};C({nodeId:c.value,handleId:u.value,type:B},{x:F-I.left,y:g-I.top},O),L.connectStart({event:O,nodeId:c.value,handleId:u.value,handleType:B}),G.addEventListener("mousemove",X),G.addEventListener("mouseup",q),G.addEventListener("touchmove",X),G.addEventListener("touchend",q)}}function k(O){if(h.value)if(!f.value)L.clickConnectStart({event:O,nodeId:c.value,handleId:u.value}),C({nodeId:c.value,type:r.unref(n),handleId:u.value},void 0,O,!0);else{let Z=o||V.value||bt;const G=S(c.value);if(!Z&&G&&(Z=(s?G.isValidSourcePos:G.isValidTargetPos)||bt),G&&(typeof G.connectable>"u"?x.value:G.connectable)===!1)return;const T=_o(O.target),{connection:X,isValid:q}=To(O,{nodeId:c.value,id:u.value,type:r.unref(n)},p.value,f.value.nodeId,f.value.handleId||null,f.value.type,Z,T,$.value,S),te=X.source===X.target;q&&!te&&L.connect(X),L.clickConnectEnd(O),y(O,!0)}}return{handlePointerDown:H,handleClick:k}}function Ur(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const Zr=["data-id","data-handleid","data-nodeid","data-handlepos"],Kr={name:"Handle",compatConfig:{MODE:3}},Qe=r.defineComponent({...Kr,props:{id:null,type:null,position:{default:j.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Ur(e,["position","connectable","connectableStart","connectableEnd","id","isValidConnection"]),n=r.toRef(t,"type","source"),{connectionStartHandle:o,connectionClickStartHandle:i,connectionEndHandle:a,vueFlowRef:l,nodesConnectable:s,noDragClassName:c,noPanClassName:u}=ie(),{id:d,node:m,nodeEl:p,connectedEdges:E}=Io(),h=r.ref(),f=r.computed(()=>e.id??`${d}__handle-${e.position}`),x=r.computed(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),w=r.computed(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:S,handleClick:P}=bn({nodeId:d,handleId:f,isValidConnection:e.isValidConnection,type:n}),_=r.computed(()=>Ce(e.connectable)&&e.connectable==="single"?!E.value.some(D=>{const $=D[`${n.value}Handle`];return D[n.value]!==d?!1:$?$===f.value:!0}):we(e.connectable)?e.connectable(m,E.value):re(e.connectable)?e.connectable:s.value),C=r.computed(()=>{var D,$,V,ee,W,v;return((D=o.value)==null?void 0:D.nodeId)===d&&(($=o.value)==null?void 0:$.handleId)===f.value&&((V=o.value)==null?void 0:V.type)===n.value||((ee=a.value)==null?void 0:ee.nodeId)===d&&((W=a.value)==null?void 0:W.handleId)===f.value&&((v=a.value)==null?void 0:v.type)===n.value}),R=r.computed(()=>{var D,$,V;return((D=i.value)==null?void 0:D.nodeId)===d&&(($=i.value)==null?void 0:$.handleId)===f.value&&((V=i.value)==null?void 0:V.type)===n.value});ce(()=>m.initialized).toBe(!0,{flush:"post"}).then(()=>{var k;const D=(k=m.handleBounds[n.value])==null?void 0:k.find(O=>O.id===f.value);if(!l.value||D)return;const $=l.value.querySelector(".vue-flow__transformationpane");if(!p||!h.value||!$||!f.value)return;const V=p.value.getBoundingClientRect(),ee=h.value.getBoundingClientRect(),W=window.getComputedStyle($),{m22:v}=new window.DOMMatrixReadOnly(W.transform),H={id:f.value,position:e.position,x:(ee.left-V.left)/v,y:(ee.top-V.top)/v,...gt(h.value)};m.handleBounds[n.value]=[...m.handleBounds[n.value]??[],H]});function y(D){const $=xn(D);_.value&&x.value&&($&&D.button===0||!$)&&S(D)}function L(D){!d||!i.value&&!x.value||_.value&&P(D)}return(D,$)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:h,"data-id":`${r.unref(d)}-${r.unref(f)}-${r.unref(n)}`,"data-handleid":r.unref(f),"data-nodeid":r.unref(d),"data-handlepos":e.position,class:r.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${r.unref(f)}`,r.unref(c),r.unref(u),r.unref(n),{connectable:r.unref(_),connecting:r.unref(R),connectablestart:r.unref(x),connectableend:r.unref(w),connectionindicator:r.unref(_)&&(r.unref(x)&&!r.unref(C)||r.unref(w)&&r.unref(C))}]]),onMousedown:y,onTouchstartPassive:y,onClick:L},[r.renderSlot(D.$slots,"default",{id:e.id})],42,Zr))}}),St=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(Qe,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(Qe,{type:"source",position:e,connectable:o,isValidConnection:a})]};St.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"],St.inheritAttrs=!1,St.compatConfig={MODE:3};const Wr=St,Nt=function({sourcePosition:e=j.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(Qe,{type:"source",position:e,connectable:n,isValidConnection:o})]};Nt.props=["sourcePosition","label","isValidSourcePos","connectable"],Nt.inheritAttrs=!1,Nt.compatConfig={MODE:3};const qr=Nt,Ct=function({targetPosition:e=j.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[r.h(Qe,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};Ct.props=["targetPosition","label","isValidTargetPos","connectable"],Ct.inheritAttrs=!1,Ct.compatConfig={MODE:3};const jr=Ct;function Do(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Qr(e,t,n,o,i){return e.filter(a=>(a.selected||a.id===i)&&(!a.parentNode||!So(a,o))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var l,s;return r.markRaw({id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((l=a.computedPosition)==null?void 0:l.x)||0,y:n.y-((s=a.computedPosition)==null?void 0:s.y)||0},from:a.computedPosition,extent:a.extent,parentNode:a.parentNode,dimensions:a.dimensions})})}function Sn({id:e,dragItems:t,findNode:n}){const o=t.map(i=>n(i.id));return[e?o.find(i=>i.id===e):o[0],o]}function Jr(e){switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];default:return e||[0,0,0,0]}}function ea(e,t,n){const[o,i,a,l]=typeof e!="string"?Jr(e.padding):[0,0,0,0];return n&&_e(n.computedPosition.x)&&_e(n.computedPosition.y)&&_e(n.dimensions.width)&&_e(n.dimensions.height)?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+(n.dimensions.width-t.dimensions.width)-i,n.computedPosition.y+(n.dimensions.height-t.dimensions.height)-a]]:!1}function ta(e,t,n,o){var a;let i=e.extent||n;if(e.extent==="parent"||!Array.isArray(e.extent)&&((a=e.extent)==null?void 0:a.range)==="parent")if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const l=ea(e.extent,e,o);l&&(i=l)}else t(new le(ae.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(e.extent)&&e.extent&&o){const l=o.computedPosition.x,s=o.computedPosition.y;i=[[e.extent[0][0]+l,e.extent[0][1]+s],[e.extent[1][0]+l,e.extent[1][1]+s]]}return i}function Nn(e,t,n,o,i){const a=ta(e,n,o,i),l=hn(t,a);return{position:{x:l.x-((i==null?void 0:i.computedPosition.x)||0),y:l.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:l}}function Ao(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:l,emits:s}=ie();return(c,u=!1)=>{const d=a.value?i.value[0]:5,m=a.value?i.value[1]:5,p=u?4:1,E=c.x*d*p,h=c.y*m*p,f=e.value.filter(x=>x.draggable||l&&typeof x.draggable>"u").map(x=>{const w={x:x.computedPosition.x+E,y:x.computedPosition.y+h},{computedPosition:S}=Nn(x,w,s.error,t.value,x.parentNode?o(x.parentNode):void 0);return{id:x.id,position:S,from:x.position,distance:{x:c.x,y:c.y},dimensions:x.dimensions}});n(f,!0,!1)}}function na(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),dragStart:Y(),drag:Y(),dragStop:Y()}}function oa(e,t){const n=na();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Vo(){const{viewport:e,snapGrid:t,snapToGrid:n}=ie();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,l={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(l.x/t.value[0]):l.x,ySnapped:n.value?t.value[1]*Math.round(l.y/t.value[1]):l.y,...l}}}function Ho(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(l=>{const s=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(s.left-a.left)/n,y:(s.top-a.top)/n,...gt(l)}})}function Cn(e,t,n,o,i,a=!1,l){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),r.nextTick(l.blur)):n([e])}var ia={value:()=>{}};function kt(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Mt(n)}function Mt(e){this._=e}function ra(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Mt.prototype=kt.prototype={constructor:Mt,on:function(e,t){var n=this._,o=ra(e+"",n),i,a=-1,l=o.length;if(arguments.length<2){for(;++a<l;)if((i=(e=o[a]).type)&&(i=aa(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=o[a]).type)n[i]=Fo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Fo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function aa(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Fo(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=ia,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var kn="http://www.w3.org/1999/xhtml";const Lo={svg:"http://www.w3.org/2000/svg",xhtml:kn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $t(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Lo.hasOwnProperty(t)?{space:Lo[t],local:e}:e}function la(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kn&&t.documentElement.namespaceURI===kn?t.createElement(e):t.createElementNS(n,e)}}function sa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Go(e){var t=$t(e);return(t.local?sa:la)(t)}function ca(){}function Mn(e){return e==null?ca:function(){return this.querySelector(e)}}function ua(e){typeof e!="function"&&(e=Mn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=new Array(l),c,u,d=0;d<l;++d)(c=a[d])&&(u=e.call(c,c.__data__,d,a))&&("__data__"in c&&(u.__data__=c.__data__),s[d]=u);return new de(o,this._parents)}function da(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fa(){return[]}function Yo(e){return e==null?fa:function(){return this.querySelectorAll(e)}}function ha(e){return function(){return da(e.apply(this,arguments))}}function ga(e){typeof e=="function"?e=ha(e):e=Yo(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var l=t[a],s=l.length,c,u=0;u<s;++u)(c=l[u])&&(o.push(e.call(c,c.__data__,u,l)),i.push(c));return new de(o,i)}function Xo(e){return function(){return this.matches(e)}}function Uo(e){return function(t){return t.matches(e)}}var ma=Array.prototype.find;function pa(e){return function(){return ma.call(this.children,e)}}function ya(){return this.firstElementChild}function va(e){return this.select(e==null?ya:pa(typeof e=="function"?e:Uo(e)))}var wa=Array.prototype.filter;function _a(){return Array.from(this.children)}function xa(e){return function(){return wa.call(this.children,e)}}function Ea(e){return this.selectAll(e==null?_a:xa(typeof e=="function"?e:Uo(e)))}function ba(e){typeof e!="function"&&(e=Xo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],c,u=0;u<l;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new de(o,this._parents)}function Zo(e){return new Array(e.length)}function Sa(){return new de(this._enter||this._groups.map(Zo),this._parents)}function It(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}It.prototype={constructor:It,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Na(e){return function(){return e}}function Ca(e,t,n,o,i,a){for(var l=0,s,c=t.length,u=a.length;l<u;++l)(s=t[l])?(s.__data__=a[l],o[l]=s):n[l]=new It(e,a[l]);for(;l<c;++l)(s=t[l])&&(i[l]=s)}function ka(e,t,n,o,i,a,l){var s,c,u=new Map,d=t.length,m=a.length,p=new Array(d),E;for(s=0;s<d;++s)(c=t[s])&&(p[s]=E=l.call(c,c.__data__,s,t)+"",u.has(E)?i[s]=c:u.set(E,c));for(s=0;s<m;++s)E=l.call(e,a[s],s,a)+"",(c=u.get(E))?(o[s]=c,c.__data__=a[s],u.delete(E)):n[s]=new It(e,a[s]);for(s=0;s<d;++s)(c=t[s])&&u.get(p[s])===c&&(i[s]=c)}function Ma(e){return e.__data__}function $a(e,t){if(!arguments.length)return Array.from(this,Ma);var n=t?ka:Ca,o=this._parents,i=this._groups;typeof e!="function"&&(e=Na(e));for(var a=i.length,l=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var d=o[u],m=i[u],p=m.length,E=Ia(e.call(d,d&&d.__data__,u,o)),h=E.length,f=s[u]=new Array(h),x=l[u]=new Array(h),w=c[u]=new Array(p);n(d,m,f,x,w,E,t);for(var S=0,P=0,_,C;S<h;++S)if(_=f[S]){for(S>=P&&(P=S+1);!(C=x[P])&&++P<h;);_._next=C||null}}return l=new de(l,o),l._enter=s,l._exit=c,l}function Ia(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ra(){return new de(this._exit||this._groups.map(Zo),this._parents)}function Oa(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function Ta(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,l=Math.min(i,a),s=new Array(i),c=0;c<l;++c)for(var u=n[c],d=o[c],m=u.length,p=s[c]=new Array(m),E,h=0;h<m;++h)(E=u[h]||d[h])&&(p[h]=E);for(;c<i;++c)s[c]=n[c];return new de(s,this._parents)}function Ba(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],l;--i>=0;)(l=o[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Pa(e){e||(e=za);function t(m,p){return m&&p?e(m.__data__,p.__data__):!m-!p}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var l=n[a],s=l.length,c=i[a]=new Array(s),u,d=0;d<s;++d)(u=l[d])&&(c[d]=u);c.sort(t)}return new de(i,this._parents).order()}function za(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Da(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Aa(){return Array.from(this)}function Va(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var l=o[i];if(l)return l}return null}function Ha(){let e=0;for(const t of this)++e;return e}function Fa(){return!this.node()}function La(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,l=i.length,s;a<l;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Ga(e){return function(){this.removeAttribute(e)}}function Ya(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xa(e,t){return function(){this.setAttribute(e,t)}}function Ua(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Za(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ka(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Wa(e,t){var n=$t(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ya:Ga:typeof t=="function"?n.local?Ka:Za:n.local?Ua:Xa)(n,t))}function Ko(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function qa(e){return function(){this.style.removeProperty(e)}}function ja(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Qa(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ja(e,t,n){return arguments.length>1?this.each((t==null?qa:typeof t=="function"?Qa:ja)(e,t,n??"")):Fe(this.node(),e)}function Fe(e,t){return e.style.getPropertyValue(t)||Ko(e).getComputedStyle(e,null).getPropertyValue(t)}function el(e){return function(){delete this[e]}}function tl(e,t){return function(){this[e]=t}}function nl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ol(e,t){return arguments.length>1?this.each((t==null?el:typeof t=="function"?nl:tl)(e,t)):this.node()[e]}function Wo(e){return e.trim().split(/^|\s+/)}function $n(e){return e.classList||new qo(e)}function qo(e){this._node=e,this._names=Wo(e.getAttribute("class")||"")}qo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function jo(e,t){for(var n=$n(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Qo(e,t){for(var n=$n(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function il(e){return function(){jo(this,e)}}function rl(e){return function(){Qo(this,e)}}function al(e,t){return function(){(t.apply(this,arguments)?jo:Qo)(this,e)}}function ll(e,t){var n=Wo(e+"");if(arguments.length<2){for(var o=$n(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?al:t?il:rl)(n,t))}function sl(){this.textContent=""}function cl(e){return function(){this.textContent=e}}function ul(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function dl(e){return arguments.length?this.each(e==null?sl:(typeof e=="function"?ul:cl)(e)):this.node().textContent}function fl(){this.innerHTML=""}function hl(e){return function(){this.innerHTML=e}}function gl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ml(e){return arguments.length?this.each(e==null?fl:(typeof e=="function"?gl:hl)(e)):this.node().innerHTML}function pl(){this.nextSibling&&this.parentNode.appendChild(this)}function yl(){return this.each(pl)}function vl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wl(){return this.each(vl)}function _l(e){var t=typeof e=="function"?e:Go(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xl(){return null}function El(e,t){var n=typeof e=="function"?e:Go(e),o=t==null?xl:typeof t=="function"?t:Mn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function bl(){var e=this.parentNode;e&&e.removeChild(this)}function Sl(){return this.each(bl)}function Nl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(e){return this.select(e?Cl:Nl)}function Ml(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $l(e){return function(t){e.call(this,t,this.__data__)}}function Il(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Rl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Ol(e,t,n){return function(){var o=this.__on,i,a=$l(t);if(o){for(var l=0,s=o.length;l<s;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function Tl(e,t,n){var o=Il(e+""),i,a=o.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,d;c<u;++c)for(i=0,d=s[c];i<a;++i)if((l=o[i]).type===d.type&&l.name===d.name)return d.value}return}for(s=t?Ol:Rl,i=0;i<a;++i)this.each(s(o[i],t,n));return this}function Jo(e,t,n){var o=Ko(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Bl(e,t){return function(){return Jo(this,e,t)}}function Pl(e,t){return function(){return Jo(this,e,t.apply(this,arguments))}}function zl(e,t){return this.each((typeof t=="function"?Pl:Bl)(e,t))}function*Dl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,l;i<a;++i)(l=o[i])&&(yield l)}var ei=[null];function de(e,t){this._groups=e,this._parents=t}function Je(){return new de([[document.documentElement]],ei)}function Al(){return this}de.prototype=Je.prototype={constructor:de,select:ua,selectAll:ga,selectChild:va,selectChildren:Ea,filter:ba,data:$a,enter:Sa,exit:Ra,join:Oa,merge:Ta,selection:Al,order:Ba,sort:Pa,call:Da,nodes:Aa,node:Va,size:Ha,empty:Fa,each:La,attr:Wa,style:Ja,property:ol,classed:ll,text:dl,html:ml,raise:yl,lower:wl,append:_l,insert:El,remove:Sl,clone:kl,datum:Ml,on:Tl,dispatch:zl,[Symbol.iterator]:Dl};function fe(e){return typeof e=="string"?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],ei)}function Vl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function pe(e,t){if(e=Vl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Hl={passive:!1},et={capture:!0,passive:!1};function In(e){e.stopImmediatePropagation()}function Le(e){e.preventDefault(),e.stopImmediatePropagation()}function ti(e){var t=e.document.documentElement,n=fe(e).on("dragstart.drag",Le,et);"onselectstart"in t?n.on("selectstart.drag",Le,et):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ni(e,t){var n=e.document.documentElement,o=fe(e).on("dragstart.drag",null);t&&(o.on("click.drag",Le,et),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rt=e=>()=>e;function Rn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:l,y:s,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Rn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Fl(e){return!e.ctrlKey&&!e.button}function Ll(){return this.parentNode}function Gl(e,t){return t??{x:e.x,y:e.y}}function Yl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xl(){var e=Fl,t=Ll,n=Gl,o=Yl,i={},a=kt("start","drag","end"),l=0,s,c,u,d,m=0;function p(_){_.on("mousedown.drag",E).filter(o).on("touchstart.drag",x).on("touchmove.drag",w,Hl).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(_,C){if(!(d||!e.call(this,_,C))){var R=P(this,t.call(this,_,C),_,C,"mouse");R&&(fe(_.view).on("mousemove.drag",h,et).on("mouseup.drag",f,et),ti(_.view),In(_),u=!1,s=_.clientX,c=_.clientY,R("start",_))}}function h(_){if(Le(_),!u){var C=_.clientX-s,R=_.clientY-c;u=C*C+R*R>m}i.mouse("drag",_)}function f(_){fe(_.view).on("mousemove.drag mouseup.drag",null),ni(_.view,u),Le(_),i.mouse("end",_)}function x(_,C){if(e.call(this,_,C)){var R=_.changedTouches,y=t.call(this,_,C),L=R.length,D,$;for(D=0;D<L;++D)($=P(this,y,_,C,R[D].identifier,R[D]))&&(In(_),$("start",_,R[D]))}}function w(_){var C=_.changedTouches,R=C.length,y,L;for(y=0;y<R;++y)(L=i[C[y].identifier])&&(Le(_),L("drag",_,C[y]))}function S(_){var C=_.changedTouches,R=C.length,y,L;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),y=0;y<R;++y)(L=i[C[y].identifier])&&(In(_),L("end",_,C[y]))}function P(_,C,R,y,L,D){var $=a.copy(),V=pe(D||R,C),ee,W,v;if((v=n.call(_,new Rn("beforestart",{sourceEvent:R,target:p,identifier:L,active:l,x:V[0],y:V[1],dx:0,dy:0,dispatch:$}),y))!=null)return ee=v.x-V[0]||0,W=v.y-V[1]||0,function H(k,O,Z){var G=V,T;switch(k){case"start":i[L]=H,T=l++;break;case"end":delete i[L],--l;case"drag":V=pe(Z||O,C),T=l;break}$.call(k,_,new Rn(k,{sourceEvent:O,subject:v,target:p,identifier:L,active:T,x:V[0]+ee,y:V[1]+W,dx:V[0]-G[0],dy:V[1]-G[1],dispatch:$}),y)}}return p.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Rt(!!_),p):e},p.container=function(_){return arguments.length?(t=typeof _=="function"?_:Rt(_),p):t},p.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Rt(_),p):n},p.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:Rt(!!_),p):o},p.on=function(){var _=a.on.apply(a,arguments);return _===a?p:_},p.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,p):Math.sqrt(m)},p}function oi(e){const t=r.effectScope();return Ae(()=>t.stop()),t.run(()=>{const n=ie(),o=r.toRef(n,"vueFlowRef"),i=r.toRef(n,"snapToGrid"),a=r.toRef(n,"snapGrid"),l=r.toRef(n,"noDragClassName"),s=r.toRef(n,"nodes"),c=r.toRef(n,"nodeExtent"),u=r.toRef(n,"viewport"),d=r.toRef(n,"autoPanOnNodeDrag"),m=r.toRef(n,"nodesDraggable"),p=r.toRef(n,"panBy"),E=r.toRef(n,"findNode"),h=r.toRef(n,"multiSelectionActive"),f=r.toRef(n,"nodesSelectionActive"),x=r.toRef(n,"selectNodesOnDrag"),w=r.toRef(n,"removeSelectedElements"),S=r.toRef(n,"addSelectedNodes"),P=r.toRef(n,"updateNodePositions"),_=r.toRef(n,"emits"),C=e,R=r.toRef(C,"onStart"),y=r.toRef(C,"onDrag"),L=r.toRef(C,"onStop"),D=r.toRef(C,"el"),$=r.toRef(C,"disabled"),V=r.toRef(C,"id"),ee=r.toRef(C,"selectable"),W=r.ref(!1);let v=r.ref([]),H=r.ref(),k=r.ref(null),O=r.ref({x:void 0,y:void 0}),Z=r.ref({x:0,y:0}),G=r.ref(null),T=r.ref(0),X=r.ref(!1);const q=r.computed(()=>V.value?E.value(V.value):void 0),te=Vo();return r.watch([()=>$.value,()=>D.value],()=>{if(D.value){const ne=fe(D.value),z=({x:F,y:g})=>{O.value={x:F,y:g};let b=!1;if(v.value=v.value.map(B=>{const I={x:F-B.distance.x,y:g-B.distance.y};i.value&&(I.x=a.value[0]*Math.round(I.x/a.value[0]),I.y=a.value[1]*Math.round(I.y/a.value[1]));const{computedPosition:A}=Nn(B,I,_.value.error,c.value,B.parentNode?E.value(B.parentNode):void 0);return b=b||B.position.x!==A.x||B.position.y!==A.y,B.position=A,B}),!!b&&(P.value(v.value,!0,!0),W.value=!0,G.value)){const[B,I]=Sn({id:V.value,dragItems:v.value,findNode:E.value});y.value(G.value,B,I)}},M=()=>{if(!k.value)return;const[F,g]=zo(Z.value,k.value);(F!==0||g!==0)&&(O.value.x=(O.value.x??0)-F/u.value.zoom,O.value.y=(O.value.y??0)-g/u.value.zoom,z(O.value),p.value({x:F,y:g})),T.value=requestAnimationFrame(M)};$.value?ne.on(".drag",null):(H.value=Xl().on("start",F=>{var b,B;!x.value&&!h.value&&V.value&&((b=q.value)!=null&&b.selected||w.value()),q.value&&ee.value&&x.value&&Cn(q.value,h.value,S.value,w.value,f,!1,D.value);const g=te(F);if(O.value=g,v.value=Qr(s.value,m.value,g,E.value,V.value),v.value.length){const[I,A]=Sn({id:V.value,dragItems:v.value,findNode:E.value});R.value(F.sourceEvent,I,A)}k.value=((B=o.value)==null?void 0:B.getBoundingClientRect())||null,Z.value=He(F.sourceEvent,k.value)}).on("drag",F=>{const g=te(F);!X.value&&d.value&&(X.value=!0,M()),(O.value.x!==g.xSnapped||O.value.y!==g.ySnapped)&&v.value.length&&(G.value=F.sourceEvent,Z.value=He(F.sourceEvent,k.value),z(g))}).on("end",F=>{if(W.value=!1,X.value=!1,cancelAnimationFrame(T.value),v.value.length){P.value(v.value,!1,!1);const[g,b]=Sn({id:V.value,dragItems:v.value,findNode:E.value});L.value(F.sourceEvent,g,b)}}).filter(F=>{var b;const g=F.target;return!F.button&&(!l.value||!Do(g,`.${l.value}`,D.value)&&(!((b=q.value)!=null&&b.dragHandle)||Do(g,q.value.dragHandle,D.value)))}),ne.call(H.value))}}),W})}const ii="vue-flow__node-desc",ri="vue-flow__edge-desc",Ul="vue-flow__aria-live",ai=["Enter"," ","Escape"],Ge={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function On(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target,n=we(t.hasAttribute)?t.hasAttribute("contenteditable"):!1,o=we(t.closest)?t.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||n||!!o}function Zl(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Kl(e,t){return n=>e.some(o=>{const i=o.split("+").map(a=>a.trim().toLowerCase());return i.length===1?n.key===o:(t.add(n.key.toLowerCase()),i.every(a=>t.has(a)))})}const tt=(e,t)=>{const n=dn();let o=r.ref(r.unref(e)===!0),i=r.ref(!1);const a=r.ref(new Set);return r.watch(o,()=>{t&&typeof t=="function"&&t(o.value)}),r.watchEffect(()=>{let l=r.unref(e);if(typeof n.addEventListener<"u"&&ln(n,"blur",()=>{o.value=!1}),Qi(l)){o.value=l;return}Array.isArray(l)&&(l=Kl(l,a.value)),l&&(go(l,s=>{i.value=Zl(s),!(!i.value&&On(s))&&(s.preventDefault(),o.value=!0)},{eventName:"keydown"}),go(l,s=>{if(o.value){if(!i.value&&On(s))return;i.value=!1,a.value.clear(),o.value=!1}},{eventName:"keyup"}))}),o},Wl=r.defineComponent({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){r.provide(_n,e.id);const t=ie(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"noPanClassName"),a=r.toRef(t,"selectNodesOnDrag"),l=r.toRef(t,"nodesSelectionActive"),s=r.toRef(t,"multiSelectionActive"),c=r.toRef(t,"emits"),u=r.toRef(t,"findNode"),d=r.toRef(t,"removeSelectedNodes"),m=r.toRef(t,"addSelectedNodes"),p=r.toRef(t,"updateNodeDimensions"),E=r.toRef(t,"onUpdateNodeInternals"),h=r.toRef(t,"getIntersectingNodes"),f=r.toRef(t,"getNodeTypes"),x=r.toRef(t,"nodeExtent"),w=r.toRef(t,"elevateNodesOnSelect"),S=r.toRef(t,"disableKeyboardA11y"),P=r.toRef(t,"ariaLiveMessage"),_=r.toRef(t,"snapToGrid"),C=r.toRef(t,"snapGrid"),R=Ao(),y=Ze(e,"node"),L=r.computed(()=>y.value.parentNode?u.value(y.value.parentNode):void 0),D=r.computed(()=>We([y.value],o.value)),$=r.ref();r.provide(ko,$);const{emit:V,on:ee}=oa(y.value,c.value),W=oi({id:e.id,el:$,disabled:r.computed(()=>!e.draggable),selectable:r.computed(()=>e.selectable),onStart(M,F,g){V.dragStart({event:M,node:F,nodes:g,intersections:h.value(F)})},onDrag(M,F,g){V.drag({event:M,node:F,nodes:g,intersections:h.value(F)})},onStop(M,F,g){V.dragStop({event:M,node:F,nodes:g,intersections:h.value(F)})}}),v=r.computed(()=>y.value.class instanceof Function?y.value.class(y.value):y.value.class),H=r.computed(()=>{const M=(y.value.style instanceof Function?y.value.style(y.value):y.value.style)||{},F=y.value.width instanceof Function?y.value.width(y.value):y.value.width,g=y.value.height instanceof Function?y.value.height(y.value):y.value.height;return F&&(M.width=typeof F=="string"?F:`${F}px`),g&&(M.height=typeof g=="string"?g:`${g}px`),M}),k=r.computed(()=>Number(y.value.zIndex??H.value.zIndex??0));return E.value(M=>{M.includes(e.id)&&Z()}),r.onMounted(()=>{e.resizeObserver.observe($.value)}),r.onBeforeUnmount(()=>{e.resizeObserver.unobserve($.value)}),r.watch([()=>y.value.type,()=>y.value.sourcePosition,()=>y.value.targetPosition],()=>{p.value([{id:e.id,nodeElement:$.value,forceUpdate:!0}])},{flush:"pre"}),r.watch([()=>y.value.position.x,()=>y.value.position.y,()=>{var M;return(M=L.value)==null?void 0:M.computedPosition.x},()=>{var M;return(M=L.value)==null?void 0:M.computedPosition.y},()=>{var M;return(M=L.value)==null?void 0:M.computedPosition.z},()=>y.value.selected,()=>y.value.dimensions.height,()=>y.value.dimensions.width,()=>{var M;return(M=L.value)==null?void 0:M.dimensions.height},()=>{var M;return(M=L.value)==null?void 0:M.dimensions.width},k],([M,F,g,b,B])=>{const I={x:M,y:F,z:k.value+(w.value&&y.value.selected?1e3:0)};_e(g)&&_e(b)?y.value.computedPosition=Dr({x:g,y:b,z:B},I):y.value.computedPosition=I},{flush:"pre",immediate:!0}),r.watch([()=>y.value.extent,()=>x.value],([M,F],[g,b])=>{(M!==g||F!==b)&&O()}),y.value.extent==="parent"||typeof y.value.extent=="object"&&"range"in y.value.extent&&y.value.extent.range==="parent"?ce(()=>y.value.initialized).toBe(!0).then(O):O(),()=>r.h("div",{ref:$,"data-id":y.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[i.value]:e.draggable,dragging:W==null?void 0:W.value,selected:y.value.selected,selectable:e.selectable},v.value],style:{zIndex:y.value.computedPosition.z??k.value,transform:`translate(${y.value.computedPosition.x}px,${y.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:y.value.initialized?"visible":"hidden",...H.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":S.value?void 0:`${ii}-${n.value}`,"aria-label":y.value.ariaLabel,onMouseenter:G,onMousemove:T,onMouseleave:X,onContextmenu:q,onClick:ne,onDblclick:te,onKeydown:z},[r.h(e.type===!1?f.value.default:e.type,{id:y.value.id,type:y.value.type,data:y.value.data,events:{...y.value.events,...ee},selected:!!y.value.selected,resizing:!!y.value.resizing,dragging:W==null?void 0:W.value,connectable:e.connectable,position:y.value.position,dimensions:y.value.dimensions,isValidTargetPos:y.value.isValidTargetPos,isValidSourcePos:y.value.isValidSourcePos,parent:y.value.parentNode,zIndex:y.value.computedPosition.z,targetPosition:y.value.targetPosition,sourcePosition:y.value.sourcePosition,label:y.value.label,dragHandle:y.value.dragHandle,onUpdateNodeInternals:Z})]);function O(){const M=y.value.computedPosition;_.value&&(M.x=C.value[0]*Math.round(M.x/C.value[0]),M.y=C.value[1]*Math.round(M.y/C.value[1]));const{computedPosition:F,position:g}=Nn(y.value,M,c.value.error,x.value,L.value);(y.value.computedPosition.x!==F.x||y.value.computedPosition.y!==F.y)&&(y.value.computedPosition={...y.value.computedPosition,...F}),(y.value.position.x!==g.x||y.value.position.y!==g.y)&&(y.value.position=g)}function Z(){$.value&&p.value([{id:e.id,nodeElement:$.value,forceUpdate:!0}])}function G(M){W!=null&&W.value||V.mouseEnter({event:M,node:y.value,connectedEdges:D.value})}function T(M){W!=null&&W.value||V.mouseMove({event:M,node:y.value,connectedEdges:D.value})}function X(M){W!=null&&W.value||V.mouseLeave({event:M,node:y.value,connectedEdges:D.value})}function q(M){return V.contextMenu({event:M,node:y.value,connectedEdges:D.value})}function te(M){return V.doubleClick({event:M,node:y.value,connectedEdges:D.value})}function ne(M){e.selectable&&(!a.value||!e.draggable)&&Cn(y.value,s.value,m.value,d.value,l,!1,$.value),V.click({event:M,node:y.value,connectedEdges:D.value})}function z(M){var F;if(!On(M))if(ai.includes(M.key)&&e.selectable){const g=M.key==="Escape";g&&((F=$.value)==null||F.blur()),Cn(y.value,s.value,m.value,d.value,l,g,$.value)}else!S.value&&e.draggable&&y.value.selected&&Ge[M.key]&&(P.value=`Moved selected node ${M.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.value.position.x}, y: ${~~y.value.position.y}`,R({x:Ge[M.key].x,y:Ge[M.key].y},M.shiftKey))}}}),ql=["transform"],jl=["width","height","x","y","rx","ry"],Ql=["y"],Jl={name:"EdgeText",compatConfig:{MODE:3}},li=r.defineComponent({...Jl,props:{x:null,y:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){let t=r.ref({x:0,y:0,width:0,height:0});const n=r.ref(null),o=r.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);r.onMounted(i),r.watch([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,l)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${r.unref(t).width+2*e.labelBgPadding[0]}px`,height:`${r.unref(t).height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,jl)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:r.unref(t).height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(a.$slots,"default",{},()=>[r.unref(Ce)(e.label)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64)):(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0}))])],16,Ql)],8,ql))}}),Ot=function({path:e,label:t,labelX:n,labelY:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:l,labelShowBg:s=!0,labelStyle:c,markerStart:u,markerEnd:d,interactionWidth:m=20},{attrs:p}){return[r.h("path",{style:p.style,class:["vue-flow__edge-path",p.class].join(" "),d:e,"marker-end":d,"marker-start":u}),m?r.h("path",{d:e,fill:"none","stroke-opacity":0,"stroke-width":m}):null,t&&_e(n)&&_e(o)?r.h(li,{x:n,y:o,label:t,labelStyle:c,labelShowBg:s,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:i}):null]};Ot.props=["path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"],Ot.inheritAttrs=!1,Ot.compatConfig={MODE:3};const nt=Ot;function Tn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,l=Math.abs(o-t)/2,s=o<t?o+l:o-l;return[a,s,i,l]}function Bn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:s}){const c=e*.125+i*.375+l*.375+n*.125,u=t*.125+a*.375+s*.375+o*.125,d=Math.abs(c-e),m=Math.abs(u-t);return[c,u,d,m]}function Tt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function si({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let l,s;switch(e){case j.Left:l=t-Tt(t-o,a),s=n;break;case j.Right:l=t+Tt(o-t,a),s=n;break;case j.Top:l=t,s=n-Tt(n-i,a);break;case j.Bottom:l=t,s=n+Tt(i-n,a);break}return[l,s]}function Bt({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top,curvature:l=.25}){const[s,c]=si({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[u,d]=si({pos:a,x1:o,y1:i,x2:e,y2:t,c:l}),[m,p,E,h]=Bn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${s},${c} ${u},${d} ${o},${i}`,m,p,E,h]}const Pt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=Bt({sourcePosition:e,targetPosition:t,...n});return r.h(nt,{path:i,labelX:a,labelY:l,...n,...o})};Pt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],Pt.inheritAttrs=!1,Pt.compatConfig={MODE:3};const ci=Pt;function ui({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,l;switch(e){case j.Left:case j.Right:a=.5*(t+o),l=n;break;case j.Top:case j.Bottom:a=t,l=.5*(n+i);break}return[a,l]}function Pn({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top}){const[l,s]=ui({pos:n,x1:e,y1:t,x2:o,y2:i}),[c,u]=ui({pos:a,x1:o,y1:i,x2:e,y2:t}),[d,m,p,E]=Bn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:s,targetControlX:c,targetControlY:u});return[`M${e},${t} C${l},${s} ${c},${u} ${o},${i}`,d,m,p,E]}const zt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=Pn({sourcePosition:e,targetPosition:t,...n});return r.h(nt,{path:i,labelX:a,labelY:l,...n,...o})};zt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],zt.inheritAttrs=!1,zt.compatConfig={MODE:3};const di=zt,fi={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}};function es({source:e,sourcePosition:t=j.Bottom,target:n}){return t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function hi(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function ts({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:i,offset:a}){const l=fi[t],s=fi[o],c={x:e.x+l.x*a,y:e.y+l.y*a},u={x:n.x+s.x*a,y:n.y+s.y*a},d=es({source:c,sourcePosition:t,target:u}),m=d.x!==0?"x":"y",p=d[m];let E,h,f;const[x,w,S,P]=Tn({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[m]*s[m]===-1){h=i.x||x,f=i.y||w;const C=[{x:h,y:c.y},{x:h,y:u.y}],R=[{x:c.x,y:f},{x:u.x,y:f}];l[m]===p?E=m==="x"?C:R:E=m==="x"?R:C}else{const C=[{x:c.x,y:u.y}],R=[{x:u.x,y:c.y}];if(m==="x"?E=l.x===p?R:C:E=l.y===p?C:R,t!==o){const y=m==="x"?"y":"x",L=l[m]===s[y],D=c[y]>u[y],$=c[y]<u[y];(l[m]===1&&(!L&&D||L&&$)||l[m]!==1&&(!L&&$||L&&D))&&(E=m==="x"?C:R)}h=E[0].x,f=E[0].y}return[[e,c,...E,u,n],h,f,S,P]}function ns(e,t,n,o){const i=Math.min(hi(e,t)/2,hi(t,n)/2,o),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+i*u},${l}Q ${a},${l} ${a},${l+i*d}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${l+i*c}Q ${a},${l} ${a+i*s},${l}`}function Dt({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top,borderRadius:l=5,centerX:s,centerY:c,offset:u=20}){const[d,m,p,E,h]=ts({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:s,y:c},offset:u});return[d.reduce((x,w,S)=>{let P;return S>0&&S<d.length-1?P=ns(d[S-1],w,d[S+1],l):P=`${S===0?"M":"L"}${w.x} ${w.y}`,x+=P,x},""),m,p,E,h]}const At=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=Dt({sourcePosition:e,targetPosition:t,...n});return r.h(nt,{path:i,labelX:a,labelY:l,...n,...o})};At.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],At.inheritAttrs=!1,At.compatConfig={MODE:3};const zn=At,Vt=function(e,{attrs:t}){return r.h(zn,{...e,...t,borderRadius:0})};Vt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Vt.inheritAttrs=!1,Vt.compatConfig={MODE:3};const gi=Vt;function Dn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,a,l,s]=Tn({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,a,l,s]}const Ht=function(e,{attrs:t}){const[n,o,i]=Dn(e);return r.h(nt,{path:n,labelX:o,labelY:i,...e,...t})};Ht.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Ht.inheritAttrs=!1,Ht.compatConfig={MODE:3};const mi=Ht;function os(e,t,n){return n===j.Left?e-t:n===j.Right?e+t:e}function is(e,t,n){return n===j.Top?e-t:n===j.Bottom?e+t:e}const An=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=j.Top,type:i}){return r.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:os(t,e,o),cy:is(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};An.props=["radius","centerX","centerY","position","type"],An.compatConfig={MODE:3};const pi=An;function rs(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),updateStart:Y(),update:Y(),updateEnd:Y()}}function as(e,t){const n=rs();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const ls=r.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:l,noPanClassName:s,getEdgeTypes:c,removeSelectedEdges:u,findEdge:d,findNode:m,isValidConnection:p}=ie(),E=as(e.edge,a),h=Ze(e,"edge");let f=r.ref(!1),x=r.ref(!1);const w=r.ref(""),S=r.ref(null),P=r.ref("source"),_=r.ref("source"),C=r.ref();r.provide(Mo,e.id),r.provide($o,C);const R=r.computed(()=>m(h.value.source)),y=r.computed(()=>m(h.value.target)),L=r.computed(()=>h.value.class instanceof Function?h.value.class(h.value):h.value.class),D=r.computed(()=>h.value.style instanceof Function?h.value.style(h.value):h.value.style),{handlePointerDown:$}=bn({nodeId:w,handleId:S,type:P,isValidConnection:p.value,edgeUpdaterType:_,onEdgeUpdate:W,onEdgeUpdateEnd:v});return()=>{if(!R.value||!y.value||!h.value)return null;let z;o.value===$e.Strict?z=R.value.handleBounds.source:z=[...R.value.handleBounds.source||[],...R.value.handleBounds.target||[]];const M=Ro(z,h.value.sourceHandle);let F;o.value===$e.Strict?F=y.value.handleBounds.target:F=[...y.value.handleBounds.target||[],...y.value.handleBounds.source||[]];const g=Ro(F,h.value.targetHandle),b=M?M.position:j.Bottom,B=g?g.position:j.Top,{sourceX:I,sourceY:A,targetY:U,targetX:N}=Hr(R.value,M,b,y.value,g,B);return h.value.sourceX=I,h.value.sourceY=A,h.value.targetX=N,h.value.targetY=U,r.h("g",{ref:C,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,s.value,L.value,{updating:f.value,selected:h.value.selected,animated:h.value.animated,inactive:!e.selectable}],onClick:k,onContextmenu:O,onDblclick:Z,onMouseenter:G,onMousemove:T,onMouseleave:X,onKeyDown:e.focusable?ne:void 0,tabIndex:e.focusable?0:void 0,"aria-label":h.value.ariaLabel===null?void 0:h.value.ariaLabel||`Edge from ${h.value.source} to ${h.value.target}`,"aria-describedby":e.focusable?`${ri}-${t}`:void 0,role:e.focusable?"button":void 0},[x.value?null:r.h(e.type===!1?c.value.default:e.type,{id:e.id,sourceNode:R.value,targetNode:y.value,source:h.value.source,target:h.value.target,type:h.value.type,updatable:e.updatable,selected:h.value.selected,animated:h.value.animated,label:h.value.label,labelStyle:h.value.labelStyle,labelShowBg:h.value.labelShowBg,labelBgStyle:h.value.labelBgStyle,labelBgPadding:h.value.labelBgPadding,labelBgBorderRadius:h.value.labelBgBorderRadius,data:h.value.data,events:{...h.value.events,...E.on},style:D.value,markerStart:`url(#${ke(h.value.markerStart,t)})`,markerEnd:`url(#${ke(h.value.markerEnd,t)})`,sourcePosition:b,targetPosition:B,sourceX:I,sourceY:A,targetX:N,targetY:U,sourceHandleId:h.value.sourceHandle,targetHandleId:h.value.targetHandle,interactionWidth:h.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:q,onMouseenter:V,onMouseout:ee},r.h(pi,{position:b,centerX:I,centerY:A,radius:i.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:te,onMouseenter:V,onMouseout:ee},r.h(pi,{position:B,centerX:N,centerY:U,radius:i.value,type:"target","data-type":"target"}))]:null]])};function V(){f.value=!0}function ee(){f.value=!1}function W(z,M){E.emit.update({event:z,edge:h.value,connection:M})}function v(z){E.emit.updateEnd({event:z,edge:h.value}),x.value=!1}function H(z,M){z.button===0&&(x.value=!0,w.value=M?h.value.target:h.value.source,S.value=(M?h.value.targetHandle:h.value.sourceHandle)??"",P.value=M?"target":"source",_.value=P.value,E.emit.updateStart({event:z,edge:h.value}),$(z))}function k(z){const M={event:z,edge:h.value};e.selectable&&(l.value=!1,n([h.value])),E.emit.click(M)}function O(z){E.emit.contextMenu({event:z,edge:h.value})}function Z(z){E.emit.doubleClick({event:z,edge:h.value})}function G(z){E.emit.mouseEnter({event:z,edge:h.value})}function T(z){E.emit.mouseMove({event:z,edge:h.value})}function X(z){E.emit.mouseLeave({event:z,edge:h.value})}function q(z){H(z,!0)}function te(z){H(z,!1)}function ne(z){var M;ai.includes(z.key)&&e.selectable&&(z.key==="Escape"?((M=C.value)==null||M.blur(),u([d(e.id)])):n([d(e.id)]))}}}),ss={height:"0",width:"0"},cs={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},us=r.defineComponent({...cs,setup(e){const{viewportRef:t}=ie(),n=r.computed(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,i)=>(r.openBlock(),r.createElementBlock("svg",null,[(r.openBlock(),r.createElementBlock("foreignObject",ss,[(r.openBlock(),r.createBlock(r.Teleport,{to:r.unref(n),disabled:!r.unref(n)},[r.renderSlot(o.$slots,"default")],8,["to","disabled"]))]))]))}}),ds={class:"vue-flow__connection"},fs=["d","marker-end","marker-start"],hs={name:"ConnectionLine",compatConfig:{MODE:3}},gs=r.defineComponent({...hs,props:{sourceNode:null},setup(e){var D;const t=ie(),n=r.toRef(t,"connectionMode"),o=r.toRef(t,"connectionStartHandle"),i=r.toRef(t,"connectionEndHandle"),a=r.toRef(t,"connectionPosition"),l=r.toRef(t,"connectionLineType"),s=r.toRef(t,"connectionLineStyle"),c=r.toRef(t,"connectionLineOptions"),u=r.toRef(t,"connectionStatus"),d=r.toRef(t,"viewport"),m=r.toRef(t,"findNode"),p={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top},E=(D=r.inject(xt))==null?void 0:D["connection-line"],h=r.computed(()=>o.value.handleId),f=r.computed(()=>o.value.type),x=r.computed(()=>{var $;return(($=i.value)==null?void 0:$.handleId)&&m.value(i.value.nodeId)||null}),w=r.computed(()=>{var $,V;return(n.value===$e.Strict?($=e.sourceNode.handleBounds[f.value])==null?void 0:$.find(ee=>ee.id===h.value):[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]].find(ee=>ee.id===h.value))||((V=e.sourceNode.handleBounds[f.value??"source"])==null?void 0:V[0])}),S=r.computed(()=>{var $,V,ee;return x.value&&(($=i.value)==null?void 0:$.handleId)&&((n.value===$e.Strict?(V=x.value.handleBounds[f.value==="source"?"target":"source"])==null?void 0:V.find(W=>{var v;return W.id===((v=i.value)==null?void 0:v.handleId)}):[...x.value.handleBounds.source||[],...x.value.handleBounds.target||[]].find(W=>{var v;return W.id===((v=i.value)==null?void 0:v.handleId)}))||((ee=x.value.handleBounds[f.value??"target"])==null?void 0:ee[0]))||null}),P=r.computed(()=>{var $;return($=w.value)==null?void 0:$.position}),_=r.computed(()=>w.value?Et(P.value||j.Top,{...e.sourceNode.dimensions,...e.sourceNode.computedPosition},w.value):{x:e.sourceNode.dimensions.width/2,y:e.sourceNode.dimensions.height/2}),C=r.computed(()=>P.value?p[P.value]:void 0),R=r.computed(()=>(a.value.x-d.value.x)/d.value.zoom),y=r.computed(()=>(a.value.y-d.value.y)/d.value.zoom),L=r.computed(()=>{let $;const V={sourceX:_.value.x,sourceY:_.value.y,sourcePosition:P.value,targetX:R.value,targetY:y.value,targetPosition:C.value};switch(l.value??c.value.type){case Me.Bezier:[$]=Bt(V);break;case Me.Step:[$]=Dt({...V,borderRadius:0});break;case Me.SmoothStep:[$]=Dt(V);break;case Me.SimpleBezier:[$]=Pn(V);break;case Me.Straight:[$]=Dn(V);break;default:[$]=Bt(V);break}return $});return($,V)=>{var ee;return r.openBlock(),r.createElementBlock("g",ds,[r.unref(E)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(E)),r.normalizeProps(r.mergeProps({key:0},{sourceX:r.unref(_).x,sourceY:r.unref(_).y,sourcePosition:(ee=r.unref(w))==null?void 0:ee.position,targetX:r.unref(R),targetY:r.unref(y),targetPosition:r.unref(C),sourceNode:e.sourceNode,sourceHandle:r.unref(w),targetNode:r.unref(x),targetHandle:r.unref(S),markerEnd:`url(#${r.unref(ke)(r.unref(c).markerEnd)})`,markerStart:`url(#${r.unref(ke)(r.unref(c).markerStart)})`,connectionStatus:r.unref(u)})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(L),class:r.normalizeClass(["vue-flow__connection-path",[r.unref(c).class,r.unref(u)]]),style:r.normalizeStyle(r.unref(s)||r.unref(c).style||{}),"marker-end":`url(#${r.unref(ke)(r.unref(c).markerEnd)})`,"marker-start":`url(#${r.unref(ke)(r.unref(c).markerStart)})`},null,14,fs))])}}}),ms=["tabIndex"],ps={name:"NodesSelection",compatConfig:{MODE:3}},ys=r.defineComponent({...ps,setup(e){const t=ie(),n=r.toRef(t,"emits"),o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes"),a=r.toRef(t,"noPanClassName"),l=r.toRef(t,"disableKeyboardA11y"),s=r.toRef(t,"userSelectionActive"),c=Ao(),u=r.ref(),d=oi({el:u,onStart(f,x,w){n.value.selectionDragStart({event:f,node:x,nodes:w})},onDrag(f,x,w){n.value.selectionDrag({event:f,node:x,nodes:w})},onStop(f,x,w){n.value.selectionDragStop({event:f,node:x,nodes:w})}});r.onMounted(()=>{var f;l.value||(f=u.value)==null||f.focus({preventScroll:!0})});const m=r.computed(()=>vt(i.value)),p=r.computed(()=>({width:`${m.value.width}px`,height:`${m.value.height}px`,top:`${m.value.y}px`,left:`${m.value.x}px`}));function E(f){n.value.selectionContextMenu({event:f,nodes:i.value})}function h(f){l.value||Ge[f.key]&&c({x:Ge[f.key].x,y:Ge[f.key].y},f.shiftKey)}return(f,x)=>!r.unref(s)&&r.unref(m).width&&r.unref(m).height?(r.openBlock(),r.createElementBlock("div",{key:0,class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",r.unref(a)]),style:r.normalizeStyle({transform:`translate(${r.unref(o).x}px,${r.unref(o).y}px) scale(${r.unref(o).zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:u,class:r.normalizeClass([{dragging:r.unref(d)},"vue-flow__nodesselection-rect"]),style:r.normalizeStyle(r.unref(p)),tabIndex:r.unref(l)?void 0:-1,onContextmenu:E,onKeydown:h},null,46,ms)],6)):r.createCommentVNode("",!0)}}),vs={name:"UserSelection",compatConfig:{MODE:3}},ws=r.defineComponent({...vs,setup(e){const{userSelectionRect:t}=ie();return(n,o)=>{var i,a,l,s;return r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:r.normalizeStyle({width:`${(i=r.unref(t))==null?void 0:i.width}px`,height:`${(a=r.unref(t))==null?void 0:a.height}px`,transform:`translate(${(l=r.unref(t))==null?void 0:l.x}px, ${(s=r.unref(t))==null?void 0:s.y}px)`})},null,4)}}}),yi={input:qr,default:Wr,output:jr},vi={default:ci,straight:mi,step:gi,smoothstep:zn,simplebezier:di};function _s(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:wt.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:je.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Me.Bezier,style:{}},connectionMode:$e.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Cr(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1},vueFlowVersion:"1.18.2"}}function wi(e){const t=_s();return e&&Object.keys(e).forEach(n=>{const o=e[n];re(o)&&(t[n]=o)}),t}function xs(e){const t=r.computed(()=>e.nodes.map(f=>f.id)),n=r.computed(()=>e.edges.map(f=>f.id)),o=r.computed(()=>f=>e.nodes&&!t.value.length?e.nodes.find(x=>x.id===f):e.nodes[t.value.indexOf(f)]),i=r.computed(()=>f=>e.edges&&!n.value.length?e.edges.find(x=>x.id===f):e.edges[n.value.indexOf(f)]),a=r.computed(()=>{var w;const f={...vi,...e.edgeTypes},x=Object.keys(f);return(w=e.edges)==null||w.forEach(S=>S.type&&!x.includes(S.type)&&(f[S.type]=S.type)),f}),l=r.computed(()=>{var w;const f={...yi,...e.nodeTypes},x=Object.keys(f);return(w=e.nodes)==null||w.forEach(S=>S.type&&!x.includes(S.type)&&(f[S.type]=S.type)),f}),s=r.computed(()=>{const f=e.nodes.filter(x=>!x.hidden);return e.onlyRenderVisibleElements?f&&vn(f,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):f??[]}),c=(f,x,w)=>{if(x=x??o.value(f.source),w=w??o.value(f.target),!x||!w){e.hooks.error.trigger(new le(ae.EDGE_ORPHANED,f.id));return}return!f.hidden&&!w.hidden&&!x.hidden},u=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(f=>{const x=o.value(f.source),w=o.value(f.target);return c(f,x,w)&&Fr({sourcePos:x.computedPosition||{x:0,y:0},targetPos:w.computedPosition||{x:0,y:0},sourceWidth:x.dimensions.width,sourceHeight:x.dimensions.height,targetWidth:w.dimensions.width,targetHeight:w.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(f=>c(f))),d=r.computed(()=>[...s.value,...u.value]),m=r.computed(()=>e.nodes.filter(f=>f.selected)),p=r.computed(()=>e.edges.filter(f=>f.selected)),E=r.computed(()=>[...m.value??[],...p.value??[]]),h=r.computed(()=>s.value.filter(f=>f.initialized&&f.handleBounds!==void 0));return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:a,getNodeTypes:l,getEdges:u,getNodes:s,getSelectedElements:E,getSelectedNodes:m,getSelectedEdges:p,getNodesInitialized:h}}function Vn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _i(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ot(){}var it=.7,Ft=1/it,Ye="\\s*([+-]?\\d+)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Es=/^#([0-9a-f]{3,8})$/,bs=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),Ss=new RegExp(`^rgb\\(${ye},${ye},${ye}\\)$`),Ns=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${rt}\\)$`),Cs=new RegExp(`^rgba\\(${ye},${ye},${ye},${rt}\\)$`),ks=new RegExp(`^hsl\\(${rt},${ye},${ye}\\)$`),Ms=new RegExp(`^hsla\\(${rt},${ye},${ye},${rt}\\)$`),xi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vn(ot,at,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ei,formatHex:Ei,formatHex8:$s,formatHsl:Is,formatRgb:bi,toString:bi});function Ei(){return this.rgb().formatHex()}function $s(){return this.rgb().formatHex8()}function Is(){return Mi(this).formatHsl()}function bi(){return this.rgb().formatRgb()}function at(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Es.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Si(t):n===3?new ue(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Lt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Lt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bs.exec(e))?new ue(t[1],t[2],t[3],1):(t=Ss.exec(e))?new ue(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ns.exec(e))?Lt(t[1],t[2],t[3],t[4]):(t=Cs.exec(e))?Lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ks.exec(e))?ki(t[1],t[2]/100,t[3]/100,1):(t=Ms.exec(e))?ki(t[1],t[2]/100,t[3]/100,t[4]):xi.hasOwnProperty(e)?Si(xi[e]):e==="transparent"?new ue(NaN,NaN,NaN,0):null}function Si(e){return new ue(e>>16&255,e>>8&255,e&255,1)}function Lt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ue(e,t,n,o)}function Rs(e){return e instanceof ot||(e=at(e)),e?(e=e.rgb(),new ue(e.r,e.g,e.b,e.opacity)):new ue}function Hn(e,t,n,o){return arguments.length===1?Rs(e):new ue(e,t,n,o??1)}function ue(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Vn(ue,Hn,_i(ot,{brighter(e){return e=e==null?Ft:Math.pow(Ft,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?it:Math.pow(it,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ue(Te(this.r),Te(this.g),Te(this.b),Gt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ni,formatHex:Ni,formatHex8:Os,formatRgb:Ci,toString:Ci}));function Ni(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}`}function Os(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}${Be((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ci(){const e=Gt(this.opacity);return`${e===1?"rgb(":"rgba("}${Te(this.r)}, ${Te(this.g)}, ${Te(this.b)}${e===1?")":`, ${e})`}`}function Gt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Te(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Be(e){return e=Te(e),(e<16?"0":"")+e.toString(16)}function ki(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new he(e,t,n,o)}function Mi(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);if(e instanceof ot||(e=at(e)),!e)return new he;if(e instanceof he)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),l=NaN,s=a-i,c=(a+i)/2;return s?(t===a?l=(n-o)/s+(n<o)*6:n===a?l=(o-t)/s+2:l=(t-n)/s+4,s/=c<.5?a+i:2-a-i,l*=60):s=c>0&&c<1?0:l,new he(l,s,c,e.opacity)}function Ts(e,t,n,o){return arguments.length===1?Mi(e):new he(e,t,n,o??1)}function he(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Vn(he,Ts,_i(ot,{brighter(e){return e=e==null?Ft:Math.pow(Ft,e),new he(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?it:Math.pow(it,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new ue(Fn(e>=240?e-240:e+120,i,o),Fn(e,i,o),Fn(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new he($i(this.h),Yt(this.s),Yt(this.l),Gt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gt(this.opacity);return`${e===1?"hsl(":"hsla("}${$i(this.h)}, ${Yt(this.s)*100}%, ${Yt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $i(e){return e=(e||0)%360,e<0?e+360:e}function Yt(e){return Math.max(0,Math.min(1,e||0))}function Fn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ii=e=>()=>e;function Bs(e,t){return function(n){return e+n*t}}function Ps(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function zs(e){return(e=+e)==1?Ri:function(t,n){return n-t?Ps(t,n,e):Ii(isNaN(t)?n:t)}}function Ri(e,t){var n=t-e;return n?Bs(e,n):Ii(isNaN(e)?t:e)}const Oi=function e(t){var n=zs(t);function o(i,a){var l=n((i=Hn(i)).r,(a=Hn(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),u=Ri(i.opacity,a.opacity);return function(d){return i.r=l(d),i.g=s(d),i.b=c(d),i.opacity=u(d),i+""}}return o.gamma=e,o}(1);function Ie(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gn=new RegExp(Ln.source,"g");function Ds(e){return function(){return e}}function As(e){return function(t){return e(t)+""}}function Vs(e,t){var n=Ln.lastIndex=Gn.lastIndex=0,o,i,a,l=-1,s=[],c=[];for(e=e+"",t=t+"";(o=Ln.exec(e))&&(i=Gn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[l]?s[l]+=a:s[++l]=a),(o=o[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,c.push({i:l,x:Ie(o,i)})),n=Gn.lastIndex;return n<t.length&&(a=t.slice(n),s[l]?s[l]+=a:s[++l]=a),s.length<2?c[0]?As(c[0].x):Ds(t):(t=c.length,function(u){for(var d=0,m;d<t;++d)s[(m=c[d]).i]=m.x(u);return s.join("")})}var Ti=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bi(e,t,n,o,i,a){var l,s,c;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,c/=s),e*o<t*n&&(e=-e,t=-t,c=-c,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ti,skewX:Math.atan(c)*Ti,scaleX:l,scaleY:s}}var Xt;function Hs(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yn:Bi(t.a,t.b,t.c,t.d,t.e,t.f)}function Fs(e){return e==null||(Xt||(Xt=document.createElementNS("http://www.w3.org/2000/svg","g")),Xt.setAttribute("transform",e),!(e=Xt.transform.baseVal.consolidate()))?Yn:(e=e.matrix,Bi(e.a,e.b,e.c,e.d,e.e,e.f))}function Pi(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,d,m,p,E,h){if(u!==m||d!==p){var f=E.push("translate(",null,t,null,n);h.push({i:f-4,x:Ie(u,m)},{i:f-2,x:Ie(d,p)})}else(m||p)&&E.push("translate("+m+t+p+n)}function l(u,d,m,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:m.push(i(m)+"rotate(",null,o)-2,x:Ie(u,d)})):d&&m.push(i(m)+"rotate("+d+o)}function s(u,d,m,p){u!==d?p.push({i:m.push(i(m)+"skewX(",null,o)-2,x:Ie(u,d)}):d&&m.push(i(m)+"skewX("+d+o)}function c(u,d,m,p,E,h){if(u!==m||d!==p){var f=E.push(i(E)+"scale(",null,",",null,")");h.push({i:f-4,x:Ie(u,m)},{i:f-2,x:Ie(d,p)})}else(m!==1||p!==1)&&E.push(i(E)+"scale("+m+","+p+")")}return function(u,d){var m=[],p=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,m,p),l(u.rotate,d.rotate,m,p),s(u.skewX,d.skewX,m,p),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,m,p),u=d=null,function(E){for(var h=-1,f=p.length,x;++h<f;)m[(x=p[h]).i]=x.x(E);return m.join("")}}}var Ls=Pi(Hs,"px, ","px)","deg)"),Gs=Pi(Fs,", ",")",")"),Ys=1e-12;function zi(e){return((e=Math.exp(e))+1/e)/2}function Xs(e){return((e=Math.exp(e))-1/e)/2}function Us(e){return((e=Math.exp(2*e))-1)/(e+1)}const Zs=function e(t,n,o){function i(a,l){var s=a[0],c=a[1],u=a[2],d=l[0],m=l[1],p=l[2],E=d-s,h=m-c,f=E*E+h*h,x,w;if(f<Ys)w=Math.log(p/u)/t,x=function(y){return[s+y*E,c+y*h,u*Math.exp(t*y*w)]};else{var S=Math.sqrt(f),P=(p*p-u*u+o*f)/(2*u*n*S),_=(p*p-u*u-o*f)/(2*p*n*S),C=Math.log(Math.sqrt(P*P+1)-P),R=Math.log(Math.sqrt(_*_+1)-_);w=(R-C)/t,x=function(y){var L=y*w,D=zi(C),$=u/(n*S)*(D*Us(t*L+C)-Xs(C));return[s+$*E,c+$*h,u*D/zi(t*L+C)]}}return x.duration=w*1e3*t/Math.SQRT2,x}return i.rho=function(a){var l=Math.max(.001,+a),s=l*l,c=s*s;return e(l,s,c)},i}(Math.SQRT2,2,4);var Xe=0,lt=0,st=0,Di=1e3,Ut,ct,Zt=0,Pe=0,Kt=0,ut=typeof performance=="object"&&performance.now?performance:Date,Ai=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xn(){return Pe||(Ai(Ks),Pe=ut.now()+Kt)}function Ks(){Pe=0}function Wt(){this._call=this._time=this._next=null}Wt.prototype=Vi.prototype={constructor:Wt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Xn():+n)+(t==null?0:+t),!this._next&&ct!==this&&(ct?ct._next=this:Ut=this,ct=this),this._call=e,this._time=n,Un()},stop:function(){this._call&&(this._call=null,this._time=1/0,Un())}};function Vi(e,t,n){var o=new Wt;return o.restart(e,t,n),o}function Ws(){Xn(),++Xe;for(var e=Ut,t;e;)(t=Pe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xe}function Hi(){Pe=(Zt=ut.now())+Kt,Xe=lt=0;try{Ws()}finally{Xe=0,js(),Pe=0}}function qs(){var e=ut.now(),t=e-Zt;t>Di&&(Kt-=t,Zt=e)}function js(){for(var e,t=Ut,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ut=n);ct=e,Un(o)}function Un(e){if(!Xe){lt&&(lt=clearTimeout(lt));var t=e-Pe;t>24?(e<1/0&&(lt=setTimeout(Hi,e-ut.now()-Kt)),st&&(st=clearInterval(st))):(st||(Zt=ut.now(),st=setInterval(qs,Di)),Xe=1,Ai(Hi))}}function Fi(e,t,n){var o=new Wt;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Qs=kt("start","end","cancel","interrupt"),Js=[],Li=0,Gi=1,Zn=2,qt=3,Yi=4,Kn=5,jt=6;function Qt(e,t,n,o,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;ec(e,n,{name:t,index:o,group:i,on:Qs,tween:Js,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Li})}function Wn(e,t){var n=ge(e,t);if(n.state>Li)throw new Error("too late; already scheduled");return n}function ve(e,t){var n=ge(e,t);if(n.state>qt)throw new Error("too late; already running");return n}function ge(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ec(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Vi(a,0,n.time);function a(u){n.state=Gi,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var d,m,p,E;if(n.state!==Gi)return c();for(d in o)if(E=o[d],E.name===n.name){if(E.state===qt)return Fi(l);E.state===Yi?(E.state=jt,E.timer.stop(),E.on.call("interrupt",e,e.__data__,E.index,E.group),delete o[d]):+d<t&&(E.state=jt,E.timer.stop(),E.on.call("cancel",e,e.__data__,E.index,E.group),delete o[d])}if(Fi(function(){n.state===qt&&(n.state=Yi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Zn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zn){for(n.state=qt,i=new Array(p=n.tween.length),d=0,m=-1;d<p;++d)(E=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++m]=E);i.length=m+1}}function s(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Kn,1),m=-1,p=i.length;++m<p;)i[m].call(e,d);n.state===Kn&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=jt,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Jt(e,t){var n=e.__transition,o,i,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){a=!1;continue}i=o.state>Zn&&o.state<Kn,o.state=jt,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}a&&delete e.__transition}}function tc(e){return this.each(function(){Jt(this,e)})}function nc(e,t){var n,o;return function(){var i=ve(this,e),a=i.tween;if(a!==n){o=n=a;for(var l=0,s=o.length;l<s;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function oc(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=ve(this,e),l=a.tween;if(l!==o){i=(o=l).slice();for(var s={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=s;break}c===u&&i.push(s)}a.tween=i}}function ic(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ge(this.node(),n).tween,i=0,a=o.length,l;i<a;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?nc:oc)(n,e,t))}function qn(e,t,n){var o=e._id;return e.each(function(){var i=ve(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ge(i,o).value[t]}}function Xi(e,t){var n;return(typeof t=="number"?Ie:t instanceof at?Oi:(n=at(t))?(t=n,Oi):Vs)(e,t)}function rc(e){return function(){this.removeAttribute(e)}}function ac(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lc(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===o?a:a=t(o=l,n)}}function sc(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?a:a=t(o=l,n)}}function cc(e,t,n){var o,i,a;return function(){var l,s=n(this),c;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),c=s+"",l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s)))}}function uc(e,t,n){var o,i,a;return function(){var l,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),c=s+"",l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s)))}}function dc(e,t){var n=$t(e),o=n==="transform"?Gs:Xi;return this.attrTween(e,typeof t=="function"?(n.local?uc:cc)(n,o,qn(this,"attr."+e,t)):t==null?(n.local?ac:rc)(n):(n.local?sc:lc)(n,o,t))}function fc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function hc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gc(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&hc(e,a)),n}return i._value=t,i}function mc(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&fc(e,a)),n}return i._value=t,i}function pc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=$t(e);return this.tween(n,(o.local?gc:mc)(o,t))}function yc(e,t){return function(){Wn(this,e).delay=+t.apply(this,arguments)}}function vc(e,t){return t=+t,function(){Wn(this,e).delay=t}}function wc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yc:vc)(t,e)):ge(this.node(),t).delay}function _c(e,t){return function(){ve(this,e).duration=+t.apply(this,arguments)}}function xc(e,t){return t=+t,function(){ve(this,e).duration=t}}function Ec(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_c:xc)(t,e)):ge(this.node(),t).duration}function bc(e,t){if(typeof t!="function")throw new Error;return function(){ve(this,e).ease=t}}function Sc(e){var t=this._id;return arguments.length?this.each(bc(t,e)):ge(this.node(),t).ease}function Nc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ve(this,e).ease=n}}function Cc(e){if(typeof e!="function")throw new Error;return this.each(Nc(this._id,e))}function kc(e){typeof e!="function"&&(e=Xo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],c,u=0;u<l;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new Ee(o,this._parents,this._name,this._id)}function Mc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),l=new Array(o),s=0;s<a;++s)for(var c=t[s],u=n[s],d=c.length,m=l[s]=new Array(d),p,E=0;E<d;++E)(p=c[E]||u[E])&&(m[E]=p);for(;s<o;++s)l[s]=t[s];return new Ee(l,this._parents,this._name,this._id)}function $c(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ic(e,t,n){var o,i,a=$c(t)?Wn:ve;return function(){var l=a(this,e),s=l.on;s!==o&&(i=(o=s).copy()).on(t,n),l.on=i}}function Rc(e,t){var n=this._id;return arguments.length<2?ge(this.node(),n).on.on(e):this.each(Ic(n,e,t))}function Oc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Tc(){return this.on("end.remove",Oc(this._id))}function Bc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mn(e));for(var o=this._groups,i=o.length,a=new Array(i),l=0;l<i;++l)for(var s=o[l],c=s.length,u=a[l]=new Array(c),d,m,p=0;p<c;++p)(d=s[p])&&(m=e.call(d,d.__data__,p,s))&&("__data__"in d&&(m.__data__=d.__data__),u[p]=m,Qt(u[p],t,n,p,u,ge(d,n)));return new Ee(a,this._parents,t,n)}function Pc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yo(e));for(var o=this._groups,i=o.length,a=[],l=[],s=0;s<i;++s)for(var c=o[s],u=c.length,d,m=0;m<u;++m)if(d=c[m]){for(var p=e.call(d,d.__data__,m,c),E,h=ge(d,n),f=0,x=p.length;f<x;++f)(E=p[f])&&Qt(E,t,n,f,p,h);a.push(p),l.push(d)}return new Ee(a,l,t,n)}var zc=Je.prototype.constructor;function Dc(){return new zc(this._groups,this._parents)}function Ac(e,t){var n,o,i;return function(){var a=Fe(this,e),l=(this.style.removeProperty(e),Fe(this,e));return a===l?null:a===n&&l===o?i:i=t(n=a,o=l)}}function Ui(e){return function(){this.style.removeProperty(e)}}function Vc(e,t,n){var o,i=n+"",a;return function(){var l=Fe(this,e);return l===i?null:l===o?a:a=t(o=l,n)}}function Hc(e,t,n){var o,i,a;return function(){var l=Fe(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Fe(this,e))),l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s))}}function Fc(e,t){var n,o,i,a="style."+t,l="end."+a,s;return function(){var c=ve(this,e),u=c.on,d=c.value[a]==null?s||(s=Ui(t)):void 0;(u!==n||i!==d)&&(o=(n=u).copy()).on(l,i=d),c.on=o}}function Lc(e,t,n){var o=(e+="")=="transform"?Ls:Xi;return t==null?this.styleTween(e,Ac(e,o)).on("end.style."+e,Ui(e)):typeof t=="function"?this.styleTween(e,Hc(e,o,qn(this,"style."+e,t))).each(Fc(this._id,e)):this.styleTween(e,Vc(e,o,t),n).on("end.style."+e,null)}function Gc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Yc(e,t,n){var o,i;function a(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&Gc(e,l,n)),o}return a._value=t,a}function Xc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Yc(e,t,n??""))}function Uc(e){return function(){this.textContent=e}}function Zc(e){return function(){var t=e(this);this.textContent=t??""}}function Kc(e){return this.tween("text",typeof e=="function"?Zc(qn(this,"text",e)):Uc(e==null?"":e+""))}function Wc(e){return function(t){this.textContent=e.call(this,t)}}function qc(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Wc(i)),t}return o._value=e,o}function jc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qc(e))}function Qc(){for(var e=this._name,t=this._id,n=Zi(),o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,c,u=0;u<s;++u)if(c=l[u]){var d=ge(c,t);Qt(c,e,n,u,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ee(o,this._parents,e,n)}function Jc(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,l){var s={value:l},c={value:function(){--i===0&&a()}};n.each(function(){var u=ve(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),u.on=t}),i===0&&a()})}var eu=0;function Ee(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Zi(){return++eu}var be=Je.prototype;Ee.prototype={constructor:Ee,select:Bc,selectAll:Pc,selectChild:be.selectChild,selectChildren:be.selectChildren,filter:kc,merge:Mc,selection:Dc,transition:Qc,call:be.call,nodes:be.nodes,node:be.node,size:be.size,empty:be.empty,each:be.each,on:Rc,attr:dc,attrTween:pc,style:Lc,styleTween:Xc,text:Kc,textTween:jc,remove:Tc,tween:ic,delay:wc,duration:Ec,ease:Sc,easeVarying:Cc,end:Jc,[Symbol.iterator]:be[Symbol.iterator]};function tu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var nu={time:null,delay:0,duration:250,ease:tu};function ou(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function iu(e){var t,n;e instanceof Ee?(t=e._id,e=e._name):(t=Zi(),(n=nu).time=Xn(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,c,u=0;u<s;++u)(c=l[u])&&Qt(c,e,t,u,l,n||ou(c,t));return new Ee(o,this._parents,e,t)}Je.prototype.interrupt=tc,Je.prototype.transition=iu;const en=e=>()=>e;function ru(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Se(e,t,n){this.k=e,this.x=t,this.y=n}Se.prototype={constructor:Se,scale:function(e){return e===1?this:new Se(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Se(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ue=new Se(1,0,0);Se.prototype;function jn(e){e.stopImmediatePropagation()}function dt(e){e.preventDefault(),e.stopImmediatePropagation()}function au(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function lu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ki(){return this.__zoom||Ue}function su(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function cu(){return navigator.maxTouchPoints||"ontouchstart"in this}function uu(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function du(){var e=au,t=lu,n=uu,o=su,i=cu,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Zs,u=kt("start","zoom","end"),d,m,p,E=500,h=150,f=0,x=10;function w(v){v.property("__zoom",Ki).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(v,H,k,O){var Z=v.selection?v.selection():v;Z.property("__zoom",Ki),v!==Z?C(v,H,k,O):Z.interrupt().each(function(){R(this,arguments).event(O).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},w.scaleBy=function(v,H,k,O){w.scaleTo(v,function(){var Z=this.__zoom.k,G=typeof H=="function"?H.apply(this,arguments):H;return Z*G},k,O)},w.scaleTo=function(v,H,k,O){w.transform(v,function(){var Z=t.apply(this,arguments),G=this.__zoom,T=k==null?_(Z):typeof k=="function"?k.apply(this,arguments):k,X=G.invert(T),q=typeof H=="function"?H.apply(this,arguments):H;return n(P(S(G,q),T,X),Z,l)},k,O)},w.translateBy=function(v,H,k,O){w.transform(v,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),l)},null,O)},w.translateTo=function(v,H,k,O,Z){w.transform(v,function(){var G=t.apply(this,arguments),T=this.__zoom,X=O==null?_(G):typeof O=="function"?O.apply(this,arguments):O;return n(Ue.translate(X[0],X[1]).scale(T.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof k=="function"?-k.apply(this,arguments):-k),G,l)},O,Z)};function S(v,H){return H=Math.max(a[0],Math.min(a[1],H)),H===v.k?v:new Se(H,v.x,v.y)}function P(v,H,k){var O=H[0]-k[0]*v.k,Z=H[1]-k[1]*v.k;return O===v.x&&Z===v.y?v:new Se(v.k,O,Z)}function _(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function C(v,H,k,O){v.on("start.zoom",function(){R(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(O).end()}).tween("zoom",function(){var Z=this,G=arguments,T=R(Z,G).event(O),X=t.apply(Z,G),q=k==null?_(X):typeof k=="function"?k.apply(Z,G):k,te=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),ne=Z.__zoom,z=typeof H=="function"?H.apply(Z,G):H,M=c(ne.invert(q).concat(te/ne.k),z.invert(q).concat(te/z.k));return function(F){if(F===1)F=z;else{var g=M(F),b=te/g[2];F=new Se(b,q[0]-g[0]*b,q[1]-g[1]*b)}T.zoom(null,F)}})}function R(v,H,k){return!k&&v.__zooming||new y(v,H)}function y(v,H){this.that=v,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,H),this.taps=0}y.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,H){return this.mouse&&v!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var H=fe(this.that).datum();u.call(v,this.that,new ru(v,{sourceEvent:this.sourceEvent,target:w,type:v,transform:this.that.__zoom,dispatch:u}),H)}};function L(v,...H){if(!e.apply(this,arguments))return;var k=R(this,H).event(v),O=this.__zoom,Z=Math.max(a[0],Math.min(a[1],O.k*Math.pow(2,o.apply(this,arguments)))),G=pe(v);if(k.wheel)(k.mouse[0][0]!==G[0]||k.mouse[0][1]!==G[1])&&(k.mouse[1]=O.invert(k.mouse[0]=G)),clearTimeout(k.wheel);else{if(O.k===Z)return;k.mouse=[G,O.invert(G)],Jt(this),k.start()}dt(v),k.wheel=setTimeout(T,h),k.zoom("mouse",n(P(S(O,Z),k.mouse[0],k.mouse[1]),k.extent,l));function T(){k.wheel=null,k.end()}}function D(v,...H){if(p||!e.apply(this,arguments))return;var k=v.currentTarget,O=R(this,H,!0).event(v),Z=fe(v.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",te,!0),G=pe(v,k),T=v.clientX,X=v.clientY;ti(v.view),jn(v),O.mouse=[G,this.__zoom.invert(G)],Jt(this),O.start();function q(ne){if(dt(ne),!O.moved){var z=ne.clientX-T,M=ne.clientY-X;O.moved=z*z+M*M>f}O.event(ne).zoom("mouse",n(P(O.that.__zoom,O.mouse[0]=pe(ne,k),O.mouse[1]),O.extent,l))}function te(ne){Z.on("mousemove.zoom mouseup.zoom",null),ni(ne.view,O.moved),dt(ne),O.event(ne).end()}}function $(v,...H){if(e.apply(this,arguments)){var k=this.__zoom,O=pe(v.changedTouches?v.changedTouches[0]:v,this),Z=k.invert(O),G=k.k*(v.shiftKey?.5:2),T=n(P(S(k,G),O,Z),t.apply(this,H),l);dt(v),s>0?fe(this).transition().duration(s).call(C,T,O,v):fe(this).call(w.transform,T,O,v)}}function V(v,...H){if(e.apply(this,arguments)){var k=v.touches,O=k.length,Z=R(this,H,v.changedTouches.length===O).event(v),G,T,X,q;for(jn(v),T=0;T<O;++T)X=k[T],q=pe(X,this),q=[q,this.__zoom.invert(q),X.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==q[2]&&(Z.touch1=q,Z.taps=0):(Z.touch0=q,G=!0,Z.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(Z.taps<2&&(m=q[0],d=setTimeout(function(){d=null},E)),Jt(this),Z.start())}}function ee(v,...H){if(this.__zooming){var k=R(this,H).event(v),O=v.changedTouches,Z=O.length,G,T,X,q;for(dt(v),G=0;G<Z;++G)T=O[G],X=pe(T,this),k.touch0&&k.touch0[2]===T.identifier?k.touch0[0]=X:k.touch1&&k.touch1[2]===T.identifier&&(k.touch1[0]=X);if(T=k.that.__zoom,k.touch1){var te=k.touch0[0],ne=k.touch0[1],z=k.touch1[0],M=k.touch1[1],F=(F=z[0]-te[0])*F+(F=z[1]-te[1])*F,g=(g=M[0]-ne[0])*g+(g=M[1]-ne[1])*g;T=S(T,Math.sqrt(F/g)),X=[(te[0]+z[0])/2,(te[1]+z[1])/2],q=[(ne[0]+M[0])/2,(ne[1]+M[1])/2]}else if(k.touch0)X=k.touch0[0],q=k.touch0[1];else return;k.zoom("touch",n(P(T,X,q),k.extent,l))}}function W(v,...H){if(this.__zooming){var k=R(this,H).event(v),O=v.changedTouches,Z=O.length,G,T;for(jn(v),p&&clearTimeout(p),p=setTimeout(function(){p=null},E),G=0;G<Z;++G)T=O[G],k.touch0&&k.touch0[2]===T.identifier?delete k.touch0:k.touch1&&k.touch1[2]===T.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(T=pe(T,this),Math.hypot(m[0]-T[0],m[1]-T[1])<x)){var X=fe(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return w.wheelDelta=function(v){return arguments.length?(o=typeof v=="function"?v:en(+v),w):o},w.filter=function(v){return arguments.length?(e=typeof v=="function"?v:en(!!v),w):e},w.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:en(!!v),w):i},w.extent=function(v){return arguments.length?(t=typeof v=="function"?v:en([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),w):t},w.scaleExtent=function(v){return arguments.length?(a[0]=+v[0],a[1]=+v[1],w):[a[0],a[1]]},w.translateExtent=function(v){return arguments.length?(l[0][0]=+v[0][0],l[1][0]=+v[1][0],l[0][1]=+v[0][1],l[1][1]=+v[1][1],w):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},w.constrain=function(v){return arguments.length?(n=v,w):n},w.duration=function(v){return arguments.length?(s=+v,w):s},w.interpolate=function(v){return arguments.length?(c=v,w):c},w.on=function(){var v=u.on.apply(u,arguments);return v===u?w:v},w.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,w):Math.sqrt(f)},w.tapDistance=function(v){return arguments.length?(x=+v,w):x},w}const Qn=.1;function ze(){}const fu={zoomIn:ze,zoomOut:ze,zoomTo:ze,fitView:ze,setCenter:ze,fitBounds:ze,project:e=>e,setTransform:ze,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1},hu=(e,t)=>{const n=e,o=r.toRef(n,"nodes"),i=r.toRef(n,"d3Zoom"),a=r.toRef(n,"d3Selection"),l=r.toRef(n,"dimensions"),s=r.toRef(n,"translateExtent"),c=r.toRef(n,"minZoom"),u=r.toRef(n,"maxZoom"),d=r.toRef(n,"viewport"),m=r.toRef(n,"snapToGrid"),p=r.toRef(n,"snapGrid"),E=r.toRef(n,"hooks"),h=t,f=r.toRef(h,"getNodes"),x=r.ref(!1);E.value.nodesInitialized.on(()=>{x.value=!0});const w=r.computed(()=>!!i.value&&!!a.value&&!!l.value.width&&!!l.value.height&&x.value);function S(_,C){a.value&&i.value&&i.value.scaleBy(Jn(a.value,C),_)}function P(_,C,R,y){const{x:L,y:D}=hn({x:-_,y:-C},s.value),$=Ue.translate(-L,-D).scale(R);a.value&&i.value&&i.value.transform(Jn(a.value,y),$)}return r.computed(()=>w.value?{initialized:!0,zoomIn:_=>{S(1.2,_==null?void 0:_.duration)},zoomOut:_=>{S(1/1.2,_==null?void 0:_.duration)},zoomTo:(_,C)=>{a.value&&i.value&&i.value.scaleTo(Jn(a.value,C==null?void 0:C.duration),_)},setTransform:(_,C)=>{P(_.x,_.y,_.zoom,C==null?void 0:C.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:(_={padding:Qn,includeHiddenNodes:!1,duration:0})=>{if(!o.value.length)return;const C=(_.includeHiddenNodes?o.value:f.value).filter($=>{var W;const V=$.initialized&&$.dimensions.width&&$.dimensions.height;let ee=!0;return(W=_.nodes)!=null&&W.length&&(ee=_.nodes.includes($.id)),V&&ee}),R=vt(C),{x:y,y:L,zoom:D}=qe(R,l.value.width,l.value.height,_.minZoom??c.value,_.maxZoom??u.value,_.padding??Qn,_.offset);P(y,L,D,_==null?void 0:_.duration)},setCenter:(_,C,R)=>{const y=typeof(R==null?void 0:R.zoom)<"u"?R.zoom:u.value,L=l.value.width/2-_*y,D=l.value.height/2-C*y;P(L,D,y,R==null?void 0:R.duration)},fitBounds:(_,C={padding:Qn})=>{const{x:R,y,zoom:L}=qe(_,l.value.width,l.value.height,c.value,u.value,C.padding);P(R,y,L,C==null?void 0:C.duration)},project:_=>yn(_,d.value,m.value,p.value)}:fu)};function Jn(e,t=0){return e.transition().duration(t)}function eo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(we(t.style)?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(Ce(i.width)){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(Ce(i.height)){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,Ce(i.width)){const l=Number(i.width.replace("px",""));i.width=`${l+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,Ce(i.height)){const l=Number(i.height.replace("px",""));i.height=`${l+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),we(t.style)?t.style=a=>{const l=t.style;return{...l(a),...i}}:t.style={...t.style,...i}}}}function ft(e,t){e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{if(i.type==="add")t.findIndex(l=>l.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const a=t.findIndex(l=>l.id===i.id);a!==-1&&t.splice(a,1)}});const o=t.map(i=>i.id);return t.forEach(i=>{var l,s;const a=e.filter(c=>c.id===i.id);for(const c of a)switch(c.type){case"select":i.selected=c.selected;break;case"position":if(xe(i)&&(typeof c.position<"u"&&(i.position=c.position),typeof c.dragging<"u"&&(i.dragging=c.dragging),i.expandParent&&i.parentNode)){const u=t[o.indexOf(i.parentNode)];u&&xe(u)&&eo(i,u)}break;case"dimensions":if(xe(i)){if(typeof c.dimensions<"u"&&(i.dimensions=c.dimensions),typeof c.updateStyle<"u"&&(i.style={...i.style||{},width:`${(l=c.dimensions)==null?void 0:l.width}px`,height:`${(s=c.dimensions)==null?void 0:s.height}px`}),typeof c.resizing<"u"&&(i.resizing=c.resizing),i.expandParent&&i.parentNode){const u=t[o.indexOf(i.parentNode)];u&&xe(u)&&(u.initialized?eo(i,u):r.nextTick(()=>{eo(i,u)}))}i.initialized||(i.initialized=!0)}break}}),t}function gu(e,t){return ft(e,t)}function mu(e,t){return ft(e,t)}function Ne(e,t){return{id:e,type:"select",selected:t}}function Wi(e){return{item:e,type:"add"}}function to(e){return{id:e,type:"remove"}}function no(e,t){return e.reduce((n,o)=>{let i=t.includes(o.id);re(o.selectable)&&!o.selectable&&(i=!1);const a=xe(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[a].push(Ne(o.id,!0)):o.selected&&!i&&n[a].push(Ne(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function pu(e,t){let n=!1;const o=hu(e,t);ce(()=>o.value.initialized).toBe(!0).then(()=>{});const i=r.computed(()=>e.nodes.map(g=>g.id)),a=r.computed(()=>e.edges.map(g=>g.id)),l=g=>{const b=g??i.value??[];e.hooks.updateNodeInternals.trigger(b)},s=g=>e.nodes&&!i.value.length?e.nodes.find(b=>b.id===g):e.nodes[i.value.indexOf(g)],c=g=>e.edges&&!a.value.length?e.edges.find(b=>b.id===g):e.edges[a.value.indexOf(g)],u=(g,b,B)=>{const I=[];g.forEach(A=>{var N,Q;const U={id:A.id,type:"position",dragging:B,from:A.from};if(b&&(U.position=A.position,A.parentNode)){const J=s(A.parentNode);U.position={x:U.position.x-(((N=J==null?void 0:J.computedPosition)==null?void 0:N.x)??0),y:U.position.y-(((Q=J==null?void 0:J.computedPosition)==null?void 0:Q.y)??0)}}I.push(U)}),I!=null&&I.length&&e.hooks.nodesChange.trigger(I)},d=g=>{var A;if(!e.vueFlowRef)return;const b=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!b)return;let B;if((A=e.__experimentalFeatures)!=null&&A.nestedFlow){let U=[b],N=b,Q;for(;!Q&&N;)N=N.parentElement,Q=N==null?void 0:N.classList.contains("vue-flow__transformationpane"),Q&&(U=[N,...U]);U.forEach(J=>{const oe=window.getComputedStyle(J),{m22:se}=new window.DOMMatrixReadOnly(oe.transform);B?B*=se:B=se})}else{const U=window.getComputedStyle(b),{m22:N}=new window.DOMMatrixReadOnly(U.transform);B=N}const I=g.reduce((U,N)=>{const Q=s(N.id);if(Q){const J=gt(N.nodeElement);!!(J.width&&J.height&&(Q.dimensions.width!==J.width||Q.dimensions.height!==J.height||N.forceUpdate))&&(Q.handleBounds.source=Ho(".source",N.nodeElement,B),Q.handleBounds.target=Ho(".target",N.nodeElement,B),Q.dimensions=J,Q.initialized=!0,U.push({id:Q.id,type:"dimensions",dimensions:J}))}return U},[]);e.fitViewOnInit&&!n&&(ce(()=>o.value.initialized).toBe(!0).then(()=>{o.value.fitView()}),n=!0),I.length&&e.hooks.nodesChange.trigger(I)},m=(g,b)=>{const B=g.map(U=>U.id);let I,A=[];if(e.multiSelectionActive)I=B.map(U=>Ne(U,b));else{const U=no([...e.nodes,...e.edges],B);I=U.changedNodes,A=U.changedEdges}I.length&&e.hooks.nodesChange.trigger(I),A.length&&e.hooks.edgesChange.trigger(A)},p=(g,b)=>{const B=g.map(U=>U.id);let I=[],A;if(e.multiSelectionActive)A=B.map(U=>Ne(U,b));else{const U=no([...e.nodes,...e.edges],B);I=U.changedNodes,A=U.changedEdges}I.length&&e.hooks.nodesChange.trigger(I),A.length&&e.hooks.edgesChange.trigger(A)},E=(g,b)=>{const B=g.filter(xe),I=g.filter(gn),A=B.map(J=>J.id),U=I.map(J=>J.id);let{changedNodes:N,changedEdges:Q}=no([...e.nodes,...e.edges],[...A,...U]);e.multiSelectionActive&&(N=A.map(J=>Ne(J,b))),e.multiSelectionActive&&(Q=U.map(J=>Ne(J,b))),N.length&&e.hooks.nodesChange.trigger(N),Q.length&&e.hooks.edgesChange.trigger(Q)},h=g=>{m(g,!0)},f=g=>{p(g,!0)},x=g=>{E(g,!0)},w=g=>{if(!g.length)return m(g,!1);const B=g.map(I=>I.id).map(I=>Ne(I,!1));B.length&&e.hooks.nodesChange.trigger(B)},S=g=>{if(!g.length)return p(g,!1);const B=g.map(I=>I.id).map(I=>Ne(I,!1));B.length&&e.hooks.edgesChange.trigger(B)},P=g=>{if(!g||!g.length)return E([],!1);const{changedNodes:b,changedEdges:B}=g.reduce((I,A)=>{const U=Ne(A.id,!1);return xe(A)?I.changedNodes.push(U):I.changedEdges.push(U),I},{changedNodes:[],changedEdges:[]});b.length&&e.hooks.nodesChange.trigger(b),B.length&&e.hooks.edgesChange.trigger(B)},_=g=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([g,e.maxZoom]),e.minZoom=g},C=g=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([e.minZoom,g]),e.maxZoom=g},R=g=>{var b;(b=e.d3Zoom)==null||b.translateExtent(g),e.translateExtent=g},y=async g=>{e.nodeExtent=g;const b=t.getNodes.value.filter(B=>B.initialized).map(B=>B.id);l(b)},L=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},D=g=>{const b=g instanceof Function?g(e.nodes):g;!e.initialized&&!b.length||(e.nodes=No(b,e.nodes,s,e.hooks.error.trigger))},$=g=>{const b=g instanceof Function?g(e.edges):g;if(!e.initialized&&!b.length)return;const B=e.isValidConnection?b.filter(I=>e.isValidConnection(I,{edges:e.edges,sourceNode:s(I.source),targetNode:s(I.target)})):b;e.edges=B.reduce((I,A)=>{const U=s(A.source),N=s(A.target),Q=!U||typeof U>"u",J=!N||typeof N>"u";if(Q&&J?e.hooks.error.trigger(new le(ae.EDGE_SOURCE_TARGET_MISSING,A.id,A.source,A.target)):(Q&&e.hooks.error.trigger(new le(ae.EDGE_SOURCE_MISSING,A.id,A.source)),J&&e.hooks.error.trigger(new le(ae.EDGE_TARGET_MISSING,A.id,A.target))),Q||J)return I;const oe=t.getEdge.value(A.id);return I.push({...mn(A,Object.assign({},oe,e.defaultEdgeOptions)),sourceNode:U,targetNode:N}),I},[])},V=g=>{const b=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!b.length||(D(b.filter(mt)),$(b.filter(me)))},ee=g=>{const b=g instanceof Function?g(e.nodes):g,I=No(b,e.nodes,s,e.hooks.error.trigger).map(Wi);I.length&&e.hooks.nodesChange.trigger(I)},W=g=>{const b=g instanceof Function?g(e.edges):g,I=(e.isValidConnection?b.filter(A=>e.isValidConnection(A,{edges:e.edges,sourceNode:s(A.source),targetNode:s(A.target)})):b).reduce((A,U)=>{const N=Ar({...U,...e.defaultEdgeOptions},e.edges,e.hooks.error.trigger);if(N){const Q=s(N.source),J=s(N.target),oe=!Q||typeof Q>"u",se=!J||typeof J>"u";if(oe&&se?e.hooks.error.trigger(new le(ae.EDGE_SOURCE_TARGET_MISSING,N.id,N.source,N.target)):(oe&&e.hooks.error.trigger(new le(ae.EDGE_SOURCE_MISSING,N.id,N.source)),se&&e.hooks.error.trigger(new le(ae.EDGE_TARGET_MISSING,N.id,N.target))),oe||se)return A;A.push(Wi({...N,sourceNode:Q,targetNode:J}))}return A},[]);I.length&&e.hooks.edgesChange.trigger(I)},v=(g,b=!0)=>{const B=g instanceof Function?g(e.nodes):g,I=[],A=[];B.forEach(U=>{const N=typeof U=="string"?s(U):U;if(!(re(N.deletable)&&!N.deletable)&&(I.push(to(N.id)),b)){const Q=We([N],e.edges).filter(J=>re(J.deletable)?J.deletable:!0);A.push(...Q.map(J=>to(J.id)))}}),A.length&&e.hooks.edgesChange.trigger(A),I.length&&e.hooks.nodesChange.trigger(I)},H=g=>{const b=g instanceof Function?g(e.edges):g,B=[];b.forEach(I=>{const A=typeof I=="string"?c(I):I;re(A.deletable)&&!A.deletable||B.push(to(typeof I=="string"?I:I.id))}),e.hooks.edgesChange.trigger(B)},k=(g,b,B=!0)=>Vr(g,b,e.edges,c,B,e.hooks.error.trigger),O=g=>ft(g,e.nodes),Z=g=>ft(g,e.edges),G=(g,b,B,I=!1)=>{I?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,b&&(e.connectionPosition=b)},T=(g,b=null,B=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=b,e.connectionStatus=B)},X=(g,b)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStatus=null,b?e.connectionClickStartHandle=null:e.connectionStartHandle=null},q=g=>{const b=Mr(g),B=b?null:s(g.id);return!b&&!B?[null,null,b]:[b?g:wo(B),B,b]},te=(g,b=!0,B)=>{const[I,A,U]=q(g);return I?(B||e.nodes).filter(N=>{if(!U&&(N.id===A.id||!N.computedPosition))return!1;const Q=wo(N),J=fn(Q,I);return b&&J>0||J>=Number(g.width)*Number(g.height)}):[]},ne=(g,b,B=!0)=>{const[I]=q(g);if(!I)return!1;const A=fn(I,b);return B&&A>0||A>=Number(g.width)*Number(g.height)},z=g=>{const{viewport:b,dimensions:B,d3Zoom:I,d3Selection:A,translateExtent:U}=e;if(!I||!A||!g.x&&!g.y)return;const N=Ue.translate(b.x+g.x,b.y+g.y).scale(b.zoom),Q=[[0,0],[B.width,B.height]],J=I.constrain()(N,Q,U);I.transform(A,J)},M=g=>{const b=g instanceof Function?g(e):g,B=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"],I=b.modelValue||b.nodes||b.edges?[]:void 0;I&&(b.modelValue&&I.push(...b.modelValue),b.nodes&&I.push(...b.nodes),b.edges&&I.push(...b.edges),V(I));const A=()=>{typeof b.maxZoom<"u"&&C(b.maxZoom),typeof b.minZoom<"u"&&_(b.minZoom),typeof b.translateExtent<"u"&&R(b.translateExtent),typeof b.nodeExtent<"u"&&y(b.nodeExtent)};Object.keys(b).forEach(U=>{const N=b[U];!B.includes(U)&&re(N)&&(e[U]=N)}),e.d3Zoom?A():ce(()=>e.d3Zoom).not.toBeUndefined().then(A),e.initialized||(e.initialized=!0)};return{updateNodePositions:u,updateNodeDimensions:d,setElements:V,setNodes:D,setEdges:$,addNodes:ee,addEdges:W,removeNodes:v,removeEdges:H,findNode:s,findEdge:c,updateEdge:k,applyEdgeChanges:Z,applyNodeChanges:O,addSelectedElements:x,addSelectedNodes:h,addSelectedEdges:f,setMinZoom:_,setMaxZoom:C,setTranslateExtent:R,setNodeExtent:y,removeSelectedElements:P,removeSelectedNodes:w,removeSelectedEdges:S,startConnection:G,updateConnection:T,endConnection:X,setInteractive:L,setState:M,getIntersectingNodes:te,isNodeIntersecting:ne,panBy:z,fitView:async(g={padding:.1})=>{await ce(()=>o.value.initialized).toBe(!0),o.value.fitView(g)},zoomIn:async g=>{await ce(()=>o.value.initialized).toBe(!0),o.value.zoomIn(g)},zoomOut:async g=>{await ce(()=>o.value.initialized).toBe(!0),o.value.zoomOut(g)},zoomTo:async(g,b)=>{await ce(()=>o.value.initialized).toBe(!0),o.value.zoomTo(g,b)},setTransform:async(g,b)=>{await ce(()=>o.value.initialized).toBe(!0),o.value.setTransform(g,b)},getTransform:()=>o.value.getTransform(),setCenter:async(g,b,B)=>{await ce(()=>o.value.initialized).toBe(!0),o.value.setCenter(g,b,B)},fitBounds:async(g,b)=>{await ce(()=>o.value.initialized).toBe(!0),o.value.fitBounds(g,b)},project:g=>o.value.project(g),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map(g=>{const{computedPosition:b,handleBounds:B,selected:I,dimensions:A,isParent:U,resizing:N,dragging:Q,initialized:J,...oe}=g;return oe}),edges:e.edges.map(g=>{const{selected:b,sourceNode:B,targetNode:I,...A}=g;return A}),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:l,$reset:()=>{e.edges=[],e.nodes=[],M(wi())},$destroy:()=>{}}}class De{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return De.instance||(De.instance=new De),De.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=wi(n),i=r.reactive(o),a=xs(i),l=pu(i,a),s={};Object.entries(i.hooks).forEach(([d,m])=>{const p=`on${d.charAt(0).toUpperCase()+d.slice(1)}`;s[p]=m.on});const c={};Object.entries(i.hooks).forEach(([d,m])=>{c[d]=m.trigger}),l.setState(i);const u={...s,...a,...l,...r.toRefs(i),emits:c,id:t,$destroy:()=>{this.remove(t)}};return this.set(t,u),u}getId(){return`vue-flow-${this.currentId++}`}}const ie=e=>{const t=De.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,l=!1;if(n){const s=r.inject(wn,null);typeof s<"u"&&s!==null&&(a=s)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const s=o??t.getId();a=t.create(s,e),n&&(l=!0)}else e&&a.setState(e);return n&&(r.provide(wn,a),n.vueFlowId=a.id,l&&Ae(()=>{if(a){const s=t.get(a.id);s?s.$destroy():Ke(`No store instance found for id ${a.id} in storage.`)}})),a};function yu(e,t,n){const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let h,f,x=!!(n.nodes.value.length||n.edges.value.length);h=Ve([e.modelValue,()=>{var w,S;return(S=(w=e.modelValue)==null?void 0:w.value)==null?void 0:S.length}],([w])=>{w&&Array.isArray(w)&&(f==null||f.pause(),n.setElements(w),!f&&!x&&w.length?x=!0:f==null||f.resume())}),f=Ve([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([w,S])=>{var P;(P=e.modelValue)!=null&&P.value&&Array.isArray(e.modelValue.value)&&(h==null||h.pause(),e.modelValue.value=[...w,...S],r.nextTick(()=>{h==null||h.resume()}))},{immediate:x}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,x=!!n.nodes.value.length;h=Ve([e.nodes,()=>{var w,S;return(S=(w=e.nodes)==null?void 0:w.value)==null?void 0:S.length}],([w])=>{w&&Array.isArray(w)&&(f==null||f.pause(),n.setNodes(w),!f&&!x&&w.length?x=!0:f==null||f.resume())}),f=Ve([n.nodes,()=>n.nodes.value.length],([w])=>{var S;(S=e.nodes)!=null&&S.value&&Array.isArray(e.nodes.value)&&(h==null||h.pause(),e.nodes.value=[...w],r.nextTick(()=>{h==null||h.resume()}))},{immediate:x}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,x=!!n.edges.value.length;h=Ve([e.edges,()=>{var w,S;return(S=(w=e.edges)==null?void 0:w.value)==null?void 0:S.length}],([w])=>{w&&Array.isArray(w)&&(f==null||f.pause(),n.setEdges(w),!f&&!x&&w.length?x=!0:f==null||f.resume())}),f=Ve([n.edges,()=>n.edges.value.length],([w])=>{var S;(S=e.edges)!=null&&S.value&&Array.isArray(e.edges.value)&&(h==null||h.pause(),e.edges.value=[...w],r.nextTick(()=>{h==null||h.resume()}))},{immediate:x}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&re(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&re(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&re(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&re(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{re(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),r.watch(n.applyDefault,(h,f,x)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),x(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const h=async f=>{let x=f;we(t.autoConnect)&&(x=await t.autoConnect(f)),x!==!1&&n.addEdges([x])};r.watch(()=>t.autoConnect,()=>{re(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),r.watch(n.autoConnect,(f,x,w)=>{f?n.onConnect(h):n.hooks.value.connect.off(h),w(()=>{n.hooks.value.connect.off(h)})},{immediate:!0})})},()=>{const h=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(f=>{if(!h.includes(f)){const x=r.toRef(t,f),w=n[f];o.run(()=>{r.watch(x,S=>{re(S)&&(w.value=S)},{flush:"pre"})})}})}].forEach(h=>h())}),()=>o.stop()}function qi(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const vu={name:"Pane",compatConfig:{MODE:3}},wu=r.defineComponent({...vu,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:a,emits:l,userSelectionActive:s,removeSelectedElements:c,panOnDrag:u,userSelectionRect:d,elementsSelectable:m,nodesSelectionActive:p,addSelectedElements:E,getSelectedEdges:h,getSelectedNodes:f,removeNodes:x,removeEdges:w,selectionMode:S,deleteKeyCode:P,multiSelectionKeyCode:_,multiSelectionActive:C}=ie(),R=r.ref(null),y=r.ref(0),L=r.ref(0),D=r.ref(),$=r.computed(()=>m.value&&(e.isSelecting||s.value));tt(P,T=>{if(!T)return;const X=o.value.reduce((q,te)=>((!te.selected&&te.parentNode&&q.find(ne=>ne.id===te.parentNode)||te.selected)&&q.push(te),q),[]);(X||h.value)&&(h.value.length>0&&w(h.value),X.length>0&&x(X),p.value=!1,c())}),tt(_,T=>{C.value=T});function V(){s.value=!1,d.value=null,y.value=0,L.value=0}function ee(T){T.target!==R.value||$.value||(l.paneClick(T),c(),p.value=!1)}function W(T){var X;if(T.target===R.value){if(Array.isArray(u.value)&&((X=u.value)!=null&&X.includes(2))){T.preventDefault();return}l.paneContextMenu(T)}}function v(T){T.target===R.value&&l.paneScroll(T)}function H(T){if(D.value=n.value.getBoundingClientRect(),!$.value||!m||!e.isSelecting||T.button!==0||T.target!==R.value||!D.value)return;const{x:X,y:q}=qi(T,D.value);c(),d.value={width:0,height:0,startX:X,startY:q,x:X,y:q},s.value=!0,l.selectionStart(T)}function k(T){if(!e.isSelecting||!D.value||!d.value)return;if(!$.value)return l.paneMouseMove(T);s.value||(s.value=!0),p.value&&(p.value=!1);const X=qi(T,D.value),q=d.value.startX??0,te=d.value.startY??0,ne={...d.value,x:X.x<q?X.x:q,y:X.y<te?X.y:te,width:Math.abs(X.x-q),height:Math.abs(X.y-te)},z=vn(o.value,d.value,a.value,S.value===wt.Partial),M=We(z,i.value);y.value=z.length,L.value=M.length,d.value=ne,E([...z,...M])}function O(T){$.value&&T.button===0&&(!s.value&&d.value&&T.target===R.value&&ee(T),p.value=y.value>0,V(),l.selectionEnd(T))}function Z(T){var X;if(!$.value)return l.paneMouseLeave(T);s.value&&(p.value=y.value>0,(X=l.selectionEnd)==null||X.call(l,T)),V()}function G(T){$.value||l.paneMouseEnter(T)}return(T,X)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"container",ref:R,key:`pane-${r.unref(t)}`,class:r.normalizeClass(["vue-flow__pane vue-flow__container",[{selection:e.isSelecting}]]),onClick:ee,onContextmenu:W,onWheelPassive:v,onMouseenter:G,onMousedown:H,onMousemove:k,onMouseup:O,onMouseleave:Z},[r.renderSlot(T.$slots,"default"),r.unref(s)&&r.unref(d)?(r.openBlock(),r.createBlock(ws,{key:0})):r.createCommentVNode("",!0),r.unref(p)&&r.unref(f).length?(r.openBlock(),r.createBlock(ys,{key:1})):r.createCommentVNode("",!0)],34))}}),_u={class:"vue-flow__nodes vue-flow__container"},xu={name:"Nodes",compatConfig:{MODE:3}},Eu=r.defineComponent({...xu,setup(e){const t=r.inject(xt),n=ie(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesFocusable"),a=r.toRef(n,"elementsSelectable"),l=r.toRef(n,"nodesConnectable"),s=r.toRef(n,"getNodes"),c=r.toRef(n,"getNodesInitialized"),u=r.toRef(n,"getNodeTypes"),d=r.toRef(n,"updateNodeDimensions"),m=r.toRef(n,"emits");let p=r.ref();ce(()=>s.value.length>0&&c.value.length===s.value.length).toBe(!0).then(()=>{r.nextTick(()=>{m.value.nodesInitialized(c.value)})}),r.onMounted(()=>{p.value=new ResizeObserver(S=>{const P=S.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));d.value(P)})}),r.onBeforeUnmount(()=>{var S;return(S=p.value)==null?void 0:S.disconnect()});function E(S){return typeof S>"u"?o.value:S}function h(S){return typeof S>"u"?a.value:S}function f(S){return typeof S>"u"?l.value:S}function x(S){return typeof S>"u"?i.value:S}function w(S,P){const _=S||"default";let C=P??u.value[_];const R=r.getCurrentInstance();if(typeof C=="string"&&R){const L=Object.keys(R.appContext.components);L&&L.includes(_)&&(C=r.resolveComponent(_,!1))}if(typeof C!="string")return C;const y=t==null?void 0:t[`node-${_}`];return y||(m.value.error(new le(ae.NODE_TYPE_MISSING,C)),!1)}return(S,P)=>(r.openBlock(),r.createElementBlock("div",_u,[r.unref(p)?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(r.unref(s),_=>(r.openBlock(),r.createBlock(r.unref(Wl),{id:_.id,key:_.id,"resize-observer":r.unref(p),type:w(_.type,_.template),name:_.type||"default",draggable:E(_.draggable),selectable:h(_.selectable),connectable:f(_.connectable),focusable:x(_.focusable),node:_},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):r.createCommentVNode("",!0)]))}}),bu=["id","markerWidth","markerHeight","markerUnits","orient"],Su=["stroke","stroke-width","fill"],Nu=["stroke","stroke-width"],Cu={name:"MarkerType",compatConfig:{MODE:3}},ku=r.defineComponent({...Cu,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===r.unref(_t).ArrowClosed?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,Su)):r.createCommentVNode("",!0),e.type===r.unref(_t).Arrow?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Nu)):r.createCommentVNode("",!0)],8,bu))}}),Mu={name:"MarkerDefinitions",compatConfig:{MODE:3}},$u=r.defineComponent({...Mu,setup(e){const t=ie(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"connectionLineOptions"),a=r.toRef(t,"defaultMarkerColor"),l=r.computed(()=>{const s=[],c=[],u=d=>{if(d){const m=ke(d,n.value);s.includes(m)||(typeof d=="object"?c.push({...d,id:m,color:d.color||a.value}):c.push({id:m,color:a.value,type:d}),s.push(m))}};return[i.value.markerEnd,i.value.markerStart].forEach(u),o.value.reduce((d,m)=>([m.markerStart,m.markerEnd].forEach(u),d.sort((p,E)=>p.id.localeCompare(E.id))),c),c});return(s,c)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(l),u=>(r.openBlock(),r.createBlock(ku,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Iu={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ru={name:"Edges",compatConfig:{MODE:3}},Ou=r.defineComponent({...Ru,setup(e){const t=r.inject(xt),n=ie(),o=r.toRef(n,"connectionStartHandle"),i=r.toRef(n,"nodesConnectable"),a=r.toRef(n,"edgesUpdatable"),l=r.toRef(n,"edgesFocusable"),s=r.toRef(n,"elementsSelectable"),c=r.toRef(n,"getSelectedNodes"),u=r.toRef(n,"findNode"),d=r.toRef(n,"getEdges"),m=r.toRef(n,"getNodesInitialized"),p=r.toRef(n,"getEdgeTypes"),E=r.toRef(n,"elevateEdgesOnSelect"),h=r.toRef(n,"dimensions"),f=r.toRef(n,"emits"),x=on(()=>{var y;return(y=o.value)==null?void 0:y.nodeId},()=>{var y;return(y=o.value)!=null&&y.nodeId?u.value(o.value.nodeId):!1}),w=on(()=>{var y;return(y=o.value)==null?void 0:y.nodeId},()=>{var y,L;return!!(x.value&&(typeof x.value.connectable>"u"?i.value:x.value.connectable)&&((y=o.value)!=null&&y.nodeId)&&((L=o.value)!=null&&L.type))}),S=on([()=>d.value.map(y=>y.zIndex),()=>E.value?[c.value.length]:[0],()=>E.value?m.value.map(y=>y.computedPosition.z):[]],()=>Lr(d.value,u.value,E.value));function P(y){return typeof y>"u"?s.value:y}function _(y){return typeof y>"u"?a.value:y}function C(y){return typeof y>"u"?l.value:y}function R(y,L){const D=y||"default";let $=L??p.value[D];const V=r.getCurrentInstance();if(typeof $=="string"&&V){const W=Object.keys(V.appContext.components);W&&W.includes(D)&&($=r.resolveComponent(D,!1))}if($&&typeof $!="string")return $;const ee=t==null?void 0:t[`edge-${D}`];return ee||(f.value.error(new le(ae.EDGE_TYPE_MISSING,$)),!1)}return(y,L)=>r.unref(h).width&&r.unref(h).height?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(S),D=>(r.openBlock(),r.createElementBlock("svg",{key:D.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${D.level}`)},[D.isMaxLevel?(r.openBlock(),r.createBlock($u,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(D.edges,$=>(r.openBlock(),r.createBlock(r.unref(ls),{id:$.id,key:$.id,edge:$,type:R($.type,$.template),name:$.type||"default",selectable:P($.selectable),updatable:_($.updatable),focusable:C($.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"]))),128))])],4))),128)),r.unref(w)&&r.unref(x)?(r.openBlock(),r.createElementBlock("svg",Iu,[r.createVNode(gs,{"source-node":r.unref(x)},null,8,["source-node"])])):r.createCommentVNode("",!0)],64)):r.createCommentVNode("",!0)}}),Tu=r.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),Bu={name:"Transform",compatConfig:{MODE:3}},Pu=r.defineComponent({...Bu,setup(e){const{id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...s}=ie(),c=r.ref(!nn);return ce(()=>i.value&&a.value&&l.value.width>0&&l.value.height>0).toBeTruthy().then(()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...s}),setTimeout(()=>{c.value=!0},0)}),(u,d)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:r.unref(c)?void 0:0})},[r.createVNode(Ou),Tu,r.createVNode(Eu),r.renderSlot(u.$slots,"default")],4))}}),zu={name:"Viewport",compatConfig:{MODE:3}},Du=r.defineComponent({...zu,setup(e){const t=ie(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultViewport"),l=r.toRef(t,"translateExtent"),s=r.toRef(t,"dimensions"),c=r.toRef(t,"zoomActivationKeyCode"),u=r.toRef(t,"selectionKeyCode"),d=r.toRef(t,"panActivationKeyCode"),m=r.toRef(t,"panOnScroll"),p=r.toRef(t,"panOnScrollMode"),E=r.toRef(t,"panOnScrollSpeed"),h=r.toRef(t,"panOnDrag"),f=r.toRef(t,"zoomOnDoubleClick"),x=r.toRef(t,"zoomOnPinch"),w=r.toRef(t,"zoomOnScroll"),S=r.toRef(t,"preventScrolling"),P=r.toRef(t,"noWheelClassName"),_=r.toRef(t,"noPanClassName"),C=r.toRef(t,"setState"),R=r.toRef(t,"emits"),y=r.toRef(t,"connectionStartHandle"),L=r.toRef(t,"userSelectionActive"),D=r.toRef(t,"paneDragging"),$=r.ref();let V=r.ref(!1),ee=r.ref(!1),W=r.ref(!1),v=r.ref(0);const H=tt(d.value),k=r.computed(()=>!!y.value),O=r.computed(()=>!V.value&&h.value&&H.value),Z=r.computed(()=>u.value!==!0&&V.value||u.value===!0&&O.value!==!0);let G=r.ref({x:0,y:0,zoom:0});r.onMounted(()=>{_r($,te);const z=dn();ln(z,"resize",te)}),r.onMounted(()=>{const z=$.value,M=z.getBoundingClientRect(),F=du().scaleExtent([o.value,i.value]).translateExtent(l.value),g=fe(z).call(F),b=g.on("wheel.zoom"),B=Ue.translate(a.value.x??0,a.value.y??0).scale(Oe(a.value.zoom??1,o.value,i.value)),I=[[0,0],[M.width,M.height]],A=F.constrain()(B,I,l.value);F.transform(g,A),C.value({d3Zoom:F,d3Selection:g,d3ZoomHandler:b,viewport:{x:A.x,y:A.y,zoom:A.k},viewportRef:z}),tt(u.value,N=>{V.value=N});const U=tt(c.value);r.watchEffect(()=>{V.value&&L.value&&!ee.value?F.on("zoom",null):!V.value&&!L.value&&F.on("zoom",N=>{C.value({viewport:{x:N.transform.x,y:N.transform.y,zoom:N.transform.k}});const Q=q(N.transform);W.value=T(h.value,v.value??0),R.value.viewportChange(Q),R.value.move({event:N,flowTransform:Q})})}),F.on("start",N=>{var J;if(!N.sourceEvent)return null;v.value=N.sourceEvent.button,ee.value=!0;const Q=q(N.transform);((J=N.sourceEvent)==null?void 0:J.type)==="mousedown"&&C.value({paneDragging:!0}),G.value=Q,R.value.viewportChangeStart(Q),R.value.moveStart({event:N,flowTransform:Q})}),F.on("end",N=>{if(!N.sourceEvent)return null;if(ee.value=!1,C.value({paneDragging:!1}),T(h.value,v.value??0)&&!W.value&&R.value.paneContextMenu(N.sourceEvent),W.value=!1,X(G.value,N.transform)){const Q=q(N.transform);G.value=Q,R.value.viewportChangeEnd(Q),R.value.moveEnd({event:N,flowTransform:Q})}}),r.watchEffect(()=>{m.value&&!U.value&&!L.value?g.on("wheel.zoom",N=>{if(ne(N,P.value))return!1;N.preventDefault(),N.stopImmediatePropagation();const Q=g.property("__zoom").k||1;if(N.ctrlKey&&x.value){const tn=pe(N),Wu=-N.deltaY*(N.deltaMode===1?.05:N.deltaMode?1:.002)*10,qu=Q*2**Wu;F.scaleTo(g,qu,tn);return}const J=N.deltaMode===1?20:1,oe=p.value===je.Vertical?0:N.deltaX*J,se=p.value===je.Horizontal?0:N.deltaY*J;F.translateBy(g,-(oe/Q)*E.value,-(se/Q)*E.value)},{passive:!1}):typeof b<"u"&&g.on("wheel.zoom",function(N,Q){if(!S.value||ne(N,P.value))return null;N.preventDefault(),b.call(this,N,Q)},{passive:!1})}),F.filter(N=>{var se,tn;const Q=U.value||w.value,J=x.value&&N.ctrlKey;if(N.button===1&&N.type==="mousedown"&&((se=N.target)!=null&&se.closest(".vue-flow__node")||(tn=N.target)!=null&&tn.closest(".vue-flow__edge")))return!0;if(!h.value&&!Q&&!m.value&&!f.value&&!x.value||L.value||!f.value&&N.type==="dblclick"||ne(N,P.value)&&N.type==="wheel"||ne(N,_.value)&&N.type!=="wheel"||!x.value&&N.ctrlKey&&N.type==="wheel"||!Q&&!m.value&&!J&&N.type==="wheel"||!h.value&&(N.type==="mousedown"||N.type==="touchstart")||Array.isArray(h.value)&&!h.value.includes(N.button)&&(N.type==="mousedown"||N.type==="touchstart"))return!1;const oe=Array.isArray(h.value)&&h.value.includes(N.button)||!N.button||N.button<=1;return(!N.ctrlKey||N.type==="wheel")&&oe})});function T(z,M){return M===2&&Array.isArray(z)&&z.includes(2)}function X(z,M){return z.x!==M.x&&!isNaN(M.x)||z.y!==M.y&&!isNaN(M.y)||z.zoom!==M.k&&!isNaN(M.k)}function q(z){return{x:z.x,y:z.y,zoom:z.k}}function te(){if(!$.value)return;const{width:z,height:M}=gt($.value);(z===0||M===0)&&R.value.error(new le(ae.MISSING_VIEWPORT_DIMENSIONS)),s.value.width=z||500,s.value.height=M||500}function ne(z,M){return z.target.closest(`.${M}`)}return(z,M)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(),r.createElementBlock("div",{ref_key:"viewportEl",ref:$,key:`viewport-${r.unref(n)}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(wu,{"is-selecting":r.unref(Z),class:r.normalizeClass({connecting:r.unref(k),dragging:r.unref(D),draggable:!!r.unref(h)})},{default:r.withCtx(()=>[r.createVNode(Pu,null,{default:r.withCtx(()=>[r.renderSlot(z.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),r.renderSlot(z.$slots,"default")],64))}}),Au=["id"],Vu=["id"],Hu=["id"],Fu={name:"A11yDescriptions",compatConfig:{MODE:3}},Lu=r.defineComponent({...Fu,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=ie(),i={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(a,l)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("div",{id:`${r.unref(ii)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+r.toDisplayString(r.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Au),r.createElementVNode("div",{id:`${r.unref(ri)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Vu),r.unref(n)?r.createCommentVNode("",!0):(r.openBlock(),r.createElementBlock("div",{key:0,id:`${r.unref(Ul)}-${r.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:i},r.toDisplayString(r.unref(o)),9,Hu))],64))}}),Gu={name:"VueFlow",compatConfig:{MODE:3}},Yu=r.defineComponent({...Gu,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,panActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Ze(o,"modelValue",n),a=Ze(o,"nodes",n),l=Ze(o,"edges",n),{vueFlowRef:s,hooks:c,getNodeTypes:u,getEdgeTypes:d,...m}=ie(o),p=yu({modelValue:i,nodes:a,edges:l},o,{vueFlowRef:s,hooks:c,getNodeTypes:u,getEdgeTypes:d,...m});kr(n,c);const E=r.ref();return r.provide(xt,r.useSlots()),r.onUnmounted(()=>{p()}),r.onMounted(()=>{s.value=E.value}),t({vueFlowRef:s,hooks:c,getNodeTypes:u,getEdgeTypes:d,...m}),(h,f)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:E,class:"vue-flow"},[r.createVNode(Du,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(u)),x=>r.renderSlot(h.$slots,`node-${x}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(d)),x=>r.renderSlot(h.$slots,`edge-${x}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(h.$slots,"connection-line")]),"zoom-pane":r.withCtx(()=>[r.renderSlot(h.$slots,"zoom-pane")]),default:r.withCtx(()=>[r.renderSlot(h.$slots,"default")]),_:3}),r.createVNode(Lu)],512))}}),Xu={name:"Panel",compatConfig:{MODE:3}},Uu=r.defineComponent({...Xu,props:{position:null},setup(e){const t=e,{userSelectionActive:n}=ie(),o=r.computed(()=>`${t.position}`.split("-"));return(i,a)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__panel",r.unref(o)]),style:r.normalizeStyle({pointerEvents:r.unref(n)?"none":"all"})},[r.renderSlot(i.$slots,"default")],6))}}),oo=.1,Zu=e=>{const t=ie({id:e}),n=r.toRef(t,"nodes"),o=r.toRef(t,"d3Zoom"),i=r.toRef(t,"d3Selection"),a=r.toRef(t,"dimensions"),l=r.toRef(t,"translateExtent"),s=r.toRef(t,"minZoom"),c=r.toRef(t,"maxZoom"),u=r.toRef(t,"viewport"),d=r.toRef(t,"snapToGrid"),m=r.toRef(t,"snapGrid"),p=r.toRef(t,"getNodes");return{zoomIn:f=>{E(1.2,f==null?void 0:f.duration)},zoomOut:f=>{E(1/1.2,f==null?void 0:f.duration)},zoomTo:(f,x)=>{i.value&&o.value&&o.value.scaleTo(io(i.value,x==null?void 0:x.duration),f)},setTransform:(f,x)=>{h(f.x,f.y,f.zoom,x==null?void 0:x.duration)},getTransform:()=>({x:u.value.x,y:u.value.y,zoom:u.value.zoom}),fitView:(f={padding:oo,includeHiddenNodes:!1,duration:0})=>{if(!n.value.length)return;const x=(f.includeHiddenNodes?n.value:p.value).filter(C=>{var L;const R=C.initialized&&C.dimensions.width&&C.dimensions.height;let y=!0;return(L=f.nodes)!=null&&L.length&&(y=f.nodes.includes(C.id)),R&&y}),w=vt(x),{x:S,y:P,zoom:_}=qe(w,a.value.width,a.value.height,f.minZoom??s.value,f.maxZoom??c.value,f.padding??oo,f.offset);h(S,P,_,f==null?void 0:f.duration)},setCenter:(f,x,w)=>{const S=typeof(w==null?void 0:w.zoom)<"u"?w.zoom:c.value,P=a.value.width/2-f*S,_=a.value.height/2-x*S;h(P,_,S,w==null?void 0:w.duration)},fitBounds:(f,x={padding:oo})=>{const{x:w,y:S,zoom:P}=qe(f,a.value.width,a.value.height,s.value,c.value,x.padding);h(w,S,P,x==null?void 0:x.duration)},project:f=>yn(f,u.value,d.value,m.value)};function E(f,x){i.value&&o.value&&o.value.scaleBy(io(i.value,x),f)}function h(f,x,w,S){const{x:P,y:_}=hn({x:-f,y:-x},l.value),C=Ue.translate(-P,-_).scale(w);i.value&&o.value&&o.value.transform(io(i.value,S),C)}};function io(e,t=0){return e.transition().duration(t)}function Ku(e){const t=e??r.inject(Mo,""),n=r.inject($o,null),{findEdge:o,emits:i}=ie(),a=o(t);return a||i.error(new le(ae.EDGE_NOT_FOUND,t)),{id:t,edge:a,edgeEl:n}}return K.BaseEdge=nt,K.BezierEdge=ci,K.ConnectionLineType=Me,K.ConnectionMode=$e,K.EdgeLabelRenderer=us,K.EdgeText=li,K.ErrorCode=ae,K.GlobalVueFlowStorage=De,K.Handle=Qe,K.MarkerType=_t,K.NodeIdInjection=_n,K.PanOnScrollMode=je,K.Panel=Uu,K.PanelPosition=Co,K.Position=j,K.SelectionMode=wt,K.SimpleBezierEdge=di,K.SmoothStepEdge=zn,K.StepEdge=gi,K.StraightEdge=mi,K.VueFlow=Yu,K.VueFlowError=le,K.VueFlowInjection=wn,K.addEdge=Or,K.applyChanges=ft,K.applyEdgeChanges=gu,K.applyNodeChanges=mu,K.clamp=Oe,K.connectionExists=pn,K.defaultEdgeTypes=vi,K.defaultNodeTypes=yi,K.getBezierEdgeCenter=Bn,K.getBezierPath=Bt,K.getBoundsofRects=Pr,K.getConnectedEdges=We,K.getIncomers=Rr,K.getMarkerId=ke,K.getNodesInside=vn,K.getOutgoers=Ir,K.getRectOfNodes=vt,K.getSimpleBezierPath=Pn,K.getSimpleEdgeCenter=Tn,K.getSmoothStepPath=Dt,K.getStraightPath=Dn,K.getTransformForBounds=qe,K.graphPosToZoomedPos=zr,K.isEdge=me,K.isGraphEdge=gn,K.isGraphNode=xe,K.isNode=mt,K.updateEdge=Tr,K.useEdge=Ku,K.useGetPointerPosition=Vo,K.useHandle=bn,K.useNode=Io,K.useVueFlow=ie,K.useZoomPanHelper=Zu,Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),K}({},Vue);
