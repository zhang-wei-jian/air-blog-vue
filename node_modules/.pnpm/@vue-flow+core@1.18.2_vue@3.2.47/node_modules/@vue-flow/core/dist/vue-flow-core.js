"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("vue");var io;const On=typeof window<"u",Qi=e=>typeof e<"u",Ji=e=>typeof e=="boolean",be=e=>typeof e=="function",we=e=>typeof e=="number",ke=e=>typeof e=="string",er=()=>{};On&&((io=window==null?void 0:window.navigator)!=null&&io.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Re(e){return typeof e=="function"?e():r.unref(e)}function tr(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const Ko=e=>e();function nr(e=Ko){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:r.readonly(t),pause:n,resume:o,eventFilter:i}}function ro(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function or(e){return e}function tn(e,t){let n,o,i;const a=r.ref(!0),l=()=>{a.value=!0,i()};r.watch(e,l,{flush:"sync"});const u=be(t)?t:t.get,s=be(t)?void 0:t.set,c=r.customRef((d,v)=>(o=d,i=v,{get(){return a.value&&(n=u(),a.value=!1),o(),n},set(p){s==null||s(p)}}));return Object.isExtensible(c)&&(c.trigger=l),c}function Ye(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function ir(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function mn(e,t=!1){function n(v,{flush:p="sync",deep:E=!1,timeout:h,throwOnTimeout:f}={}){let _=null;const S=[new Promise(P=>{_=r.watch(e,w=>{v(w)!==t&&(_==null||_(),P(w))},{flush:p,deep:E,immediate:!0})})];return h!=null&&S.push(ro(h,f).then(()=>Re(e)).finally(()=>_==null?void 0:_())),Promise.race(S)}function o(v,p){if(!r.isRef(v))return n(w=>w===v,p);const{flush:E="sync",deep:h=!1,timeout:f,throwOnTimeout:_}=p??{};let x=null;const P=[new Promise(w=>{x=r.watch([e,v],([C,R])=>{t!==(C===R)&&(x==null||x(),w(C))},{flush:E,deep:h,immediate:!0})})];return f!=null&&P.push(ro(f,_).then(()=>Re(e)).finally(()=>(x==null||x(),Re(e)))),Promise.race(P)}function i(v){return n(p=>Boolean(p),v)}function a(v){return o(null,v)}function l(v){return o(void 0,v)}function u(v){return n(Number.isNaN,v)}function s(v,p){return n(E=>{const h=Array.from(E);return h.includes(v)||h.includes(Re(v))},p)}function c(v){return d(1,v)}function d(v=1,p){let E=-1;return n(()=>(E+=1,E>=v),p)}return Array.isArray(Re(e))?{toMatch:n,toContains:s,changed:c,changedTimes:d,get not(){return mn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:u,toBeUndefined:l,changed:c,changedTimes:d,get not(){return mn(e,!t)}}}function ue(e){return mn(e)}var ao=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,lr=(e,t)=>{var n={};for(var o in e)rr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&ao)for(var o of ao(e))t.indexOf(o)<0&&ar.call(e,o)&&(n[o]=e[o]);return n};function ur(e,t,n={}){const o=n,{eventFilter:i=Ko}=o,a=lr(o,["eventFilter"]);return r.watch(e,tr(i,t),a)}var sr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable,lo=(e,t,n)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fr=(e,t)=>{for(var n in t||(t={}))Wo.call(t,n)&&lo(e,n,t[n]);if(St)for(var n of St(t))qo.call(t,n)&&lo(e,n,t[n]);return e},hr=(e,t)=>cr(e,dr(t)),gr=(e,t)=>{var n={};for(var o in e)Wo.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&St)for(var o of St(e))t.indexOf(o)<0&&qo.call(e,o)&&(n[o]=e[o]);return n};function ze(e,t,n={}){const o=n,{eventFilter:i}=o,a=gr(o,["eventFilter"]),{eventFilter:l,pause:u,resume:s,isActive:c}=nr(i);return{stop:ur(e,t,hr(fr({},a),{eventFilter:l})),pause:u,resume:s,isActive:c}}function jo(e){var t;const n=Re(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Tn=On?window:void 0;function Bn(...e){let t,n,o,i;if(ke(e[0])||Array.isArray(e[0])?([n,o,i]=e,t=Tn):[t,n,o,i]=e,!t)return er;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],l=()=>{a.forEach(d=>d()),a.length=0},u=(d,v,p,E)=>(d.addEventListener(v,p,E),()=>d.removeEventListener(v,p,E)),s=r.watch(()=>[jo(t),Re(i)],([d,v])=>{l(),d&&a.push(...n.flatMap(p=>o.map(E=>u(d,p,E,v))))},{immediate:!0,flush:"post"}),c=()=>{s(),l()};return Ye(c),c}const vr=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function uo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Tn,eventName:a="keydown",passive:l=!1}=o,u=vr(t);return Bn(i,a,c=>{u(c)&&n(c)},l)}function pr(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),ir(o,t),n}function mr(e){return JSON.parse(JSON.stringify(e))}const yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn="__vueuse_ssr_handlers__";yn[xn]=yn[xn]||{};yn[xn];var so=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,wr=(e,t)=>{var n={};for(var o in e)yr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&so)for(var o of so(e))t.indexOf(o)<0&&xr.call(e,o)&&(n[o]=e[o]);return n};function _r(e,t,n={}){const o=n,{window:i=Tn}=o,a=wr(o,["window"]);let l;const u=pr(()=>i&&"ResizeObserver"in i),s=()=>{l&&(l.disconnect(),l=void 0)},c=r.watch(()=>jo(e),v=>{s(),u.value&&i&&v&&(l=new ResizeObserver(t),l.observe(v,a))},{immediate:!0,flush:"post"}),d=()=>{s(),c()};return Ye(d),{isSupported:u,stop:d}}var co;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(co||(co={}));var Er=Object.defineProperty,fo=Object.getOwnPropertySymbols,br=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,ho=(e,t,n)=>t in e?Er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nr=(e,t)=>{for(var n in t||(t={}))br.call(t,n)&&ho(e,n,t[n]);if(fo)for(var n of fo(t))Sr.call(t,n)&&ho(e,n,t[n]);return e};const Cr={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Nr({linear:or},Cr);function qe(e,t,n,o={}){var i,a,l;const{clone:u=!1,passive:s=!1,eventName:c,deep:d=!1,defaultValue:v}=o,p=r.getCurrentInstance(),E=n||(p==null?void 0:p.emit)||((i=p==null?void 0:p.$emit)==null?void 0:i.bind(p))||((l=(a=p==null?void 0:p.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(p==null?void 0:p.proxy));let h=c;t||(t="modelValue"),h=c||h||`update:${t.toString()}`;const f=x=>u?be(u)?u(x):mr(x):x,_=()=>Qi(e[t])?f(e[t]):v;if(s){const x=_(),S=r.ref(x);return r.watch(()=>e[t],P=>S.value=f(P)),r.watch(S,P=>{(P!==e[t]||d)&&E(h,P)},{deep:d}),S}else return r.computed({get(){return _()},set(x){E(h,x)}})}function Y(e=()=>{}){const t=r.ref(new Set);e&&t.value.add(e);const n=a=>{t.value.delete(a)};return{on:a=>{t.value.has(e)&&t.value.delete(e),t.value.add(a);const l=()=>n(a);return Ye(l),{off:l}},off:n,trigger:a=>Promise.all(Array.from(t.value).map(l=>l(a))),fns:t}}const kr=["production","prod"];function Qe(e,...t){kr.includes(process.env.NODE_ENV||"")||console.warn(`[Vue Flow]: ${e}`,...t)}function Mr(){return{edgesChange:Y(),nodesChange:Y(),nodeDoubleClick:Y(),nodeClick:Y(),nodeMouseEnter:Y(),nodeMouseMove:Y(),nodeMouseLeave:Y(),nodeContextMenu:Y(),nodeDragStart:Y(),nodeDrag:Y(),nodeDragStop:Y(),nodesInitialized:Y(),miniMapNodeClick:Y(),miniMapNodeDoubleClick:Y(),miniMapNodeMouseEnter:Y(),miniMapNodeMouseMove:Y(),miniMapNodeMouseLeave:Y(),connect:Y(),connectStart:Y(),connectEnd:Y(),clickConnectStart:Y(),clickConnectEnd:Y(),paneReady:Y(),move:Y(),moveStart:Y(),moveEnd:Y(),selectionDragStart:Y(),selectionDrag:Y(),selectionDragStop:Y(),selectionContextMenu:Y(),selectionStart:Y(),selectionEnd:Y(),viewportChangeStart:Y(),viewportChange:Y(),viewportChangeEnd:Y(),paneScroll:Y(),paneClick:Y(),paneContextMenu:Y(),paneMouseEnter:Y(),paneMouseMove:Y(),paneMouseLeave:Y(),edgeContextMenu:Y(),edgeMouseEnter:Y(),edgeMouseMove:Y(),edgeMouseLeave:Y(),edgeDoubleClick:Y(),edgeClick:Y(),edgeUpdateStart:Y(),edgeUpdate:Y(),edgeUpdateEnd:Y(),updateNodeInternals:Y(),error:Y(e=>Qe(e.message))}}function $r(e,t){r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),Ye(()=>{o.off(i)})}})}var re=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(re||{});const nn={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class le extends Error{constructor(t,...n){var o;super((o=nn[t])==null?void 0:o.call(nn,...n)),this.code=t}}const Pn=()=>typeof window<"u"?window:{chrome:!1};function go(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function wn(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Dt(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Pe(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Dn(e,t){return{x:Pe(e.x,t[0][0],t[1][0]),y:Pe(e.y,t[0][1],t[1][1])}}function vo(e){const t=e.getRootNode(),n=Pn();return"elementFromPoint"in t?t:n.document}function pe(e){return e&&"id"in e&&"source"in e&&"target"in e}function zn(e){return pe(e)&&"sourceNode"in e&&"targetNode"in e}function zt(e){return e&&"id"in e&&!pe(e)}function _e(e){return zt(e)&&"computedPosition"in e}function Ir(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function Rr(e,t={}){let n=t;return _e(e)||(n={type:e.type??t.type??"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:ie(e.data)?e.data:{},events:r.markRaw(ie(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function An(e,t={}){const n=ie(e.events)?e.events:t.events&&ie(t.events)?t.events:{},o=ie(e.data)?e.data:t.data&&ie(t.data)?t.data:{};return t=zn(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:r.markRaw(n),label:(e.label&&!ke(e.label)?r.markRaw(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function Qo(e,t,n){if(!zt(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>pe(a)&&a[o]===e.id).map(a=>pe(a)&&a[n]);return t.filter(a=>i.includes(a.id))}function Or(e,t){return Qo(e,t,"target")}function Tr(e,t){return Qo(e,t,"source")}function At({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Vn(e,t){return t.some(n=>pe(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Br(e,t,n){if(!e.source||!e.target)return Qe("Can't create edge. An edge needs a source and a target."),t;let o;return pe(e)?o={...e}:o={...e,id:At(e)},o=An(o,n),Vn(o,t)||t.push(o),t}function Pr(e,t,n){if(!t.source||!t.target)return Qe("Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>pe(a)&&a.id===e.id);if(!o)return Qe(`The old edge with id=${e.id} does not exist.`),n;const i={...e,id:At(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)}function Dr({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Hn({x:e,y:t},{x:n,y:o,zoom:i},a,[l,u]){const s={x:(e-n)/i,y:(t-o)/i};return a?{x:l*Math.round(s.x/l),y:u*Math.round(s.y/u)}:s}function Jo(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Nt({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function ei({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function zr(e,t){return ei(Jo(Nt(e),Nt(t)))}function Vt(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>Jo(n,Nt({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ei(t)}function Ar({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Fn(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1,l=!1){const u={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(s=>{const{computedPosition:c={x:0,y:0},dimensions:d={width:0,height:0},selectable:v}=s;if(l&&!v)return!1;const p={...c,width:d.width||0,height:d.height||0},E=wn(u,p),h=typeof d.width>"u"||typeof d.height>"u"||d.width===0||d.height===0,f=a&&E>0,_=d.width*d.height;return h||f||E>=_})}function ut(e,t){const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))}function Je(e,t,n,o,i,a=.1,l={x:0,y:0}){const u=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(u,s),d=Pe(c,o,i),v=e.x+e.width/2,p=e.y+e.height/2,E=t/2-v*d+(l.x??0),h=n/2-p*d+(l.y??0);return{x:E,y:h,zoom:d}}function Vr(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ti(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:ti(n,t):!1}function Me(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ie(e){return typeof r.unref(e)<"u"}function Hr(e,t,n){if(!e.source||!e.target)return n(new le(re.EDGE_INVALID,e.id)),!1;let o;return pe(e)?o=e:o={...e,id:At(e)},o=An(o),Vn(o,t)?!1:o}function Fr(e,t,n,o,i,a){if(!t.source||!t.target)return a(new le(re.EDGE_INVALID,e.id)),!1;const l=o(e.id);if(!l)return a(new le(re.EDGE_NOT_FOUND,e.id)),!1;const{id:u,...s}=e,c={...s,id:i?At(t):u,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(l),1,c),c}function po(e,t,n,o){const i={},a=e.map(u=>{const s=Rr(u,{...n(u.id),parentNode:u.parentNode});return u.parentNode&&(i[u.parentNode]=!0),s}),l=[...a,...t];return a.forEach(u=>{const s=l.find(c=>c.id===u.parentNode);u.parentNode&&!s&&o(new le(re.NODE_MISSING_PARENT,u.id,u.parentNode)),(u.parentNode||i[u.id])&&(i[u.id]&&(u.isParent=!0),s&&(s.isParent=!0))}),a}var j=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(j||{}),Ht=(e=>(e.Partial="partial",e.Full="full",e))(Ht||{}),Ce=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Ce||{}),$e=(e=>(e.Strict="strict",e.Loose="loose",e))($e||{}),Ct=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Ct||{}),et=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(et||{}),ni=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(ni||{});const _n=Symbol("vueFlow"),Ln=Symbol("nodeId"),oi=Symbol("nodeRef"),ii=Symbol("edgeId"),ri=Symbol("edgeRef"),Ft=Symbol("slots");function ai(e){const t=e??r.inject(Ln,""),n=r.inject(oi,null),{findNode:o,getEdges:i,emits:a}=oe(),l=o(t);return l||a.error(new le(re.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:r.computed(()=>l.parentNode?o(l.parentNode):void 0),connectedEdges:r.computed(()=>ut([l],i.value))}}function Gn(e){return"clientX"in e}function Ae(e,t){var a,l;const n=Gn(e),o=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}function kt(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,i=((n==null?void 0:n.y)??0)+t.y,a=(n==null?void 0:n.width)??t.width,l=(n==null?void 0:n.height)??t.height;switch(e){case j.Top:return{x:o+a/2,y:i};case j.Right:return{x:o+a,y:i+l/2};case j.Bottom:return{x:o+a/2,y:i+l};case j.Left:return{x:o,y:i+l/2}}}function mo(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function Lr(e,t,n,o,i,a){const l=kt(n,{...e.dimensions,...e.computedPosition},t),u=kt(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y}}function Gr({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:l,height:u,viewport:s}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=Nt({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:l/s.zoom,height:u/s.zoom}),v=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),p=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(v*p)>0}function Yr(e,t,n=!1){let o=-1;const i=e.reduce((a,l)=>{const u=we(l.zIndex);let s=u?l.zIndex:0;const c=t(l.source),d=t(l.target);return!c||!d||(n&&(s=u?l.zIndex:Math.max(c.computedPosition.z||0,d.computedPosition.z||0)),a[s]?a[s].push(l):a[s]=[l],o=s>o?s:o),a},{});return Object.entries(Object.keys(i).length?i:{0:[]}).map(([a,l])=>{const u=+a;return{edges:l,level:u,isMaxLevel:u===o}})}function on(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function yo(e,t,n,o){return(t[n]||[]).reduce((i,a)=>(`${e.id}-${a.id}-${n}`!==o&&i.push({id:a.id||null,type:n,nodeId:e.id,...kt(a.position,{...e.dimensions,...e.computedPosition},a)}),i),[])}function Xr(e,t,n){let o=null,i=1/0;return n.forEach(a=>{const l=Math.sqrt((a.x-e.x)**2+(a.y-e.y)**2);l<=t&&l<i&&(i=l,o=a)}),o}function xo(e,t,n,o,i,a,l,u,s,c){const d=a==="target",v=u.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:p,y:E}=Ae(e),h=u.elementFromPoint(p,E),f=h!=null&&h.classList.contains("vue-flow__handle")?h:v,_={handleDomNode:f,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null};if(f){const x=li(void 0,f),S=f.getAttribute("data-nodeid"),P=f.getAttribute("data-handleid"),w=f.classList.contains("connectable"),C=f.classList.contains("connectableend"),R={source:d?S:o,sourceHandle:d?P:i,target:d?o:S,targetHandle:d?i:P};_.connection=R,w&&C&&(n===$e.Strict?d&&x==="source"||!d&&x==="target":S!==o||P!==i)&&(_.endHandle={nodeId:S,handleId:P,type:x},_.isValid=l(R,{edges:s,sourceNode:c(R.source),targetNode:c(R.target)}))}return _}function Ur({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((i,a)=>{const{handleBounds:l}=a;let u=[],s=[];return l&&(u=yo(a,l,"source",`${t}-${n}-${o}`),s=yo(a,l,"target",`${t}-${n}-${o}`)),i.push(...u,...s),i},[])}function li(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Zr(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function wo(e,t,n){return e<t?Pe(Math.abs(e-t),1,50)/50:e>n?-Pe(Math.abs(e-n),1,50)/50:0}function ui(e,t){const n=wo(e.x,35,t.width-35)*20,o=wo(e.y,35,t.height-35)*20;return[n,o]}function ht(){return!0}function Yn({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const u=r.computed(()=>r.unref(n)==="target"),s=r.computed(()=>r.unref(t)),c=r.computed(()=>r.unref(e)),d=r.computed(()=>r.unref(i)),{vueFlowRef:v,connectionMode:p,connectionRadius:E,connectOnClick:h,connectionClickStartHandle:f,nodesConnectable:_,autoPanOnConnect:x,findNode:S,panBy:P,getNodes:w,startConnection:C,updateConnection:R,endConnection:m,emits:L,viewport:z,edges:$,isValidConnection:V}=oe();let J=null,K=!1,y=null;function H(O){var T;const Z=Gn(O),G=vo(O.target);if(Z&&O.button===0||!Z){let X=function(ne){U=Ae(ne,I),D=Xr(Hn(U,z.value,!1,[1,1]),E.value,q),N||(Q(),N=!0);const ae=xo(ne,D,p.value,s.value,c.value,u.value?"target":"source",te,G,$.value,S);if(J=ae.connection,K=ae.isValid,y=ae.handleDomNode,R(D&&K?Dr({x:D.x,y:D.y},z.value):U,ae.endHandle,Zr(!!D,K)),!D&&!K&&!y)return on(A);J&&J.source!==J.target&&y&&(on(A),A=y,y.classList.add("connecting","vue-flow__handle-connecting"),y.classList.toggle("valid",K),y.classList.toggle("vue-flow__handle-valid",K))},W=function(ne){(D||y)&&J&&K&&(a?a(ne,J):L.connect(J)),L.connectEnd(ne),d&&(l==null||l(ne)),on(A),cancelAnimationFrame(M),m(ne),N=!1,K=!1,J=null,y=null,G.removeEventListener("mousemove",X),G.removeEventListener("mouseup",W),G.removeEventListener("touchmove",X),G.removeEventListener("touchend",W)};const ee=S(s.value);let te=o||V.value||ht;!te&&ee&&(te=(u?ee.isValidSourcePos:ee.isValidTargetPos)||ht);let D,M=0;const{x:F,y:g}=Ae(O),b=G==null?void 0:G.elementFromPoint(F,g),B=li(d.value,b),I=(T=v.value)==null?void 0:T.getBoundingClientRect();if(!I||!B)return;let A,U=Ae(O,I),N=!1;const q=Ur({nodes:w.value,nodeId:s.value,handleId:c.value,handleType:B}),Q=()=>{if(!x)return;const[ne,ae]=ui(U,I);P({x:ne,y:ae}),M=requestAnimationFrame(Q)};C({nodeId:s.value,handleId:c.value,type:B},{x:F-I.left,y:g-I.top},O),L.connectStart({event:O,nodeId:s.value,handleId:c.value,handleType:B}),G.addEventListener("mousemove",X),G.addEventListener("mouseup",W),G.addEventListener("touchmove",X),G.addEventListener("touchend",W)}}function k(O){if(h.value)if(!f.value)L.clickConnectStart({event:O,nodeId:s.value,handleId:c.value}),C({nodeId:s.value,type:r.unref(n),handleId:c.value},void 0,O,!0);else{let Z=o||V.value||ht;const G=S(s.value);if(!Z&&G&&(Z=(u?G.isValidSourcePos:G.isValidTargetPos)||ht),G&&(typeof G.connectable>"u"?_.value:G.connectable)===!1)return;const T=vo(O.target),{connection:X,isValid:W}=xo(O,{nodeId:s.value,id:c.value,type:r.unref(n)},p.value,f.value.nodeId,f.value.handleId||null,f.value.type,Z,T,$.value,S),ee=X.source===X.target;W&&!ee&&L.connect(X),L.clickConnectEnd(O),m(O,!0)}}return{handlePointerDown:H,handleClick:k}}function Kr(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const Wr=["data-id","data-handleid","data-nodeid","data-handlepos"],qr={name:"Handle",compatConfig:{MODE:3}},tt=r.defineComponent({...qr,props:{id:null,type:null,position:{default:j.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Kr(e,["position","connectable","connectableStart","connectableEnd","id","isValidConnection"]),n=r.toRef(t,"type","source"),{connectionStartHandle:o,connectionClickStartHandle:i,connectionEndHandle:a,vueFlowRef:l,nodesConnectable:u,noDragClassName:s,noPanClassName:c}=oe(),{id:d,node:v,nodeEl:p,connectedEdges:E}=ai(),h=r.ref(),f=r.computed(()=>e.id??`${d}__handle-${e.position}`),_=r.computed(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),x=r.computed(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:S,handleClick:P}=Yn({nodeId:d,handleId:f,isValidConnection:e.isValidConnection,type:n}),w=r.computed(()=>ke(e.connectable)&&e.connectable==="single"?!E.value.some(z=>{const $=z[`${n.value}Handle`];return z[n.value]!==d?!1:$?$===f.value:!0}):be(e.connectable)?e.connectable(v,E.value):ie(e.connectable)?e.connectable:u.value),C=r.computed(()=>{var z,$,V,J,K,y;return((z=o.value)==null?void 0:z.nodeId)===d&&(($=o.value)==null?void 0:$.handleId)===f.value&&((V=o.value)==null?void 0:V.type)===n.value||((J=a.value)==null?void 0:J.nodeId)===d&&((K=a.value)==null?void 0:K.handleId)===f.value&&((y=a.value)==null?void 0:y.type)===n.value}),R=r.computed(()=>{var z,$,V;return((z=i.value)==null?void 0:z.nodeId)===d&&(($=i.value)==null?void 0:$.handleId)===f.value&&((V=i.value)==null?void 0:V.type)===n.value});ue(()=>v.initialized).toBe(!0,{flush:"post"}).then(()=>{var k;const z=(k=v.handleBounds[n.value])==null?void 0:k.find(O=>O.id===f.value);if(!l.value||z)return;const $=l.value.querySelector(".vue-flow__transformationpane");if(!p||!h.value||!$||!f.value)return;const V=p.value.getBoundingClientRect(),J=h.value.getBoundingClientRect(),K=window.getComputedStyle($),{m22:y}=new window.DOMMatrixReadOnly(K.transform),H={id:f.value,position:e.position,x:(J.left-V.left)/y,y:(J.top-V.top)/y,...Dt(h.value)};v.handleBounds[n.value]=[...v.handleBounds[n.value]??[],H]});function m(z){const $=Gn(z);w.value&&_.value&&($&&z.button===0||!$)&&S(z)}function L(z){!d||!i.value&&!_.value||w.value&&P(z)}return(z,$)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:h,"data-id":`${r.unref(d)}-${r.unref(f)}-${r.unref(n)}`,"data-handleid":r.unref(f),"data-nodeid":r.unref(d),"data-handlepos":e.position,class:r.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${r.unref(f)}`,r.unref(s),r.unref(c),r.unref(n),{connectable:r.unref(w),connecting:r.unref(R),connectablestart:r.unref(_),connectableend:r.unref(x),connectionindicator:r.unref(w)&&(r.unref(_)&&!r.unref(C)||r.unref(x)&&r.unref(C))}]]),onMousedown:m,onTouchstartPassive:m,onClick:L},[r.renderSlot(z.$slots,"default",{id:e.id})],42,Wr))}}),Lt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(tt,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(tt,{type:"source",position:e,connectable:o,isValidConnection:a})]};Lt.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];Lt.inheritAttrs=!1;Lt.compatConfig={MODE:3};const jr=Lt,Gt=function({sourcePosition:e=j.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(tt,{type:"source",position:e,connectable:n,isValidConnection:o})]};Gt.props=["sourcePosition","label","isValidSourcePos","connectable"];Gt.inheritAttrs=!1;Gt.compatConfig={MODE:3};const Qr=Gt,Yt=function({targetPosition:e=j.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[r.h(tt,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};Yt.props=["targetPosition","label","isValidTargetPos","connectable"];Yt.inheritAttrs=!1;Yt.compatConfig={MODE:3};const Jr=Yt;function _o(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function ea(e,t,n,o,i){return e.filter(a=>(a.selected||a.id===i)&&(!a.parentNode||!ti(a,o))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var l,u;return r.markRaw({id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((l=a.computedPosition)==null?void 0:l.x)||0,y:n.y-((u=a.computedPosition)==null?void 0:u.y)||0},from:a.computedPosition,extent:a.extent,parentNode:a.parentNode,dimensions:a.dimensions})})}function rn({id:e,dragItems:t,findNode:n}){const o=t.map(i=>n(i.id));return[e?o.find(i=>i.id===e):o[0],o]}function ta(e){switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];default:return e||[0,0,0,0]}}function na(e,t,n){const[o,i,a,l]=typeof e!="string"?ta(e.padding):[0,0,0,0];return n&&we(n.computedPosition.x)&&we(n.computedPosition.y)&&we(n.dimensions.width)&&we(n.dimensions.height)?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+(n.dimensions.width-t.dimensions.width)-i,n.computedPosition.y+(n.dimensions.height-t.dimensions.height)-a]]:!1}function oa(e,t,n,o){var a;let i=e.extent||n;if(e.extent==="parent"||!Array.isArray(e.extent)&&((a=e.extent)==null?void 0:a.range)==="parent")if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const l=na(e.extent,e,o);l&&(i=l)}else t(new le(re.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(e.extent)&&e.extent&&o){const l=o.computedPosition.x,u=o.computedPosition.y;i=[[e.extent[0][0]+l,e.extent[0][1]+u],[e.extent[1][0]+l,e.extent[1][1]+u]]}return i}function Xn(e,t,n,o,i){const a=oa(e,n,o,i),l=Dn(t,a);return{position:{x:l.x-((i==null?void 0:i.computedPosition.x)||0),y:l.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:l}}function si(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:l,emits:u}=oe();return(s,c=!1)=>{const d=a.value?i.value[0]:5,v=a.value?i.value[1]:5,p=c?4:1,E=s.x*d*p,h=s.y*v*p,f=e.value.filter(_=>_.draggable||l&&typeof _.draggable>"u").map(_=>{const x={x:_.computedPosition.x+E,y:_.computedPosition.y+h},{computedPosition:S}=Xn(_,x,u.error,t.value,_.parentNode?o(_.parentNode):void 0);return{id:_.id,position:S,from:_.position,distance:{x:s.x,y:s.y},dimensions:_.dimensions}});n(f,!0,!1)}}function ia(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),dragStart:Y(),drag:Y(),dragStop:Y()}}function ra(e,t){const n=ia();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function ci(){const{viewport:e,snapGrid:t,snapToGrid:n}=oe();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,l={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(l.x/t.value[0]):l.x,ySnapped:n.value?t.value[1]*Math.round(l.y/t.value[1]):l.y,...l}}}function Eo(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-a.left)/n,y:(u.top-a.top)/n,...Dt(l)}})}function En(e,t,n,o,i,a=!1,l){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),r.nextTick(l.blur)):n([e])}var aa={value:()=>{}};function Xt(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new wt(n)}function wt(e){this._=e}function la(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}wt.prototype=Xt.prototype={constructor:wt,on:function(e,t){var n=this._,o=la(e+"",n),i,a=-1,l=o.length;if(arguments.length<2){for(;++a<l;)if((i=(e=o[a]).type)&&(i=ua(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=o[a]).type)n[i]=bo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=bo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function ua(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function bo(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=aa,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var bn="http://www.w3.org/1999/xhtml";const So={svg:"http://www.w3.org/2000/svg",xhtml:bn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ut(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),So.hasOwnProperty(t)?{space:So[t],local:e}:e}function sa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bn&&t.documentElement.namespaceURI===bn?t.createElement(e):t.createElementNS(n,e)}}function ca(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function di(e){var t=Ut(e);return(t.local?ca:sa)(t)}function da(){}function Un(e){return e==null?da:function(){return this.querySelector(e)}}function fa(e){typeof e!="function"&&(e=Un(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,u=o[i]=new Array(l),s,c,d=0;d<l;++d)(s=a[d])&&(c=e.call(s,s.__data__,d,a))&&("__data__"in s&&(c.__data__=s.__data__),u[d]=c);return new ce(o,this._parents)}function ha(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ga(){return[]}function fi(e){return e==null?ga:function(){return this.querySelectorAll(e)}}function va(e){return function(){return ha(e.apply(this,arguments))}}function pa(e){typeof e=="function"?e=va(e):e=fi(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var l=t[a],u=l.length,s,c=0;c<u;++c)(s=l[c])&&(o.push(e.call(s,s.__data__,c,l)),i.push(s));return new ce(o,i)}function hi(e){return function(){return this.matches(e)}}function gi(e){return function(t){return t.matches(e)}}var ma=Array.prototype.find;function ya(e){return function(){return ma.call(this.children,e)}}function xa(){return this.firstElementChild}function wa(e){return this.select(e==null?xa:ya(typeof e=="function"?e:gi(e)))}var _a=Array.prototype.filter;function Ea(){return Array.from(this.children)}function ba(e){return function(){return _a.call(this.children,e)}}function Sa(e){return this.selectAll(e==null?Ea:ba(typeof e=="function"?e:gi(e)))}function Na(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,u=o[i]=[],s,c=0;c<l;++c)(s=a[c])&&e.call(s,s.__data__,c,a)&&u.push(s);return new ce(o,this._parents)}function vi(e){return new Array(e.length)}function Ca(){return new ce(this._enter||this._groups.map(vi),this._parents)}function Mt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mt.prototype={constructor:Mt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ka(e){return function(){return e}}function Ma(e,t,n,o,i,a){for(var l=0,u,s=t.length,c=a.length;l<c;++l)(u=t[l])?(u.__data__=a[l],o[l]=u):n[l]=new Mt(e,a[l]);for(;l<s;++l)(u=t[l])&&(i[l]=u)}function $a(e,t,n,o,i,a,l){var u,s,c=new Map,d=t.length,v=a.length,p=new Array(d),E;for(u=0;u<d;++u)(s=t[u])&&(p[u]=E=l.call(s,s.__data__,u,t)+"",c.has(E)?i[u]=s:c.set(E,s));for(u=0;u<v;++u)E=l.call(e,a[u],u,a)+"",(s=c.get(E))?(o[u]=s,s.__data__=a[u],c.delete(E)):n[u]=new Mt(e,a[u]);for(u=0;u<d;++u)(s=t[u])&&c.get(p[u])===s&&(i[u]=s)}function Ia(e){return e.__data__}function Ra(e,t){if(!arguments.length)return Array.from(this,Ia);var n=t?$a:Ma,o=this._parents,i=this._groups;typeof e!="function"&&(e=ka(e));for(var a=i.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=o[c],v=i[c],p=v.length,E=Oa(e.call(d,d&&d.__data__,c,o)),h=E.length,f=u[c]=new Array(h),_=l[c]=new Array(h),x=s[c]=new Array(p);n(d,v,f,_,x,E,t);for(var S=0,P=0,w,C;S<h;++S)if(w=f[S]){for(S>=P&&(P=S+1);!(C=_[P])&&++P<h;);w._next=C||null}}return l=new ce(l,o),l._enter=u,l._exit=s,l}function Oa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ta(){return new ce(this._exit||this._groups.map(vi),this._parents)}function Ba(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function Pa(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,l=Math.min(i,a),u=new Array(i),s=0;s<l;++s)for(var c=n[s],d=o[s],v=c.length,p=u[s]=new Array(v),E,h=0;h<v;++h)(E=c[h]||d[h])&&(p[h]=E);for(;s<i;++s)u[s]=n[s];return new ce(u,this._parents)}function Da(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],l;--i>=0;)(l=o[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function za(e){e||(e=Aa);function t(v,p){return v&&p?e(v.__data__,p.__data__):!v-!p}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var l=n[a],u=l.length,s=i[a]=new Array(u),c,d=0;d<u;++d)(c=l[d])&&(s[d]=c);s.sort(t)}return new ce(i,this._parents).order()}function Aa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Va(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ha(){return Array.from(this)}function Fa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var l=o[i];if(l)return l}return null}function La(){let e=0;for(const t of this)++e;return e}function Ga(){return!this.node()}function Ya(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,l=i.length,u;a<l;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function Xa(e){return function(){this.removeAttribute(e)}}function Ua(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Za(e,t){return function(){this.setAttribute(e,t)}}function Ka(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Wa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function qa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ja(e,t){var n=Ut(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ua:Xa:typeof t=="function"?n.local?qa:Wa:n.local?Ka:Za)(n,t))}function pi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Qa(e){return function(){this.style.removeProperty(e)}}function Ja(e,t,n){return function(){this.style.setProperty(e,t,n)}}function el(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function tl(e,t,n){return arguments.length>1?this.each((t==null?Qa:typeof t=="function"?el:Ja)(e,t,n??"")):Le(this.node(),e)}function Le(e,t){return e.style.getPropertyValue(t)||pi(e).getComputedStyle(e,null).getPropertyValue(t)}function nl(e){return function(){delete this[e]}}function ol(e,t){return function(){this[e]=t}}function il(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rl(e,t){return arguments.length>1?this.each((t==null?nl:typeof t=="function"?il:ol)(e,t)):this.node()[e]}function mi(e){return e.trim().split(/^|\s+/)}function Zn(e){return e.classList||new yi(e)}function yi(e){this._node=e,this._names=mi(e.getAttribute("class")||"")}yi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xi(e,t){for(var n=Zn(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function wi(e,t){for(var n=Zn(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function al(e){return function(){xi(this,e)}}function ll(e){return function(){wi(this,e)}}function ul(e,t){return function(){(t.apply(this,arguments)?xi:wi)(this,e)}}function sl(e,t){var n=mi(e+"");if(arguments.length<2){for(var o=Zn(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ul:t?al:ll)(n,t))}function cl(){this.textContent=""}function dl(e){return function(){this.textContent=e}}function fl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hl(e){return arguments.length?this.each(e==null?cl:(typeof e=="function"?fl:dl)(e)):this.node().textContent}function gl(){this.innerHTML=""}function vl(e){return function(){this.innerHTML=e}}function pl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ml(e){return arguments.length?this.each(e==null?gl:(typeof e=="function"?pl:vl)(e)):this.node().innerHTML}function yl(){this.nextSibling&&this.parentNode.appendChild(this)}function xl(){return this.each(yl)}function wl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _l(){return this.each(wl)}function El(e){var t=typeof e=="function"?e:di(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bl(){return null}function Sl(e,t){var n=typeof e=="function"?e:di(e),o=t==null?bl:typeof t=="function"?t:Un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Nl(){var e=this.parentNode;e&&e.removeChild(this)}function Cl(){return this.each(Nl)}function kl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ml(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $l(e){return this.select(e?Ml:kl)}function Il(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Rl(e){return function(t){e.call(this,t,this.__data__)}}function Ol(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Tl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Bl(e,t,n){return function(){var o=this.__on,i,a=Rl(t);if(o){for(var l=0,u=o.length;l<u;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function Pl(e,t,n){var o=Ol(e+""),i,a=o.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,c=u.length,d;s<c;++s)for(i=0,d=u[s];i<a;++i)if((l=o[i]).type===d.type&&l.name===d.name)return d.value}return}for(u=t?Bl:Tl,i=0;i<a;++i)this.each(u(o[i],t,n));return this}function _i(e,t,n){var o=pi(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Dl(e,t){return function(){return _i(this,e,t)}}function zl(e,t){return function(){return _i(this,e,t.apply(this,arguments))}}function Al(e,t){return this.each((typeof t=="function"?zl:Dl)(e,t))}function*Vl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,l;i<a;++i)(l=o[i])&&(yield l)}var Ei=[null];function ce(e,t){this._groups=e,this._parents=t}function st(){return new ce([[document.documentElement]],Ei)}function Hl(){return this}ce.prototype=st.prototype={constructor:ce,select:fa,selectAll:pa,selectChild:wa,selectChildren:Sa,filter:Na,data:Ra,enter:Ca,exit:Ta,join:Ba,merge:Pa,selection:Hl,order:Da,sort:za,call:Va,nodes:Ha,node:Fa,size:La,empty:Ga,each:Ya,attr:ja,style:tl,property:rl,classed:sl,text:hl,html:ml,raise:xl,lower:_l,append:El,insert:Sl,remove:Cl,clone:$l,datum:Il,on:Pl,dispatch:Al,[Symbol.iterator]:Vl};function de(e){return typeof e=="string"?new ce([[document.querySelector(e)]],[document.documentElement]):new ce([[e]],Ei)}function Fl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ge(e,t){if(e=Fl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ll={passive:!1},nt={capture:!0,passive:!1};function an(e){e.stopImmediatePropagation()}function Ve(e){e.preventDefault(),e.stopImmediatePropagation()}function bi(e){var t=e.document.documentElement,n=de(e).on("dragstart.drag",Ve,nt);"onselectstart"in t?n.on("selectstart.drag",Ve,nt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Si(e,t){var n=e.document.documentElement,o=de(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ve,nt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gt=e=>()=>e;function Sn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:l,y:u,dx:s,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Sn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Gl(e){return!e.ctrlKey&&!e.button}function Yl(){return this.parentNode}function Xl(e,t){return t??{x:e.x,y:e.y}}function Ul(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zl(){var e=Gl,t=Yl,n=Xl,o=Ul,i={},a=Xt("start","drag","end"),l=0,u,s,c,d,v=0;function p(w){w.on("mousedown.drag",E).filter(o).on("touchstart.drag",_).on("touchmove.drag",x,Ll).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(w,C){if(!(d||!e.call(this,w,C))){var R=P(this,t.call(this,w,C),w,C,"mouse");R&&(de(w.view).on("mousemove.drag",h,nt).on("mouseup.drag",f,nt),bi(w.view),an(w),c=!1,u=w.clientX,s=w.clientY,R("start",w))}}function h(w){if(Ve(w),!c){var C=w.clientX-u,R=w.clientY-s;c=C*C+R*R>v}i.mouse("drag",w)}function f(w){de(w.view).on("mousemove.drag mouseup.drag",null),Si(w.view,c),Ve(w),i.mouse("end",w)}function _(w,C){if(e.call(this,w,C)){var R=w.changedTouches,m=t.call(this,w,C),L=R.length,z,$;for(z=0;z<L;++z)($=P(this,m,w,C,R[z].identifier,R[z]))&&(an(w),$("start",w,R[z]))}}function x(w){var C=w.changedTouches,R=C.length,m,L;for(m=0;m<R;++m)(L=i[C[m].identifier])&&(Ve(w),L("drag",w,C[m]))}function S(w){var C=w.changedTouches,R=C.length,m,L;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),m=0;m<R;++m)(L=i[C[m].identifier])&&(an(w),L("end",w,C[m]))}function P(w,C,R,m,L,z){var $=a.copy(),V=ge(z||R,C),J,K,y;if((y=n.call(w,new Sn("beforestart",{sourceEvent:R,target:p,identifier:L,active:l,x:V[0],y:V[1],dx:0,dy:0,dispatch:$}),m))!=null)return J=y.x-V[0]||0,K=y.y-V[1]||0,function H(k,O,Z){var G=V,T;switch(k){case"start":i[L]=H,T=l++;break;case"end":delete i[L],--l;case"drag":V=ge(Z||O,C),T=l;break}$.call(k,w,new Sn(k,{sourceEvent:O,subject:y,target:p,identifier:L,active:T,x:V[0]+J,y:V[1]+K,dx:V[0]-G[0],dy:V[1]-G[1],dispatch:$}),m)}}return p.filter=function(w){return arguments.length?(e=typeof w=="function"?w:gt(!!w),p):e},p.container=function(w){return arguments.length?(t=typeof w=="function"?w:gt(w),p):t},p.subject=function(w){return arguments.length?(n=typeof w=="function"?w:gt(w),p):n},p.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:gt(!!w),p):o},p.on=function(){var w=a.on.apply(a,arguments);return w===a?p:w},p.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,p):Math.sqrt(v)},p}function Ni(e){const t=r.effectScope();return Ye(()=>t.stop()),t.run(()=>{const n=oe(),o=r.toRef(n,"vueFlowRef"),i=r.toRef(n,"snapToGrid"),a=r.toRef(n,"snapGrid"),l=r.toRef(n,"noDragClassName"),u=r.toRef(n,"nodes"),s=r.toRef(n,"nodeExtent"),c=r.toRef(n,"viewport"),d=r.toRef(n,"autoPanOnNodeDrag"),v=r.toRef(n,"nodesDraggable"),p=r.toRef(n,"panBy"),E=r.toRef(n,"findNode"),h=r.toRef(n,"multiSelectionActive"),f=r.toRef(n,"nodesSelectionActive"),_=r.toRef(n,"selectNodesOnDrag"),x=r.toRef(n,"removeSelectedElements"),S=r.toRef(n,"addSelectedNodes"),P=r.toRef(n,"updateNodePositions"),w=r.toRef(n,"emits"),C=e,R=r.toRef(C,"onStart"),m=r.toRef(C,"onDrag"),L=r.toRef(C,"onStop"),z=r.toRef(C,"el"),$=r.toRef(C,"disabled"),V=r.toRef(C,"id"),J=r.toRef(C,"selectable"),K=r.ref(!1);let y=r.ref([]),H=r.ref(),k=r.ref(null),O=r.ref({x:void 0,y:void 0}),Z=r.ref({x:0,y:0}),G=r.ref(null),T=r.ref(0),X=r.ref(!1);const W=r.computed(()=>V.value?E.value(V.value):void 0),ee=ci();return r.watch([()=>$.value,()=>z.value],()=>{if(z.value){const te=de(z.value),D=({x:F,y:g})=>{O.value={x:F,y:g};let b=!1;if(y.value=y.value.map(B=>{const I={x:F-B.distance.x,y:g-B.distance.y};i.value&&(I.x=a.value[0]*Math.round(I.x/a.value[0]),I.y=a.value[1]*Math.round(I.y/a.value[1]));const{computedPosition:A}=Xn(B,I,w.value.error,s.value,B.parentNode?E.value(B.parentNode):void 0);return b=b||B.position.x!==A.x||B.position.y!==A.y,B.position=A,B}),!!b&&(P.value(y.value,!0,!0),K.value=!0,G.value)){const[B,I]=rn({id:V.value,dragItems:y.value,findNode:E.value});m.value(G.value,B,I)}},M=()=>{if(!k.value)return;const[F,g]=ui(Z.value,k.value);(F!==0||g!==0)&&(O.value.x=(O.value.x??0)-F/c.value.zoom,O.value.y=(O.value.y??0)-g/c.value.zoom,D(O.value),p.value({x:F,y:g})),T.value=requestAnimationFrame(M)};$.value?te.on(".drag",null):(H.value=Zl().on("start",F=>{var b,B;!_.value&&!h.value&&V.value&&((b=W.value)!=null&&b.selected||x.value()),W.value&&J.value&&_.value&&En(W.value,h.value,S.value,x.value,f,!1,z.value);const g=ee(F);if(O.value=g,y.value=ea(u.value,v.value,g,E.value,V.value),y.value.length){const[I,A]=rn({id:V.value,dragItems:y.value,findNode:E.value});R.value(F.sourceEvent,I,A)}k.value=((B=o.value)==null?void 0:B.getBoundingClientRect())||null,Z.value=Ae(F.sourceEvent,k.value)}).on("drag",F=>{const g=ee(F);!X.value&&d.value&&(X.value=!0,M()),(O.value.x!==g.xSnapped||O.value.y!==g.ySnapped)&&y.value.length&&(G.value=F.sourceEvent,Z.value=Ae(F.sourceEvent,k.value),D(g))}).on("end",F=>{if(K.value=!1,X.value=!1,cancelAnimationFrame(T.value),y.value.length){P.value(y.value,!1,!1);const[g,b]=rn({id:V.value,dragItems:y.value,findNode:E.value});L.value(F.sourceEvent,g,b)}}).filter(F=>{var b;const g=F.target;return!F.button&&(!l.value||!_o(g,`.${l.value}`,z.value)&&(!((b=W.value)!=null&&b.dragHandle)||_o(g,W.value.dragHandle,z.value)))}),te.call(H.value))}}),K})}const Ci="vue-flow__node-desc",ki="vue-flow__edge-desc",Kl="vue-flow__aria-live",Mi=["Enter"," ","Escape"],He={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Nn(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target,n=be(t.hasAttribute)?t.hasAttribute("contenteditable"):!1,o=be(t.closest)?t.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||n||!!o}function Wl(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ql(e,t){return n=>e.some(o=>{const i=o.split("+").map(a=>a.trim().toLowerCase());return i.length===1?n.key===o:(t.add(n.key.toLowerCase()),i.every(a=>t.has(a)))})}const je=(e,t)=>{const n=Pn();let o=r.ref(r.unref(e)===!0),i=r.ref(!1);const a=r.ref(new Set);return r.watch(o,()=>{t&&typeof t=="function"&&t(o.value)}),r.watchEffect(()=>{let l=r.unref(e);if(typeof n.addEventListener<"u"&&Bn(n,"blur",()=>{o.value=!1}),Ji(l)){o.value=l;return}Array.isArray(l)&&(l=ql(l,a.value)),l&&(uo(l,u=>{i.value=Wl(u),!(!i.value&&Nn(u))&&(u.preventDefault(),o.value=!0)},{eventName:"keydown"}),uo(l,u=>{if(o.value){if(!i.value&&Nn(u))return;i.value=!1,a.value.clear(),o.value=!1}},{eventName:"keyup"}))}),o},jl=r.defineComponent({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){r.provide(Ln,e.id);const t=oe(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"noPanClassName"),a=r.toRef(t,"selectNodesOnDrag"),l=r.toRef(t,"nodesSelectionActive"),u=r.toRef(t,"multiSelectionActive"),s=r.toRef(t,"emits"),c=r.toRef(t,"findNode"),d=r.toRef(t,"removeSelectedNodes"),v=r.toRef(t,"addSelectedNodes"),p=r.toRef(t,"updateNodeDimensions"),E=r.toRef(t,"onUpdateNodeInternals"),h=r.toRef(t,"getIntersectingNodes"),f=r.toRef(t,"getNodeTypes"),_=r.toRef(t,"nodeExtent"),x=r.toRef(t,"elevateNodesOnSelect"),S=r.toRef(t,"disableKeyboardA11y"),P=r.toRef(t,"ariaLiveMessage"),w=r.toRef(t,"snapToGrid"),C=r.toRef(t,"snapGrid"),R=si(),m=qe(e,"node"),L=r.computed(()=>m.value.parentNode?c.value(m.value.parentNode):void 0),z=r.computed(()=>ut([m.value],o.value)),$=r.ref();r.provide(oi,$);const{emit:V,on:J}=ra(m.value,s.value),K=Ni({id:e.id,el:$,disabled:r.computed(()=>!e.draggable),selectable:r.computed(()=>e.selectable),onStart(M,F,g){V.dragStart({event:M,node:F,nodes:g,intersections:h.value(F)})},onDrag(M,F,g){V.drag({event:M,node:F,nodes:g,intersections:h.value(F)})},onStop(M,F,g){V.dragStop({event:M,node:F,nodes:g,intersections:h.value(F)})}}),y=r.computed(()=>m.value.class instanceof Function?m.value.class(m.value):m.value.class),H=r.computed(()=>{const M=(m.value.style instanceof Function?m.value.style(m.value):m.value.style)||{},F=m.value.width instanceof Function?m.value.width(m.value):m.value.width,g=m.value.height instanceof Function?m.value.height(m.value):m.value.height;return F&&(M.width=typeof F=="string"?F:`${F}px`),g&&(M.height=typeof g=="string"?g:`${g}px`),M}),k=r.computed(()=>Number(m.value.zIndex??H.value.zIndex??0));return E.value(M=>{M.includes(e.id)&&Z()}),r.onMounted(()=>{e.resizeObserver.observe($.value)}),r.onBeforeUnmount(()=>{e.resizeObserver.unobserve($.value)}),r.watch([()=>m.value.type,()=>m.value.sourcePosition,()=>m.value.targetPosition],()=>{p.value([{id:e.id,nodeElement:$.value,forceUpdate:!0}])},{flush:"pre"}),r.watch([()=>m.value.position.x,()=>m.value.position.y,()=>{var M;return(M=L.value)==null?void 0:M.computedPosition.x},()=>{var M;return(M=L.value)==null?void 0:M.computedPosition.y},()=>{var M;return(M=L.value)==null?void 0:M.computedPosition.z},()=>m.value.selected,()=>m.value.dimensions.height,()=>m.value.dimensions.width,()=>{var M;return(M=L.value)==null?void 0:M.dimensions.height},()=>{var M;return(M=L.value)==null?void 0:M.dimensions.width},k],([M,F,g,b,B])=>{const I={x:M,y:F,z:k.value+(x.value&&m.value.selected?1e3:0)};we(g)&&we(b)?m.value.computedPosition=Vr({x:g,y:b,z:B},I):m.value.computedPosition=I},{flush:"pre",immediate:!0}),r.watch([()=>m.value.extent,()=>_.value],([M,F],[g,b])=>{(M!==g||F!==b)&&O()}),m.value.extent==="parent"||typeof m.value.extent=="object"&&"range"in m.value.extent&&m.value.extent.range==="parent"?ue(()=>m.value.initialized).toBe(!0).then(O):O(),()=>r.h("div",{ref:$,"data-id":m.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[i.value]:e.draggable,dragging:K==null?void 0:K.value,selected:m.value.selected,selectable:e.selectable},y.value],style:{zIndex:m.value.computedPosition.z??k.value,transform:`translate(${m.value.computedPosition.x}px,${m.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:m.value.initialized?"visible":"hidden",...H.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":S.value?void 0:`${Ci}-${n.value}`,"aria-label":m.value.ariaLabel,onMouseenter:G,onMousemove:T,onMouseleave:X,onContextmenu:W,onClick:te,onDblclick:ee,onKeydown:D},[r.h(e.type===!1?f.value.default:e.type,{id:m.value.id,type:m.value.type,data:m.value.data,events:{...m.value.events,...J},selected:!!m.value.selected,resizing:!!m.value.resizing,dragging:K==null?void 0:K.value,connectable:e.connectable,position:m.value.position,dimensions:m.value.dimensions,isValidTargetPos:m.value.isValidTargetPos,isValidSourcePos:m.value.isValidSourcePos,parent:m.value.parentNode,zIndex:m.value.computedPosition.z,targetPosition:m.value.targetPosition,sourcePosition:m.value.sourcePosition,label:m.value.label,dragHandle:m.value.dragHandle,onUpdateNodeInternals:Z})]);function O(){const M=m.value.computedPosition;w.value&&(M.x=C.value[0]*Math.round(M.x/C.value[0]),M.y=C.value[1]*Math.round(M.y/C.value[1]));const{computedPosition:F,position:g}=Xn(m.value,M,s.value.error,_.value,L.value);(m.value.computedPosition.x!==F.x||m.value.computedPosition.y!==F.y)&&(m.value.computedPosition={...m.value.computedPosition,...F}),(m.value.position.x!==g.x||m.value.position.y!==g.y)&&(m.value.position=g)}function Z(){$.value&&p.value([{id:e.id,nodeElement:$.value,forceUpdate:!0}])}function G(M){K!=null&&K.value||V.mouseEnter({event:M,node:m.value,connectedEdges:z.value})}function T(M){K!=null&&K.value||V.mouseMove({event:M,node:m.value,connectedEdges:z.value})}function X(M){K!=null&&K.value||V.mouseLeave({event:M,node:m.value,connectedEdges:z.value})}function W(M){return V.contextMenu({event:M,node:m.value,connectedEdges:z.value})}function ee(M){return V.doubleClick({event:M,node:m.value,connectedEdges:z.value})}function te(M){e.selectable&&(!a.value||!e.draggable)&&En(m.value,u.value,v.value,d.value,l,!1,$.value),V.click({event:M,node:m.value,connectedEdges:z.value})}function D(M){var F;if(!Nn(M))if(Mi.includes(M.key)&&e.selectable){const g=M.key==="Escape";g&&((F=$.value)==null||F.blur()),En(m.value,u.value,v.value,d.value,l,g,$.value)}else!S.value&&e.draggable&&m.value.selected&&He[M.key]&&(P.value=`Moved selected node ${M.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~m.value.position.x}, y: ${~~m.value.position.y}`,R({x:He[M.key].x,y:He[M.key].y},M.shiftKey))}}}),Ql=jl,Jl=["transform"],eu=["width","height","x","y","rx","ry"],tu=["y"],nu={name:"EdgeText",compatConfig:{MODE:3}},$i=r.defineComponent({...nu,props:{x:null,y:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){let t=r.ref({x:0,y:0,width:0,height:0});const n=r.ref(null),o=r.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);r.onMounted(i),r.watch([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,l)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${r.unref(t).width+2*e.labelBgPadding[0]}px`,height:`${r.unref(t).height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,eu)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:r.unref(t).height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(a.$slots,"default",{},()=>[r.unref(ke)(e.label)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64)):(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0}))])],16,tu)],8,Jl))}}),Zt=function({path:e,label:t,labelX:n,labelY:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:l,labelShowBg:u=!0,labelStyle:s,markerStart:c,markerEnd:d,interactionWidth:v=20},{attrs:p}){return[r.h("path",{style:p.style,class:["vue-flow__edge-path",p.class].join(" "),d:e,"marker-end":d,"marker-start":c}),v?r.h("path",{d:e,fill:"none","stroke-opacity":0,"stroke-width":v}):null,t&&we(n)&&we(o)?r.h($i,{x:n,y:o,label:t,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:i}):null]};Zt.props=["path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"];Zt.inheritAttrs=!1;Zt.compatConfig={MODE:3};const ct=Zt;function Kn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,l=Math.abs(o-t)/2,u=o<t?o+l:o-l;return[a,u,i,l]}function Wn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:u}){const s=e*.125+i*.375+l*.375+n*.125,c=t*.125+a*.375+u*.375+o*.125,d=Math.abs(s-e),v=Math.abs(c-t);return[s,c,d,v]}function vt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function No({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let l,u;switch(e){case j.Left:l=t-vt(t-o,a),u=n;break;case j.Right:l=t+vt(o-t,a),u=n;break;case j.Top:l=t,u=n-vt(n-i,a);break;case j.Bottom:l=t,u=n+vt(i-n,a);break}return[l,u]}function $t({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top,curvature:l=.25}){const[u,s]=No({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[c,d]=No({pos:a,x1:o,y1:i,x2:e,y2:t,c:l}),[v,p,E,h]=Wn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return[`M${e},${t} C${u},${s} ${c},${d} ${o},${i}`,v,p,E,h]}const Kt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=$t({sourcePosition:e,targetPosition:t,...n});return r.h(ct,{path:i,labelX:a,labelY:l,...n,...o})};Kt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"];Kt.inheritAttrs=!1;Kt.compatConfig={MODE:3};const Ii=Kt;function Co({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,l;switch(e){case j.Left:case j.Right:a=.5*(t+o),l=n;break;case j.Top:case j.Bottom:a=t,l=.5*(n+i);break}return[a,l]}function qn({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top}){const[l,u]=Co({pos:n,x1:e,y1:t,x2:o,y2:i}),[s,c]=Co({pos:a,x1:o,y1:i,x2:e,y2:t}),[d,v,p,E]=Wn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${e},${t} C${l},${u} ${s},${c} ${o},${i}`,d,v,p,E]}const Wt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=qn({sourcePosition:e,targetPosition:t,...n});return r.h(ct,{path:i,labelX:a,labelY:l,...n,...o})};Wt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];Wt.inheritAttrs=!1;Wt.compatConfig={MODE:3};const Ri=Wt,ko={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}};function ou({source:e,sourcePosition:t=j.Bottom,target:n}){return t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Mo(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function iu({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:i,offset:a}){const l=ko[t],u=ko[o],s={x:e.x+l.x*a,y:e.y+l.y*a},c={x:n.x+u.x*a,y:n.y+u.y*a},d=ou({source:s,sourcePosition:t,target:c}),v=d.x!==0?"x":"y",p=d[v];let E,h,f;const[_,x,S,P]=Kn({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[v]*u[v]===-1){h=i.x||_,f=i.y||x;const C=[{x:h,y:s.y},{x:h,y:c.y}],R=[{x:s.x,y:f},{x:c.x,y:f}];l[v]===p?E=v==="x"?C:R:E=v==="x"?R:C}else{const C=[{x:s.x,y:c.y}],R=[{x:c.x,y:s.y}];if(v==="x"?E=l.x===p?R:C:E=l.y===p?C:R,t!==o){const m=v==="x"?"y":"x",L=l[v]===u[m],z=s[m]>c[m],$=s[m]<c[m];(l[v]===1&&(!L&&z||L&&$)||l[v]!==1&&(!L&&$||L&&z))&&(E=v==="x"?C:R)}h=E[0].x,f=E[0].y}return[[e,s,...E,c,n],h,f,S,P]}function ru(e,t,n,o){const i=Math.min(Mo(e,t)/2,Mo(t,n)/2,o),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+i*c},${l}Q ${a},${l} ${a},${l+i*d}`}const u=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${a},${l+i*s}Q ${a},${l} ${a+i*u},${l}`}function It({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top,borderRadius:l=5,centerX:u,centerY:s,offset:c=20}){const[d,v,p,E,h]=iu({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:u,y:s},offset:c});return[d.reduce((_,x,S)=>{let P;return S>0&&S<d.length-1?P=ru(d[S-1],x,d[S+1],l):P=`${S===0?"M":"L"}${x.x} ${x.y}`,_+=P,_},""),v,p,E,h]}const qt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=It({sourcePosition:e,targetPosition:t,...n});return r.h(ct,{path:i,labelX:a,labelY:l,...n,...o})};qt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"];qt.inheritAttrs=!1;qt.compatConfig={MODE:3};const jn=qt,jt=function(e,{attrs:t}){return r.h(jn,{...e,...t,borderRadius:0})};jt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];jt.inheritAttrs=!1;jt.compatConfig={MODE:3};const Oi=jt;function Qn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,a,l,u]=Kn({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,a,l,u]}const Qt=function(e,{attrs:t}){const[n,o,i]=Qn(e);return r.h(ct,{path:n,labelX:o,labelY:i,...e,...t})};Qt.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];Qt.inheritAttrs=!1;Qt.compatConfig={MODE:3};const Ti=Qt;function au(e,t,n){return n===j.Left?e-t:n===j.Right?e+t:e}function lu(e,t,n){return n===j.Top?e-t:n===j.Bottom?e+t:e}const Jn=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=j.Top,type:i}){return r.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:au(t,e,o),cy:lu(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Jn.props=["radius","centerX","centerY","position","type"];Jn.compatConfig={MODE:3};const $o=Jn;function uu(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),updateStart:Y(),update:Y(),updateEnd:Y()}}function su(e,t){const n=uu();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const cu=r.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:l,noPanClassName:u,getEdgeTypes:s,removeSelectedEdges:c,findEdge:d,findNode:v,isValidConnection:p}=oe(),E=su(e.edge,a),h=qe(e,"edge");let f=r.ref(!1),_=r.ref(!1);const x=r.ref(""),S=r.ref(null),P=r.ref("source"),w=r.ref("source"),C=r.ref();r.provide(ii,e.id),r.provide(ri,C);const R=r.computed(()=>v(h.value.source)),m=r.computed(()=>v(h.value.target)),L=r.computed(()=>h.value.class instanceof Function?h.value.class(h.value):h.value.class),z=r.computed(()=>h.value.style instanceof Function?h.value.style(h.value):h.value.style),{handlePointerDown:$}=Yn({nodeId:x,handleId:S,type:P,isValidConnection:p.value,edgeUpdaterType:w,onEdgeUpdate:K,onEdgeUpdateEnd:y});return()=>{if(!R.value||!m.value||!h.value)return null;let D;o.value===$e.Strict?D=R.value.handleBounds.source:D=[...R.value.handleBounds.source||[],...R.value.handleBounds.target||[]];const M=mo(D,h.value.sourceHandle);let F;o.value===$e.Strict?F=m.value.handleBounds.target:F=[...m.value.handleBounds.target||[],...m.value.handleBounds.source||[]];const g=mo(F,h.value.targetHandle),b=M?M.position:j.Bottom,B=g?g.position:j.Top,{sourceX:I,sourceY:A,targetY:U,targetX:N}=Lr(R.value,M,b,m.value,g,B);return h.value.sourceX=I,h.value.sourceY=A,h.value.targetX=N,h.value.targetY=U,r.h("g",{ref:C,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,u.value,L.value,{updating:f.value,selected:h.value.selected,animated:h.value.animated,inactive:!e.selectable}],onClick:k,onContextmenu:O,onDblclick:Z,onMouseenter:G,onMousemove:T,onMouseleave:X,onKeyDown:e.focusable?te:void 0,tabIndex:e.focusable?0:void 0,"aria-label":h.value.ariaLabel===null?void 0:h.value.ariaLabel||`Edge from ${h.value.source} to ${h.value.target}`,"aria-describedby":e.focusable?`${ki}-${t}`:void 0,role:e.focusable?"button":void 0},[_.value?null:r.h(e.type===!1?s.value.default:e.type,{id:e.id,sourceNode:R.value,targetNode:m.value,source:h.value.source,target:h.value.target,type:h.value.type,updatable:e.updatable,selected:h.value.selected,animated:h.value.animated,label:h.value.label,labelStyle:h.value.labelStyle,labelShowBg:h.value.labelShowBg,labelBgStyle:h.value.labelBgStyle,labelBgPadding:h.value.labelBgPadding,labelBgBorderRadius:h.value.labelBgBorderRadius,data:h.value.data,events:{...h.value.events,...E.on},style:z.value,markerStart:`url(#${Me(h.value.markerStart,t)})`,markerEnd:`url(#${Me(h.value.markerEnd,t)})`,sourcePosition:b,targetPosition:B,sourceX:I,sourceY:A,targetX:N,targetY:U,sourceHandleId:h.value.sourceHandle,targetHandleId:h.value.targetHandle,interactionWidth:h.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:W,onMouseenter:V,onMouseout:J},r.h($o,{position:b,centerX:I,centerY:A,radius:i.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:ee,onMouseenter:V,onMouseout:J},r.h($o,{position:B,centerX:N,centerY:U,radius:i.value,type:"target","data-type":"target"}))]:null]])};function V(){f.value=!0}function J(){f.value=!1}function K(D,M){E.emit.update({event:D,edge:h.value,connection:M})}function y(D){E.emit.updateEnd({event:D,edge:h.value}),_.value=!1}function H(D,M){D.button===0&&(_.value=!0,x.value=M?h.value.target:h.value.source,S.value=(M?h.value.targetHandle:h.value.sourceHandle)??"",P.value=M?"target":"source",w.value=P.value,E.emit.updateStart({event:D,edge:h.value}),$(D))}function k(D){const M={event:D,edge:h.value};e.selectable&&(l.value=!1,n([h.value])),E.emit.click(M)}function O(D){E.emit.contextMenu({event:D,edge:h.value})}function Z(D){E.emit.doubleClick({event:D,edge:h.value})}function G(D){E.emit.mouseEnter({event:D,edge:h.value})}function T(D){E.emit.mouseMove({event:D,edge:h.value})}function X(D){E.emit.mouseLeave({event:D,edge:h.value})}function W(D){H(D,!0)}function ee(D){H(D,!1)}function te(D){var M;Mi.includes(D.key)&&e.selectable&&(D.key==="Escape"?((M=C.value)==null||M.blur(),c([d(e.id)])):n([d(e.id)]))}}}),du=cu,fu={height:"0",width:"0"},hu={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},gu=r.defineComponent({...hu,setup(e){const{viewportRef:t}=oe(),n=r.computed(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,i)=>(r.openBlock(),r.createElementBlock("svg",null,[(r.openBlock(),r.createElementBlock("foreignObject",fu,[(r.openBlock(),r.createBlock(r.Teleport,{to:r.unref(n),disabled:!r.unref(n)},[r.renderSlot(o.$slots,"default")],8,["to","disabled"]))]))]))}}),vu={class:"vue-flow__connection"},pu=["d","marker-end","marker-start"],mu={name:"ConnectionLine",compatConfig:{MODE:3}},yu=r.defineComponent({...mu,props:{sourceNode:null},setup(e){var z;const t=oe(),n=r.toRef(t,"connectionMode"),o=r.toRef(t,"connectionStartHandle"),i=r.toRef(t,"connectionEndHandle"),a=r.toRef(t,"connectionPosition"),l=r.toRef(t,"connectionLineType"),u=r.toRef(t,"connectionLineStyle"),s=r.toRef(t,"connectionLineOptions"),c=r.toRef(t,"connectionStatus"),d=r.toRef(t,"viewport"),v=r.toRef(t,"findNode"),p={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top},E=(z=r.inject(Ft))==null?void 0:z["connection-line"],h=r.computed(()=>o.value.handleId),f=r.computed(()=>o.value.type),_=r.computed(()=>{var $;return(($=i.value)==null?void 0:$.handleId)&&v.value(i.value.nodeId)||null}),x=r.computed(()=>{var $,V;return(n.value===$e.Strict?($=e.sourceNode.handleBounds[f.value])==null?void 0:$.find(J=>J.id===h.value):[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]].find(J=>J.id===h.value))||((V=e.sourceNode.handleBounds[f.value??"source"])==null?void 0:V[0])}),S=r.computed(()=>{var $,V,J;return _.value&&(($=i.value)==null?void 0:$.handleId)&&((n.value===$e.Strict?(V=_.value.handleBounds[f.value==="source"?"target":"source"])==null?void 0:V.find(K=>{var y;return K.id===((y=i.value)==null?void 0:y.handleId)}):[..._.value.handleBounds.source||[],..._.value.handleBounds.target||[]].find(K=>{var y;return K.id===((y=i.value)==null?void 0:y.handleId)}))||((J=_.value.handleBounds[f.value??"target"])==null?void 0:J[0]))||null}),P=r.computed(()=>{var $;return($=x.value)==null?void 0:$.position}),w=r.computed(()=>x.value?kt(P.value||j.Top,{...e.sourceNode.dimensions,...e.sourceNode.computedPosition},x.value):{x:e.sourceNode.dimensions.width/2,y:e.sourceNode.dimensions.height/2}),C=r.computed(()=>P.value?p[P.value]:void 0),R=r.computed(()=>(a.value.x-d.value.x)/d.value.zoom),m=r.computed(()=>(a.value.y-d.value.y)/d.value.zoom),L=r.computed(()=>{let $;const V={sourceX:w.value.x,sourceY:w.value.y,sourcePosition:P.value,targetX:R.value,targetY:m.value,targetPosition:C.value};switch(l.value??s.value.type){case Ce.Bezier:[$]=$t(V);break;case Ce.Step:[$]=It({...V,borderRadius:0});break;case Ce.SmoothStep:[$]=It(V);break;case Ce.SimpleBezier:[$]=qn(V);break;case Ce.Straight:[$]=Qn(V);break;default:[$]=$t(V);break}return $});return($,V)=>{var J;return r.openBlock(),r.createElementBlock("g",vu,[r.unref(E)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(E)),r.normalizeProps(r.mergeProps({key:0},{sourceX:r.unref(w).x,sourceY:r.unref(w).y,sourcePosition:(J=r.unref(x))==null?void 0:J.position,targetX:r.unref(R),targetY:r.unref(m),targetPosition:r.unref(C),sourceNode:e.sourceNode,sourceHandle:r.unref(x),targetNode:r.unref(_),targetHandle:r.unref(S),markerEnd:`url(#${r.unref(Me)(r.unref(s).markerEnd)})`,markerStart:`url(#${r.unref(Me)(r.unref(s).markerStart)})`,connectionStatus:r.unref(c)})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(L),class:r.normalizeClass(["vue-flow__connection-path",[r.unref(s).class,r.unref(c)]]),style:r.normalizeStyle(r.unref(u)||r.unref(s).style||{}),"marker-end":`url(#${r.unref(Me)(r.unref(s).markerEnd)})`,"marker-start":`url(#${r.unref(Me)(r.unref(s).markerStart)})`},null,14,pu))])}}}),xu=["tabIndex"],wu={name:"NodesSelection",compatConfig:{MODE:3}},_u=r.defineComponent({...wu,setup(e){const t=oe(),n=r.toRef(t,"emits"),o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes"),a=r.toRef(t,"noPanClassName"),l=r.toRef(t,"disableKeyboardA11y"),u=r.toRef(t,"userSelectionActive"),s=si(),c=r.ref(),d=Ni({el:c,onStart(f,_,x){n.value.selectionDragStart({event:f,node:_,nodes:x})},onDrag(f,_,x){n.value.selectionDrag({event:f,node:_,nodes:x})},onStop(f,_,x){n.value.selectionDragStop({event:f,node:_,nodes:x})}});r.onMounted(()=>{var f;l.value||(f=c.value)==null||f.focus({preventScroll:!0})});const v=r.computed(()=>Vt(i.value)),p=r.computed(()=>({width:`${v.value.width}px`,height:`${v.value.height}px`,top:`${v.value.y}px`,left:`${v.value.x}px`}));function E(f){n.value.selectionContextMenu({event:f,nodes:i.value})}function h(f){l.value||He[f.key]&&s({x:He[f.key].x,y:He[f.key].y},f.shiftKey)}return(f,_)=>!r.unref(u)&&r.unref(v).width&&r.unref(v).height?(r.openBlock(),r.createElementBlock("div",{key:0,class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",r.unref(a)]),style:r.normalizeStyle({transform:`translate(${r.unref(o).x}px,${r.unref(o).y}px) scale(${r.unref(o).zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:c,class:r.normalizeClass([{dragging:r.unref(d)},"vue-flow__nodesselection-rect"]),style:r.normalizeStyle(r.unref(p)),tabIndex:r.unref(l)?void 0:-1,onContextmenu:E,onKeydown:h},null,46,xu)],6)):r.createCommentVNode("",!0)}}),Eu={name:"UserSelection",compatConfig:{MODE:3}},bu=r.defineComponent({...Eu,setup(e){const{userSelectionRect:t}=oe();return(n,o)=>{var i,a,l,u;return r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:r.normalizeStyle({width:`${(i=r.unref(t))==null?void 0:i.width}px`,height:`${(a=r.unref(t))==null?void 0:a.height}px`,transform:`translate(${(l=r.unref(t))==null?void 0:l.x}px, ${(u=r.unref(t))==null?void 0:u.y}px)`})},null,4)}}}),Bi={input:Qr,default:jr,output:Jr},Pi={default:Ii,straight:Ti,step:Oi,smoothstep:jn,simplebezier:Ri};function Su(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Ht.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:et.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Ce.Bezier,style:{}},connectionMode:$e.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Mr(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1},vueFlowVersion:"1.18.2"}}function Di(e){const t=Su();return e&&Object.keys(e).forEach(n=>{const o=e[n];ie(o)&&(t[n]=o)}),t}function Nu(e){const t=r.computed(()=>e.nodes.map(f=>f.id)),n=r.computed(()=>e.edges.map(f=>f.id)),o=r.computed(()=>f=>e.nodes&&!t.value.length?e.nodes.find(_=>_.id===f):e.nodes[t.value.indexOf(f)]),i=r.computed(()=>f=>e.edges&&!n.value.length?e.edges.find(_=>_.id===f):e.edges[n.value.indexOf(f)]),a=r.computed(()=>{var x;const f={...Pi,...e.edgeTypes},_=Object.keys(f);return(x=e.edges)==null||x.forEach(S=>S.type&&!_.includes(S.type)&&(f[S.type]=S.type)),f}),l=r.computed(()=>{var x;const f={...Bi,...e.nodeTypes},_=Object.keys(f);return(x=e.nodes)==null||x.forEach(S=>S.type&&!_.includes(S.type)&&(f[S.type]=S.type)),f}),u=r.computed(()=>{const f=e.nodes.filter(_=>!_.hidden);return e.onlyRenderVisibleElements?f&&Fn(f,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):f??[]}),s=(f,_,x)=>{if(_=_??o.value(f.source),x=x??o.value(f.target),!_||!x){e.hooks.error.trigger(new le(re.EDGE_ORPHANED,f.id));return}return!f.hidden&&!x.hidden&&!_.hidden},c=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(f=>{const _=o.value(f.source),x=o.value(f.target);return s(f,_,x)&&Gr({sourcePos:_.computedPosition||{x:0,y:0},targetPos:x.computedPosition||{x:0,y:0},sourceWidth:_.dimensions.width,sourceHeight:_.dimensions.height,targetWidth:x.dimensions.width,targetHeight:x.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(f=>s(f))),d=r.computed(()=>[...u.value,...c.value]),v=r.computed(()=>e.nodes.filter(f=>f.selected)),p=r.computed(()=>e.edges.filter(f=>f.selected)),E=r.computed(()=>[...v.value??[],...p.value??[]]),h=r.computed(()=>u.value.filter(f=>f.initialized&&f.handleBounds!==void 0));return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:a,getNodeTypes:l,getEdges:c,getNodes:u,getSelectedElements:E,getSelectedNodes:v,getSelectedEdges:p,getNodesInitialized:h}}function eo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function zi(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function dt(){}var ot=.7,Rt=1/ot,Fe="\\s*([+-]?\\d+)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cu=/^#([0-9a-f]{3,8})$/,ku=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),Mu=new RegExp(`^rgb\\(${ve},${ve},${ve}\\)$`),$u=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${it}\\)$`),Iu=new RegExp(`^rgba\\(${ve},${ve},${ve},${it}\\)$`),Ru=new RegExp(`^hsl\\(${it},${ve},${ve}\\)$`),Ou=new RegExp(`^hsla\\(${it},${ve},${ve},${it}\\)$`),Io={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eo(dt,rt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ro,formatHex:Ro,formatHex8:Tu,formatHsl:Bu,formatRgb:Oo,toString:Oo});function Ro(){return this.rgb().formatHex()}function Tu(){return this.rgb().formatHex8()}function Bu(){return Ai(this).formatHsl()}function Oo(){return this.rgb().formatRgb()}function rt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Cu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?To(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ku.exec(e))?new se(t[1],t[2],t[3],1):(t=Mu.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$u.exec(e))?pt(t[1],t[2],t[3],t[4]):(t=Iu.exec(e))?pt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ru.exec(e))?Do(t[1],t[2]/100,t[3]/100,1):(t=Ou.exec(e))?Do(t[1],t[2]/100,t[3]/100,t[4]):Io.hasOwnProperty(e)?To(Io[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function To(e){return new se(e>>16&255,e>>8&255,e&255,1)}function pt(e,t,n,o){return o<=0&&(e=t=n=NaN),new se(e,t,n,o)}function Pu(e){return e instanceof dt||(e=rt(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function Cn(e,t,n,o){return arguments.length===1?Pu(e):new se(e,t,n,o??1)}function se(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}eo(se,Cn,zi(dt,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ot:Math.pow(ot,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(Be(this.r),Be(this.g),Be(this.b),Ot(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bo,formatHex:Bo,formatHex8:Du,formatRgb:Po,toString:Po}));function Bo(){return`#${Oe(this.r)}${Oe(this.g)}${Oe(this.b)}`}function Du(){return`#${Oe(this.r)}${Oe(this.g)}${Oe(this.b)}${Oe((isNaN(this.opacity)?1:this.opacity)*255)}`}function Po(){const e=Ot(this.opacity);return`${e===1?"rgb(":"rgba("}${Be(this.r)}, ${Be(this.g)}, ${Be(this.b)}${e===1?")":`, ${e})`}`}function Ot(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Be(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Oe(e){return e=Be(e),(e<16?"0":"")+e.toString(16)}function Do(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fe(e,t,n,o)}function Ai(e){if(e instanceof fe)return new fe(e.h,e.s,e.l,e.opacity);if(e instanceof dt||(e=rt(e)),!e)return new fe;if(e instanceof fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),l=NaN,u=a-i,s=(a+i)/2;return u?(t===a?l=(n-o)/u+(n<o)*6:n===a?l=(o-t)/u+2:l=(t-n)/u+4,u/=s<.5?a+i:2-a-i,l*=60):u=s>0&&s<1?0:l,new fe(l,u,s,e.opacity)}function zu(e,t,n,o){return arguments.length===1?Ai(e):new fe(e,t,n,o??1)}function fe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}eo(fe,zu,zi(dt,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ot:Math.pow(ot,e),new fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new se(ln(e>=240?e-240:e+120,i,o),ln(e,i,o),ln(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new fe(zo(this.h),mt(this.s),mt(this.l),Ot(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ot(this.opacity);return`${e===1?"hsl(":"hsla("}${zo(this.h)}, ${mt(this.s)*100}%, ${mt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zo(e){return e=(e||0)%360,e<0?e+360:e}function mt(e){return Math.max(0,Math.min(1,e||0))}function ln(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vi=e=>()=>e;function Au(e,t){return function(n){return e+n*t}}function Vu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Hu(e){return(e=+e)==1?Hi:function(t,n){return n-t?Vu(t,n,e):Vi(isNaN(t)?n:t)}}function Hi(e,t){var n=t-e;return n?Au(e,n):Vi(isNaN(e)?t:e)}const Ao=function e(t){var n=Hu(t);function o(i,a){var l=n((i=Cn(i)).r,(a=Cn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),c=Hi(i.opacity,a.opacity);return function(d){return i.r=l(d),i.g=u(d),i.b=s(d),i.opacity=c(d),i+""}}return o.gamma=e,o}(1);function Ne(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,un=new RegExp(kn.source,"g");function Fu(e){return function(){return e}}function Lu(e){return function(t){return e(t)+""}}function Gu(e,t){var n=kn.lastIndex=un.lastIndex=0,o,i,a,l=-1,u=[],s=[];for(e=e+"",t=t+"";(o=kn.exec(e))&&(i=un.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[l]?u[l]+=a:u[++l]=a),(o=o[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,s.push({i:l,x:Ne(o,i)})),n=un.lastIndex;return n<t.length&&(a=t.slice(n),u[l]?u[l]+=a:u[++l]=a),u.length<2?s[0]?Lu(s[0].x):Fu(t):(t=s.length,function(c){for(var d=0,v;d<t;++d)u[(v=s[d]).i]=v.x(c);return u.join("")})}var Vo=180/Math.PI,Mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fi(e,t,n,o,i,a){var l,u,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(u=Math.sqrt(n*n+o*o))&&(n/=u,o/=u,s/=u),e*o<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Vo,skewX:Math.atan(s)*Vo,scaleX:l,scaleY:u}}var yt;function Yu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mn:Fi(t.a,t.b,t.c,t.d,t.e,t.f)}function Xu(e){return e==null||(yt||(yt=document.createElementNS("http://www.w3.org/2000/svg","g")),yt.setAttribute("transform",e),!(e=yt.transform.baseVal.consolidate()))?Mn:(e=e.matrix,Fi(e.a,e.b,e.c,e.d,e.e,e.f))}function Li(e,t,n,o){function i(c){return c.length?c.pop()+" ":""}function a(c,d,v,p,E,h){if(c!==v||d!==p){var f=E.push("translate(",null,t,null,n);h.push({i:f-4,x:Ne(c,v)},{i:f-2,x:Ne(d,p)})}else(v||p)&&E.push("translate("+v+t+p+n)}function l(c,d,v,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:v.push(i(v)+"rotate(",null,o)-2,x:Ne(c,d)})):d&&v.push(i(v)+"rotate("+d+o)}function u(c,d,v,p){c!==d?p.push({i:v.push(i(v)+"skewX(",null,o)-2,x:Ne(c,d)}):d&&v.push(i(v)+"skewX("+d+o)}function s(c,d,v,p,E,h){if(c!==v||d!==p){var f=E.push(i(E)+"scale(",null,",",null,")");h.push({i:f-4,x:Ne(c,v)},{i:f-2,x:Ne(d,p)})}else(v!==1||p!==1)&&E.push(i(E)+"scale("+v+","+p+")")}return function(c,d){var v=[],p=[];return c=e(c),d=e(d),a(c.translateX,c.translateY,d.translateX,d.translateY,v,p),l(c.rotate,d.rotate,v,p),u(c.skewX,d.skewX,v,p),s(c.scaleX,c.scaleY,d.scaleX,d.scaleY,v,p),c=d=null,function(E){for(var h=-1,f=p.length,_;++h<f;)v[(_=p[h]).i]=_.x(E);return v.join("")}}}var Uu=Li(Yu,"px, ","px)","deg)"),Zu=Li(Xu,", ",")",")"),Ku=1e-12;function Ho(e){return((e=Math.exp(e))+1/e)/2}function Wu(e){return((e=Math.exp(e))-1/e)/2}function qu(e){return((e=Math.exp(2*e))-1)/(e+1)}const ju=function e(t,n,o){function i(a,l){var u=a[0],s=a[1],c=a[2],d=l[0],v=l[1],p=l[2],E=d-u,h=v-s,f=E*E+h*h,_,x;if(f<Ku)x=Math.log(p/c)/t,_=function(m){return[u+m*E,s+m*h,c*Math.exp(t*m*x)]};else{var S=Math.sqrt(f),P=(p*p-c*c+o*f)/(2*c*n*S),w=(p*p-c*c-o*f)/(2*p*n*S),C=Math.log(Math.sqrt(P*P+1)-P),R=Math.log(Math.sqrt(w*w+1)-w);x=(R-C)/t,_=function(m){var L=m*x,z=Ho(C),$=c/(n*S)*(z*qu(t*L+C)-Wu(C));return[u+$*E,s+$*h,c*z/Ho(t*L+C)]}}return _.duration=x*1e3*t/Math.SQRT2,_}return i.rho=function(a){var l=Math.max(.001,+a),u=l*l,s=u*u;return e(l,u,s)},i}(Math.SQRT2,2,4);var Ge=0,Ke=0,Ue=0,Gi=1e3,Tt,We,Bt=0,De=0,Jt=0,at=typeof performance=="object"&&performance.now?performance:Date,Yi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function to(){return De||(Yi(Qu),De=at.now()+Jt)}function Qu(){De=0}function Pt(){this._call=this._time=this._next=null}Pt.prototype=Xi.prototype={constructor:Pt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?to():+n)+(t==null?0:+t),!this._next&&We!==this&&(We?We._next=this:Tt=this,We=this),this._call=e,this._time=n,$n()},stop:function(){this._call&&(this._call=null,this._time=1/0,$n())}};function Xi(e,t,n){var o=new Pt;return o.restart(e,t,n),o}function Ju(){to(),++Ge;for(var e=Tt,t;e;)(t=De-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ge}function Fo(){De=(Bt=at.now())+Jt,Ge=Ke=0;try{Ju()}finally{Ge=0,ts(),De=0}}function es(){var e=at.now(),t=e-Bt;t>Gi&&(Jt-=t,Bt=e)}function ts(){for(var e,t=Tt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Tt=n);We=e,$n(o)}function $n(e){if(!Ge){Ke&&(Ke=clearTimeout(Ke));var t=e-De;t>24?(e<1/0&&(Ke=setTimeout(Fo,e-at.now()-Jt)),Ue&&(Ue=clearInterval(Ue))):(Ue||(Bt=at.now(),Ue=setInterval(es,Gi)),Ge=1,Yi(Fo))}}function Lo(e,t,n){var o=new Pt;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var ns=Xt("start","end","cancel","interrupt"),os=[],Ui=0,Go=1,In=2,_t=3,Yo=4,Rn=5,Et=6;function en(e,t,n,o,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;is(e,n,{name:t,index:o,group:i,on:ns,tween:os,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ui})}function no(e,t){var n=he(e,t);if(n.state>Ui)throw new Error("too late; already scheduled");return n}function me(e,t){var n=he(e,t);if(n.state>_t)throw new Error("too late; already running");return n}function he(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function is(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Xi(a,0,n.time);function a(c){n.state=Go,n.timer.restart(l,n.delay,n.time),n.delay<=c&&l(c-n.delay)}function l(c){var d,v,p,E;if(n.state!==Go)return s();for(d in o)if(E=o[d],E.name===n.name){if(E.state===_t)return Lo(l);E.state===Yo?(E.state=Et,E.timer.stop(),E.on.call("interrupt",e,e.__data__,E.index,E.group),delete o[d]):+d<t&&(E.state=Et,E.timer.stop(),E.on.call("cancel",e,e.__data__,E.index,E.group),delete o[d])}if(Lo(function(){n.state===_t&&(n.state=Yo,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=In,n.on.call("start",e,e.__data__,n.index,n.group),n.state===In){for(n.state=_t,i=new Array(p=n.tween.length),d=0,v=-1;d<p;++d)(E=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++v]=E);i.length=v+1}}function u(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(s),n.state=Rn,1),v=-1,p=i.length;++v<p;)i[v].call(e,d);n.state===Rn&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Et,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function bt(e,t){var n=e.__transition,o,i,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){a=!1;continue}i=o.state>In&&o.state<Rn,o.state=Et,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}a&&delete e.__transition}}function rs(e){return this.each(function(){bt(this,e)})}function as(e,t){var n,o;return function(){var i=me(this,e),a=i.tween;if(a!==n){o=n=a;for(var l=0,u=o.length;l<u;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function ls(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=me(this,e),l=a.tween;if(l!==o){i=(o=l).slice();for(var u={name:t,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===t){i[s]=u;break}s===c&&i.push(u)}a.tween=i}}function us(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=he(this.node(),n).tween,i=0,a=o.length,l;i<a;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?as:ls)(n,e,t))}function oo(e,t,n){var o=e._id;return e.each(function(){var i=me(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return he(i,o).value[t]}}function Zi(e,t){var n;return(typeof t=="number"?Ne:t instanceof rt?Ao:(n=rt(t))?(t=n,Ao):Gu)(e,t)}function ss(e){return function(){this.removeAttribute(e)}}function cs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ds(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===o?a:a=t(o=l,n)}}function fs(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?a:a=t(o=l,n)}}function hs(e,t,n){var o,i,a;return function(){var l,u=n(this),s;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=u+"",l===s?null:l===o&&s===i?a:(i=s,a=t(o=l,u)))}}function gs(e,t,n){var o,i,a;return function(){var l,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=u+"",l===s?null:l===o&&s===i?a:(i=s,a=t(o=l,u)))}}function vs(e,t){var n=Ut(e),o=n==="transform"?Zu:Zi;return this.attrTween(e,typeof t=="function"?(n.local?gs:hs)(n,o,oo(this,"attr."+e,t)):t==null?(n.local?cs:ss)(n):(n.local?fs:ds)(n,o,t))}function ps(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ms(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ys(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ms(e,a)),n}return i._value=t,i}function xs(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ps(e,a)),n}return i._value=t,i}function ws(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ut(e);return this.tween(n,(o.local?ys:xs)(o,t))}function _s(e,t){return function(){no(this,e).delay=+t.apply(this,arguments)}}function Es(e,t){return t=+t,function(){no(this,e).delay=t}}function bs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_s:Es)(t,e)):he(this.node(),t).delay}function Ss(e,t){return function(){me(this,e).duration=+t.apply(this,arguments)}}function Ns(e,t){return t=+t,function(){me(this,e).duration=t}}function Cs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ss:Ns)(t,e)):he(this.node(),t).duration}function ks(e,t){if(typeof t!="function")throw new Error;return function(){me(this,e).ease=t}}function Ms(e){var t=this._id;return arguments.length?this.each(ks(t,e)):he(this.node(),t).ease}function $s(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;me(this,e).ease=n}}function Is(e){if(typeof e!="function")throw new Error;return this.each($s(this._id,e))}function Rs(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,u=o[i]=[],s,c=0;c<l;++c)(s=a[c])&&e.call(s,s.__data__,c,a)&&u.push(s);return new Se(o,this._parents,this._name,this._id)}function Os(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),l=new Array(o),u=0;u<a;++u)for(var s=t[u],c=n[u],d=s.length,v=l[u]=new Array(d),p,E=0;E<d;++E)(p=s[E]||c[E])&&(v[E]=p);for(;u<o;++u)l[u]=t[u];return new Se(l,this._parents,this._name,this._id)}function Ts(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Bs(e,t,n){var o,i,a=Ts(t)?no:me;return function(){var l=a(this,e),u=l.on;u!==o&&(i=(o=u).copy()).on(t,n),l.on=i}}function Ps(e,t){var n=this._id;return arguments.length<2?he(this.node(),n).on.on(e):this.each(Bs(n,e,t))}function Ds(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function zs(){return this.on("end.remove",Ds(this._id))}function As(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Un(e));for(var o=this._groups,i=o.length,a=new Array(i),l=0;l<i;++l)for(var u=o[l],s=u.length,c=a[l]=new Array(s),d,v,p=0;p<s;++p)(d=u[p])&&(v=e.call(d,d.__data__,p,u))&&("__data__"in d&&(v.__data__=d.__data__),c[p]=v,en(c[p],t,n,p,c,he(d,n)));return new Se(a,this._parents,t,n)}function Vs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fi(e));for(var o=this._groups,i=o.length,a=[],l=[],u=0;u<i;++u)for(var s=o[u],c=s.length,d,v=0;v<c;++v)if(d=s[v]){for(var p=e.call(d,d.__data__,v,s),E,h=he(d,n),f=0,_=p.length;f<_;++f)(E=p[f])&&en(E,t,n,f,p,h);a.push(p),l.push(d)}return new Se(a,l,t,n)}var Hs=st.prototype.constructor;function Fs(){return new Hs(this._groups,this._parents)}function Ls(e,t){var n,o,i;return function(){var a=Le(this,e),l=(this.style.removeProperty(e),Le(this,e));return a===l?null:a===n&&l===o?i:i=t(n=a,o=l)}}function Ki(e){return function(){this.style.removeProperty(e)}}function Gs(e,t,n){var o,i=n+"",a;return function(){var l=Le(this,e);return l===i?null:l===o?a:a=t(o=l,n)}}function Ys(e,t,n){var o,i,a;return function(){var l=Le(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),Le(this,e))),l===s?null:l===o&&s===i?a:(i=s,a=t(o=l,u))}}function Xs(e,t){var n,o,i,a="style."+t,l="end."+a,u;return function(){var s=me(this,e),c=s.on,d=s.value[a]==null?u||(u=Ki(t)):void 0;(c!==n||i!==d)&&(o=(n=c).copy()).on(l,i=d),s.on=o}}function Us(e,t,n){var o=(e+="")=="transform"?Uu:Zi;return t==null?this.styleTween(e,Ls(e,o)).on("end.style."+e,Ki(e)):typeof t=="function"?this.styleTween(e,Ys(e,o,oo(this,"style."+e,t))).each(Xs(this._id,e)):this.styleTween(e,Gs(e,o,t),n).on("end.style."+e,null)}function Zs(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ks(e,t,n){var o,i;function a(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&Zs(e,l,n)),o}return a._value=t,a}function Ws(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ks(e,t,n??""))}function qs(e){return function(){this.textContent=e}}function js(e){return function(){var t=e(this);this.textContent=t??""}}function Qs(e){return this.tween("text",typeof e=="function"?js(oo(this,"text",e)):qs(e==null?"":e+""))}function Js(e){return function(t){this.textContent=e.call(this,t)}}function ec(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Js(i)),t}return o._value=e,o}function tc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ec(e))}function nc(){for(var e=this._name,t=this._id,n=Wi(),o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],u=l.length,s,c=0;c<u;++c)if(s=l[c]){var d=he(s,t);en(s,e,n,c,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Se(o,this._parents,e,n)}function oc(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,l){var u={value:l},s={value:function(){--i===0&&a()}};n.each(function(){var c=me(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),c.on=t}),i===0&&a()})}var ic=0;function Se(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Wi(){return++ic}var ye=st.prototype;Se.prototype={constructor:Se,select:As,selectAll:Vs,selectChild:ye.selectChild,selectChildren:ye.selectChildren,filter:Rs,merge:Os,selection:Fs,transition:nc,call:ye.call,nodes:ye.nodes,node:ye.node,size:ye.size,empty:ye.empty,each:ye.each,on:Ps,attr:vs,attrTween:ws,style:Us,styleTween:Ws,text:Qs,textTween:tc,remove:zs,tween:us,delay:bs,duration:Cs,ease:Ms,easeVarying:Is,end:oc,[Symbol.iterator]:ye[Symbol.iterator]};function rc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ac={time:null,delay:0,duration:250,ease:rc};function lc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function uc(e){var t,n;e instanceof Se?(t=e._id,e=e._name):(t=Wi(),(n=ac).time=to(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],u=l.length,s,c=0;c<u;++c)(s=l[c])&&en(s,e,t,c,l,n||lc(s,t));return new Se(o,this._parents,e,t)}st.prototype.interrupt=rs;st.prototype.transition=uc;const xt=e=>()=>e;function sc(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Ee(e,t,n){this.k=e,this.x=t,this.y=n}Ee.prototype={constructor:Ee,scale:function(e){return e===1?this:new Ee(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ee(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xe=new Ee(1,0,0);Ee.prototype;function sn(e){e.stopImmediatePropagation()}function Ze(e){e.preventDefault(),e.stopImmediatePropagation()}function cc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function dc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Xo(){return this.__zoom||Xe}function fc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function hc(){return navigator.maxTouchPoints||"ontouchstart"in this}function gc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function vc(){var e=cc,t=dc,n=gc,o=fc,i=hc,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,s=ju,c=Xt("start","zoom","end"),d,v,p,E=500,h=150,f=0,_=10;function x(y){y.property("__zoom",Xo).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(y,H,k,O){var Z=y.selection?y.selection():y;Z.property("__zoom",Xo),y!==Z?C(y,H,k,O):Z.interrupt().each(function(){R(this,arguments).event(O).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},x.scaleBy=function(y,H,k,O){x.scaleTo(y,function(){var Z=this.__zoom.k,G=typeof H=="function"?H.apply(this,arguments):H;return Z*G},k,O)},x.scaleTo=function(y,H,k,O){x.transform(y,function(){var Z=t.apply(this,arguments),G=this.__zoom,T=k==null?w(Z):typeof k=="function"?k.apply(this,arguments):k,X=G.invert(T),W=typeof H=="function"?H.apply(this,arguments):H;return n(P(S(G,W),T,X),Z,l)},k,O)},x.translateBy=function(y,H,k,O){x.transform(y,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),l)},null,O)},x.translateTo=function(y,H,k,O,Z){x.transform(y,function(){var G=t.apply(this,arguments),T=this.__zoom,X=O==null?w(G):typeof O=="function"?O.apply(this,arguments):O;return n(Xe.translate(X[0],X[1]).scale(T.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof k=="function"?-k.apply(this,arguments):-k),G,l)},O,Z)};function S(y,H){return H=Math.max(a[0],Math.min(a[1],H)),H===y.k?y:new Ee(H,y.x,y.y)}function P(y,H,k){var O=H[0]-k[0]*y.k,Z=H[1]-k[1]*y.k;return O===y.x&&Z===y.y?y:new Ee(y.k,O,Z)}function w(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function C(y,H,k,O){y.on("start.zoom",function(){R(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(O).end()}).tween("zoom",function(){var Z=this,G=arguments,T=R(Z,G).event(O),X=t.apply(Z,G),W=k==null?w(X):typeof k=="function"?k.apply(Z,G):k,ee=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),te=Z.__zoom,D=typeof H=="function"?H.apply(Z,G):H,M=s(te.invert(W).concat(ee/te.k),D.invert(W).concat(ee/D.k));return function(F){if(F===1)F=D;else{var g=M(F),b=ee/g[2];F=new Ee(b,W[0]-g[0]*b,W[1]-g[1]*b)}T.zoom(null,F)}})}function R(y,H,k){return!k&&y.__zooming||new m(y,H)}function m(y,H){this.that=y,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,H),this.taps=0}m.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,H){return this.mouse&&y!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var H=de(this.that).datum();c.call(y,this.that,new sc(y,{sourceEvent:this.sourceEvent,target:x,type:y,transform:this.that.__zoom,dispatch:c}),H)}};function L(y,...H){if(!e.apply(this,arguments))return;var k=R(this,H).event(y),O=this.__zoom,Z=Math.max(a[0],Math.min(a[1],O.k*Math.pow(2,o.apply(this,arguments)))),G=ge(y);if(k.wheel)(k.mouse[0][0]!==G[0]||k.mouse[0][1]!==G[1])&&(k.mouse[1]=O.invert(k.mouse[0]=G)),clearTimeout(k.wheel);else{if(O.k===Z)return;k.mouse=[G,O.invert(G)],bt(this),k.start()}Ze(y),k.wheel=setTimeout(T,h),k.zoom("mouse",n(P(S(O,Z),k.mouse[0],k.mouse[1]),k.extent,l));function T(){k.wheel=null,k.end()}}function z(y,...H){if(p||!e.apply(this,arguments))return;var k=y.currentTarget,O=R(this,H,!0).event(y),Z=de(y.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",ee,!0),G=ge(y,k),T=y.clientX,X=y.clientY;bi(y.view),sn(y),O.mouse=[G,this.__zoom.invert(G)],bt(this),O.start();function W(te){if(Ze(te),!O.moved){var D=te.clientX-T,M=te.clientY-X;O.moved=D*D+M*M>f}O.event(te).zoom("mouse",n(P(O.that.__zoom,O.mouse[0]=ge(te,k),O.mouse[1]),O.extent,l))}function ee(te){Z.on("mousemove.zoom mouseup.zoom",null),Si(te.view,O.moved),Ze(te),O.event(te).end()}}function $(y,...H){if(e.apply(this,arguments)){var k=this.__zoom,O=ge(y.changedTouches?y.changedTouches[0]:y,this),Z=k.invert(O),G=k.k*(y.shiftKey?.5:2),T=n(P(S(k,G),O,Z),t.apply(this,H),l);Ze(y),u>0?de(this).transition().duration(u).call(C,T,O,y):de(this).call(x.transform,T,O,y)}}function V(y,...H){if(e.apply(this,arguments)){var k=y.touches,O=k.length,Z=R(this,H,y.changedTouches.length===O).event(y),G,T,X,W;for(sn(y),T=0;T<O;++T)X=k[T],W=ge(X,this),W=[W,this.__zoom.invert(W),X.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==W[2]&&(Z.touch1=W,Z.taps=0):(Z.touch0=W,G=!0,Z.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(Z.taps<2&&(v=W[0],d=setTimeout(function(){d=null},E)),bt(this),Z.start())}}function J(y,...H){if(this.__zooming){var k=R(this,H).event(y),O=y.changedTouches,Z=O.length,G,T,X,W;for(Ze(y),G=0;G<Z;++G)T=O[G],X=ge(T,this),k.touch0&&k.touch0[2]===T.identifier?k.touch0[0]=X:k.touch1&&k.touch1[2]===T.identifier&&(k.touch1[0]=X);if(T=k.that.__zoom,k.touch1){var ee=k.touch0[0],te=k.touch0[1],D=k.touch1[0],M=k.touch1[1],F=(F=D[0]-ee[0])*F+(F=D[1]-ee[1])*F,g=(g=M[0]-te[0])*g+(g=M[1]-te[1])*g;T=S(T,Math.sqrt(F/g)),X=[(ee[0]+D[0])/2,(ee[1]+D[1])/2],W=[(te[0]+M[0])/2,(te[1]+M[1])/2]}else if(k.touch0)X=k.touch0[0],W=k.touch0[1];else return;k.zoom("touch",n(P(T,X,W),k.extent,l))}}function K(y,...H){if(this.__zooming){var k=R(this,H).event(y),O=y.changedTouches,Z=O.length,G,T;for(sn(y),p&&clearTimeout(p),p=setTimeout(function(){p=null},E),G=0;G<Z;++G)T=O[G],k.touch0&&k.touch0[2]===T.identifier?delete k.touch0:k.touch1&&k.touch1[2]===T.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(T=ge(T,this),Math.hypot(v[0]-T[0],v[1]-T[1])<_)){var X=de(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return x.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:xt(+y),x):o},x.filter=function(y){return arguments.length?(e=typeof y=="function"?y:xt(!!y),x):e},x.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:xt(!!y),x):i},x.extent=function(y){return arguments.length?(t=typeof y=="function"?y:xt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),x):t},x.scaleExtent=function(y){return arguments.length?(a[0]=+y[0],a[1]=+y[1],x):[a[0],a[1]]},x.translateExtent=function(y){return arguments.length?(l[0][0]=+y[0][0],l[1][0]=+y[1][0],l[0][1]=+y[0][1],l[1][1]=+y[1][1],x):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},x.constrain=function(y){return arguments.length?(n=y,x):n},x.duration=function(y){return arguments.length?(u=+y,x):u},x.interpolate=function(y){return arguments.length?(s=y,x):s},x.on=function(){var y=c.on.apply(c,arguments);return y===c?x:y},x.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,x):Math.sqrt(f)},x.tapDistance=function(y){return arguments.length?(_=+y,x):_},x}const cn=.1;function Ie(){}const pc={zoomIn:Ie,zoomOut:Ie,zoomTo:Ie,fitView:Ie,setCenter:Ie,fitBounds:Ie,project:e=>e,setTransform:Ie,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1},mc=(e,t)=>{const n=e,o=r.toRef(n,"nodes"),i=r.toRef(n,"d3Zoom"),a=r.toRef(n,"d3Selection"),l=r.toRef(n,"dimensions"),u=r.toRef(n,"translateExtent"),s=r.toRef(n,"minZoom"),c=r.toRef(n,"maxZoom"),d=r.toRef(n,"viewport"),v=r.toRef(n,"snapToGrid"),p=r.toRef(n,"snapGrid"),E=r.toRef(n,"hooks"),h=t,f=r.toRef(h,"getNodes"),_=r.ref(!1);E.value.nodesInitialized.on(()=>{_.value=!0});const x=r.computed(()=>!!i.value&&!!a.value&&!!l.value.width&&!!l.value.height&&_.value);function S(w,C){a.value&&i.value&&i.value.scaleBy(dn(a.value,C),w)}function P(w,C,R,m){const{x:L,y:z}=Dn({x:-w,y:-C},u.value),$=Xe.translate(-L,-z).scale(R);a.value&&i.value&&i.value.transform(dn(a.value,m),$)}return r.computed(()=>x.value?{initialized:!0,zoomIn:w=>{S(1.2,w==null?void 0:w.duration)},zoomOut:w=>{S(1/1.2,w==null?void 0:w.duration)},zoomTo:(w,C)=>{a.value&&i.value&&i.value.scaleTo(dn(a.value,C==null?void 0:C.duration),w)},setTransform:(w,C)=>{P(w.x,w.y,w.zoom,C==null?void 0:C.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:(w={padding:cn,includeHiddenNodes:!1,duration:0})=>{if(!o.value.length)return;const C=(w.includeHiddenNodes?o.value:f.value).filter($=>{var K;const V=$.initialized&&$.dimensions.width&&$.dimensions.height;let J=!0;return(K=w.nodes)!=null&&K.length&&(J=w.nodes.includes($.id)),V&&J}),R=Vt(C),{x:m,y:L,zoom:z}=Je(R,l.value.width,l.value.height,w.minZoom??s.value,w.maxZoom??c.value,w.padding??cn,w.offset);P(m,L,z,w==null?void 0:w.duration)},setCenter:(w,C,R)=>{const m=typeof(R==null?void 0:R.zoom)<"u"?R.zoom:c.value,L=l.value.width/2-w*m,z=l.value.height/2-C*m;P(L,z,m,R==null?void 0:R.duration)},fitBounds:(w,C={padding:cn})=>{const{x:R,y:m,zoom:L}=Je(w,l.value.width,l.value.height,s.value,c.value,C.padding);P(R,m,L,C==null?void 0:C.duration)},project:w=>Hn(w,d.value,v.value,p.value)}:pc)};function dn(e,t=0){return e.transition().duration(t)}function fn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(be(t.style)?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(ke(i.width)){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(ke(i.height)){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,ke(i.width)){const l=Number(i.width.replace("px",""));i.width=`${l+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,ke(i.height)){const l=Number(i.height.replace("px",""));i.height=`${l+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),be(t.style)?t.style=a=>{const l=t.style;return{...l(a),...i}}:t.style={...t.style,...i}}}}function lt(e,t){e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{if(i.type==="add")t.findIndex(l=>l.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const a=t.findIndex(l=>l.id===i.id);a!==-1&&t.splice(a,1)}});const o=t.map(i=>i.id);return t.forEach(i=>{var l,u;const a=e.filter(s=>s.id===i.id);for(const s of a)switch(s.type){case"select":i.selected=s.selected;break;case"position":if(_e(i)&&(typeof s.position<"u"&&(i.position=s.position),typeof s.dragging<"u"&&(i.dragging=s.dragging),i.expandParent&&i.parentNode)){const c=t[o.indexOf(i.parentNode)];c&&_e(c)&&fn(i,c)}break;case"dimensions":if(_e(i)){if(typeof s.dimensions<"u"&&(i.dimensions=s.dimensions),typeof s.updateStyle<"u"&&(i.style={...i.style||{},width:`${(l=s.dimensions)==null?void 0:l.width}px`,height:`${(u=s.dimensions)==null?void 0:u.height}px`}),typeof s.resizing<"u"&&(i.resizing=s.resizing),i.expandParent&&i.parentNode){const c=t[o.indexOf(i.parentNode)];c&&_e(c)&&(c.initialized?fn(i,c):r.nextTick(()=>{fn(i,c)}))}i.initialized||(i.initialized=!0)}break}}),t}function yc(e,t){return lt(e,t)}function xc(e,t){return lt(e,t)}function xe(e,t){return{id:e,type:"select",selected:t}}function Uo(e){return{item:e,type:"add"}}function hn(e){return{id:e,type:"remove"}}function gn(e,t){return e.reduce((n,o)=>{let i=t.includes(o.id);ie(o.selectable)&&!o.selectable&&(i=!1);const a=_e(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[a].push(xe(o.id,!0)):o.selected&&!i&&n[a].push(xe(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function wc(e,t){let n=!1;const o=mc(e,t);ue(()=>o.value.initialized).toBe(!0).then(()=>{});const i=r.computed(()=>e.nodes.map(g=>g.id)),a=r.computed(()=>e.edges.map(g=>g.id)),l=g=>{const b=g??i.value??[];e.hooks.updateNodeInternals.trigger(b)},u=g=>e.nodes&&!i.value.length?e.nodes.find(b=>b.id===g):e.nodes[i.value.indexOf(g)],s=g=>e.edges&&!a.value.length?e.edges.find(b=>b.id===g):e.edges[a.value.indexOf(g)],c=(g,b,B)=>{const I=[];g.forEach(A=>{var N,q;const U={id:A.id,type:"position",dragging:B,from:A.from};if(b&&(U.position=A.position,A.parentNode)){const Q=u(A.parentNode);U.position={x:U.position.x-(((N=Q==null?void 0:Q.computedPosition)==null?void 0:N.x)??0),y:U.position.y-(((q=Q==null?void 0:Q.computedPosition)==null?void 0:q.y)??0)}}I.push(U)}),I!=null&&I.length&&e.hooks.nodesChange.trigger(I)},d=g=>{var A;if(!e.vueFlowRef)return;const b=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!b)return;let B;if((A=e.__experimentalFeatures)!=null&&A.nestedFlow){let U=[b],N=b,q;for(;!q&&N;)N=N.parentElement,q=N==null?void 0:N.classList.contains("vue-flow__transformationpane"),q&&(U=[N,...U]);U.forEach(Q=>{const ne=window.getComputedStyle(Q),{m22:ae}=new window.DOMMatrixReadOnly(ne.transform);B?B*=ae:B=ae})}else{const U=window.getComputedStyle(b),{m22:N}=new window.DOMMatrixReadOnly(U.transform);B=N}const I=g.reduce((U,N)=>{const q=u(N.id);if(q){const Q=Dt(N.nodeElement);!!(Q.width&&Q.height&&(q.dimensions.width!==Q.width||q.dimensions.height!==Q.height||N.forceUpdate))&&(q.handleBounds.source=Eo(".source",N.nodeElement,B),q.handleBounds.target=Eo(".target",N.nodeElement,B),q.dimensions=Q,q.initialized=!0,U.push({id:q.id,type:"dimensions",dimensions:Q}))}return U},[]);e.fitViewOnInit&&!n&&(ue(()=>o.value.initialized).toBe(!0).then(()=>{o.value.fitView()}),n=!0),I.length&&e.hooks.nodesChange.trigger(I)},v=(g,b)=>{const B=g.map(U=>U.id);let I,A=[];if(e.multiSelectionActive)I=B.map(U=>xe(U,b));else{const U=gn([...e.nodes,...e.edges],B);I=U.changedNodes,A=U.changedEdges}I.length&&e.hooks.nodesChange.trigger(I),A.length&&e.hooks.edgesChange.trigger(A)},p=(g,b)=>{const B=g.map(U=>U.id);let I=[],A;if(e.multiSelectionActive)A=B.map(U=>xe(U,b));else{const U=gn([...e.nodes,...e.edges],B);I=U.changedNodes,A=U.changedEdges}I.length&&e.hooks.nodesChange.trigger(I),A.length&&e.hooks.edgesChange.trigger(A)},E=(g,b)=>{const B=g.filter(_e),I=g.filter(zn),A=B.map(Q=>Q.id),U=I.map(Q=>Q.id);let{changedNodes:N,changedEdges:q}=gn([...e.nodes,...e.edges],[...A,...U]);e.multiSelectionActive&&(N=A.map(Q=>xe(Q,b))),e.multiSelectionActive&&(q=U.map(Q=>xe(Q,b))),N.length&&e.hooks.nodesChange.trigger(N),q.length&&e.hooks.edgesChange.trigger(q)},h=g=>{v(g,!0)},f=g=>{p(g,!0)},_=g=>{E(g,!0)},x=g=>{if(!g.length)return v(g,!1);const B=g.map(I=>I.id).map(I=>xe(I,!1));B.length&&e.hooks.nodesChange.trigger(B)},S=g=>{if(!g.length)return p(g,!1);const B=g.map(I=>I.id).map(I=>xe(I,!1));B.length&&e.hooks.edgesChange.trigger(B)},P=g=>{if(!g||!g.length)return E([],!1);const{changedNodes:b,changedEdges:B}=g.reduce((I,A)=>{const U=xe(A.id,!1);return _e(A)?I.changedNodes.push(U):I.changedEdges.push(U),I},{changedNodes:[],changedEdges:[]});b.length&&e.hooks.nodesChange.trigger(b),B.length&&e.hooks.edgesChange.trigger(B)},w=g=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([g,e.maxZoom]),e.minZoom=g},C=g=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([e.minZoom,g]),e.maxZoom=g},R=g=>{var b;(b=e.d3Zoom)==null||b.translateExtent(g),e.translateExtent=g},m=async g=>{e.nodeExtent=g;const b=t.getNodes.value.filter(B=>B.initialized).map(B=>B.id);l(b)},L=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},z=g=>{const b=g instanceof Function?g(e.nodes):g;!e.initialized&&!b.length||(e.nodes=po(b,e.nodes,u,e.hooks.error.trigger))},$=g=>{const b=g instanceof Function?g(e.edges):g;if(!e.initialized&&!b.length)return;const B=e.isValidConnection?b.filter(I=>e.isValidConnection(I,{edges:e.edges,sourceNode:u(I.source),targetNode:u(I.target)})):b;e.edges=B.reduce((I,A)=>{const U=u(A.source),N=u(A.target),q=!U||typeof U>"u",Q=!N||typeof N>"u";if(q&&Q?e.hooks.error.trigger(new le(re.EDGE_SOURCE_TARGET_MISSING,A.id,A.source,A.target)):(q&&e.hooks.error.trigger(new le(re.EDGE_SOURCE_MISSING,A.id,A.source)),Q&&e.hooks.error.trigger(new le(re.EDGE_TARGET_MISSING,A.id,A.target))),q||Q)return I;const ne=t.getEdge.value(A.id);return I.push({...An(A,Object.assign({},ne,e.defaultEdgeOptions)),sourceNode:U,targetNode:N}),I},[])},V=g=>{const b=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!b.length||(z(b.filter(zt)),$(b.filter(pe)))},J=g=>{const b=g instanceof Function?g(e.nodes):g,I=po(b,e.nodes,u,e.hooks.error.trigger).map(Uo);I.length&&e.hooks.nodesChange.trigger(I)},K=g=>{const b=g instanceof Function?g(e.edges):g,I=(e.isValidConnection?b.filter(A=>e.isValidConnection(A,{edges:e.edges,sourceNode:u(A.source),targetNode:u(A.target)})):b).reduce((A,U)=>{const N=Hr({...U,...e.defaultEdgeOptions},e.edges,e.hooks.error.trigger);if(N){const q=u(N.source),Q=u(N.target),ne=!q||typeof q>"u",ae=!Q||typeof Q>"u";if(ne&&ae?e.hooks.error.trigger(new le(re.EDGE_SOURCE_TARGET_MISSING,N.id,N.source,N.target)):(ne&&e.hooks.error.trigger(new le(re.EDGE_SOURCE_MISSING,N.id,N.source)),ae&&e.hooks.error.trigger(new le(re.EDGE_TARGET_MISSING,N.id,N.target))),ne||ae)return A;A.push(Uo({...N,sourceNode:q,targetNode:Q}))}return A},[]);I.length&&e.hooks.edgesChange.trigger(I)},y=(g,b=!0)=>{const B=g instanceof Function?g(e.nodes):g,I=[],A=[];B.forEach(U=>{const N=typeof U=="string"?u(U):U;if(!(ie(N.deletable)&&!N.deletable)&&(I.push(hn(N.id)),b)){const q=ut([N],e.edges).filter(Q=>ie(Q.deletable)?Q.deletable:!0);A.push(...q.map(Q=>hn(Q.id)))}}),A.length&&e.hooks.edgesChange.trigger(A),I.length&&e.hooks.nodesChange.trigger(I)},H=g=>{const b=g instanceof Function?g(e.edges):g,B=[];b.forEach(I=>{const A=typeof I=="string"?s(I):I;ie(A.deletable)&&!A.deletable||B.push(hn(typeof I=="string"?I:I.id))}),e.hooks.edgesChange.trigger(B)},k=(g,b,B=!0)=>Fr(g,b,e.edges,s,B,e.hooks.error.trigger),O=g=>lt(g,e.nodes),Z=g=>lt(g,e.edges),G=(g,b,B,I=!1)=>{I?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,b&&(e.connectionPosition=b)},T=(g,b=null,B=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=b,e.connectionStatus=B)},X=(g,b)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStatus=null,b?e.connectionClickStartHandle=null:e.connectionStartHandle=null},W=g=>{const b=Ir(g),B=b?null:u(g.id);return!b&&!B?[null,null,b]:[b?g:go(B),B,b]},ee=(g,b=!0,B)=>{const[I,A,U]=W(g);return I?(B||e.nodes).filter(N=>{if(!U&&(N.id===A.id||!N.computedPosition))return!1;const q=go(N),Q=wn(q,I);return b&&Q>0||Q>=Number(g.width)*Number(g.height)}):[]},te=(g,b,B=!0)=>{const[I]=W(g);if(!I)return!1;const A=wn(I,b);return B&&A>0||A>=Number(g.width)*Number(g.height)},D=g=>{const{viewport:b,dimensions:B,d3Zoom:I,d3Selection:A,translateExtent:U}=e;if(!I||!A||!g.x&&!g.y)return;const N=Xe.translate(b.x+g.x,b.y+g.y).scale(b.zoom),q=[[0,0],[B.width,B.height]],Q=I.constrain()(N,q,U);I.transform(A,Q)},M=g=>{const b=g instanceof Function?g(e):g,B=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"],I=b.modelValue||b.nodes||b.edges?[]:void 0;I&&(b.modelValue&&I.push(...b.modelValue),b.nodes&&I.push(...b.nodes),b.edges&&I.push(...b.edges),V(I));const A=()=>{typeof b.maxZoom<"u"&&C(b.maxZoom),typeof b.minZoom<"u"&&w(b.minZoom),typeof b.translateExtent<"u"&&R(b.translateExtent),typeof b.nodeExtent<"u"&&m(b.nodeExtent)};Object.keys(b).forEach(U=>{const N=b[U];!B.includes(U)&&ie(N)&&(e[U]=N)}),e.d3Zoom?A():ue(()=>e.d3Zoom).not.toBeUndefined().then(A),e.initialized||(e.initialized=!0)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:V,setNodes:z,setEdges:$,addNodes:J,addEdges:K,removeNodes:y,removeEdges:H,findNode:u,findEdge:s,updateEdge:k,applyEdgeChanges:Z,applyNodeChanges:O,addSelectedElements:_,addSelectedNodes:h,addSelectedEdges:f,setMinZoom:w,setMaxZoom:C,setTranslateExtent:R,setNodeExtent:m,removeSelectedElements:P,removeSelectedNodes:x,removeSelectedEdges:S,startConnection:G,updateConnection:T,endConnection:X,setInteractive:L,setState:M,getIntersectingNodes:ee,isNodeIntersecting:te,panBy:D,fitView:async(g={padding:.1})=>{await ue(()=>o.value.initialized).toBe(!0),o.value.fitView(g)},zoomIn:async g=>{await ue(()=>o.value.initialized).toBe(!0),o.value.zoomIn(g)},zoomOut:async g=>{await ue(()=>o.value.initialized).toBe(!0),o.value.zoomOut(g)},zoomTo:async(g,b)=>{await ue(()=>o.value.initialized).toBe(!0),o.value.zoomTo(g,b)},setTransform:async(g,b)=>{await ue(()=>o.value.initialized).toBe(!0),o.value.setTransform(g,b)},getTransform:()=>o.value.getTransform(),setCenter:async(g,b,B)=>{await ue(()=>o.value.initialized).toBe(!0),o.value.setCenter(g,b,B)},fitBounds:async(g,b)=>{await ue(()=>o.value.initialized).toBe(!0),o.value.fitBounds(g,b)},project:g=>o.value.project(g),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map(g=>{const{computedPosition:b,handleBounds:B,selected:I,dimensions:A,isParent:U,resizing:N,dragging:q,initialized:Q,...ne}=g;return ne}),edges:e.edges.map(g=>{const{selected:b,sourceNode:B,targetNode:I,...A}=g;return A}),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:l,$reset:()=>{e.edges=[],e.nodes=[],M(Di())},$destroy:()=>{}}}class Te{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return Te.instance||(Te.instance=new Te),Te.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Di(n),i=r.reactive(o),a=Nu(i),l=wc(i,a),u={};Object.entries(i.hooks).forEach(([d,v])=>{const p=`on${d.charAt(0).toUpperCase()+d.slice(1)}`;u[p]=v.on});const s={};Object.entries(i.hooks).forEach(([d,v])=>{s[d]=v.trigger}),l.setState(i);const c={...u,...a,...l,...r.toRefs(i),emits:s,id:t,$destroy:()=>{this.remove(t)}};return this.set(t,c),c}getId(){return`vue-flow-${this.currentId++}`}}const oe=e=>{const t=Te.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,l=!1;if(n){const u=r.inject(_n,null);typeof u<"u"&&u!==null&&(a=u)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const u=o??t.getId();a=t.create(u,e),n&&(l=!0)}else e&&a.setState(e);return n&&(r.provide(_n,a),n.vueFlowId=a.id,l&&Ye(()=>{if(a){const u=t.get(a.id);u?u.$destroy():Qe(`No store instance found for id ${a.id} in storage.`)}})),a};function _c(e,t,n){const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let h,f,_=!!(n.nodes.value.length||n.edges.value.length);h=ze([e.modelValue,()=>{var x,S;return(S=(x=e.modelValue)==null?void 0:x.value)==null?void 0:S.length}],([x])=>{x&&Array.isArray(x)&&(f==null||f.pause(),n.setElements(x),!f&&!_&&x.length?_=!0:f==null||f.resume())}),f=ze([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([x,S])=>{var P;(P=e.modelValue)!=null&&P.value&&Array.isArray(e.modelValue.value)&&(h==null||h.pause(),e.modelValue.value=[...x,...S],r.nextTick(()=>{h==null||h.resume()}))},{immediate:_}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,_=!!n.nodes.value.length;h=ze([e.nodes,()=>{var x,S;return(S=(x=e.nodes)==null?void 0:x.value)==null?void 0:S.length}],([x])=>{x&&Array.isArray(x)&&(f==null||f.pause(),n.setNodes(x),!f&&!_&&x.length?_=!0:f==null||f.resume())}),f=ze([n.nodes,()=>n.nodes.value.length],([x])=>{var S;(S=e.nodes)!=null&&S.value&&Array.isArray(e.nodes.value)&&(h==null||h.pause(),e.nodes.value=[...x],r.nextTick(()=>{h==null||h.resume()}))},{immediate:_}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,_=!!n.edges.value.length;h=ze([e.edges,()=>{var x,S;return(S=(x=e.edges)==null?void 0:x.value)==null?void 0:S.length}],([x])=>{x&&Array.isArray(x)&&(f==null||f.pause(),n.setEdges(x),!f&&!_&&x.length?_=!0:f==null||f.resume())}),f=ze([n.edges,()=>n.edges.value.length],([x])=>{var S;(S=e.edges)!=null&&S.value&&Array.isArray(e.edges.value)&&(h==null||h.pause(),e.edges.value=[...x],r.nextTick(()=>{h==null||h.resume()}))},{immediate:_}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&ie(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&ie(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&ie(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&ie(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{ie(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),r.watch(n.applyDefault,(h,f,_)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),_(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const h=async f=>{let _=f;be(t.autoConnect)&&(_=await t.autoConnect(f)),_!==!1&&n.addEdges([_])};r.watch(()=>t.autoConnect,()=>{ie(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),r.watch(n.autoConnect,(f,_,x)=>{f?n.onConnect(h):n.hooks.value.connect.off(h),x(()=>{n.hooks.value.connect.off(h)})},{immediate:!0})})},()=>{const h=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(f=>{if(!h.includes(f)){const _=r.toRef(t,f),x=n[f];o.run(()=>{r.watch(_,S=>{ie(S)&&(x.value=S)},{flush:"pre"})})}})}].forEach(h=>h())}),()=>o.stop()}function Zo(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Ec={name:"Pane",compatConfig:{MODE:3}},bc=r.defineComponent({...Ec,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:a,emits:l,userSelectionActive:u,removeSelectedElements:s,panOnDrag:c,userSelectionRect:d,elementsSelectable:v,nodesSelectionActive:p,addSelectedElements:E,getSelectedEdges:h,getSelectedNodes:f,removeNodes:_,removeEdges:x,selectionMode:S,deleteKeyCode:P,multiSelectionKeyCode:w,multiSelectionActive:C}=oe(),R=r.ref(null),m=r.ref(0),L=r.ref(0),z=r.ref(),$=r.computed(()=>v.value&&(e.isSelecting||u.value));je(P,T=>{if(!T)return;const X=o.value.reduce((W,ee)=>((!ee.selected&&ee.parentNode&&W.find(te=>te.id===ee.parentNode)||ee.selected)&&W.push(ee),W),[]);(X||h.value)&&(h.value.length>0&&x(h.value),X.length>0&&_(X),p.value=!1,s())}),je(w,T=>{C.value=T});function V(){u.value=!1,d.value=null,m.value=0,L.value=0}function J(T){T.target!==R.value||$.value||(l.paneClick(T),s(),p.value=!1)}function K(T){var X;if(T.target===R.value){if(Array.isArray(c.value)&&((X=c.value)!=null&&X.includes(2))){T.preventDefault();return}l.paneContextMenu(T)}}function y(T){T.target===R.value&&l.paneScroll(T)}function H(T){if(z.value=n.value.getBoundingClientRect(),!$.value||!v||!e.isSelecting||T.button!==0||T.target!==R.value||!z.value)return;const{x:X,y:W}=Zo(T,z.value);s(),d.value={width:0,height:0,startX:X,startY:W,x:X,y:W},u.value=!0,l.selectionStart(T)}function k(T){if(!e.isSelecting||!z.value||!d.value)return;if(!$.value)return l.paneMouseMove(T);u.value||(u.value=!0),p.value&&(p.value=!1);const X=Zo(T,z.value),W=d.value.startX??0,ee=d.value.startY??0,te={...d.value,x:X.x<W?X.x:W,y:X.y<ee?X.y:ee,width:Math.abs(X.x-W),height:Math.abs(X.y-ee)},D=Fn(o.value,d.value,a.value,S.value===Ht.Partial),M=ut(D,i.value);m.value=D.length,L.value=M.length,d.value=te,E([...D,...M])}function O(T){$.value&&T.button===0&&(!u.value&&d.value&&T.target===R.value&&J(T),p.value=m.value>0,V(),l.selectionEnd(T))}function Z(T){var X;if(!$.value)return l.paneMouseLeave(T);u.value&&(p.value=m.value>0,(X=l.selectionEnd)==null||X.call(l,T)),V()}function G(T){$.value||l.paneMouseEnter(T)}return(T,X)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"container",ref:R,key:`pane-${r.unref(t)}`,class:r.normalizeClass(["vue-flow__pane vue-flow__container",[{selection:e.isSelecting}]]),onClick:J,onContextmenu:K,onWheelPassive:y,onMouseenter:G,onMousedown:H,onMousemove:k,onMouseup:O,onMouseleave:Z},[r.renderSlot(T.$slots,"default"),r.unref(u)&&r.unref(d)?(r.openBlock(),r.createBlock(bu,{key:0})):r.createCommentVNode("",!0),r.unref(p)&&r.unref(f).length?(r.openBlock(),r.createBlock(_u,{key:1})):r.createCommentVNode("",!0)],34))}}),Sc={class:"vue-flow__nodes vue-flow__container"},Nc={name:"Nodes",compatConfig:{MODE:3}},Cc=r.defineComponent({...Nc,setup(e){const t=r.inject(Ft),n=oe(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesFocusable"),a=r.toRef(n,"elementsSelectable"),l=r.toRef(n,"nodesConnectable"),u=r.toRef(n,"getNodes"),s=r.toRef(n,"getNodesInitialized"),c=r.toRef(n,"getNodeTypes"),d=r.toRef(n,"updateNodeDimensions"),v=r.toRef(n,"emits");let p=r.ref();ue(()=>u.value.length>0&&s.value.length===u.value.length).toBe(!0).then(()=>{r.nextTick(()=>{v.value.nodesInitialized(s.value)})}),r.onMounted(()=>{p.value=new ResizeObserver(S=>{const P=S.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));d.value(P)})}),r.onBeforeUnmount(()=>{var S;return(S=p.value)==null?void 0:S.disconnect()});function E(S){return typeof S>"u"?o.value:S}function h(S){return typeof S>"u"?a.value:S}function f(S){return typeof S>"u"?l.value:S}function _(S){return typeof S>"u"?i.value:S}function x(S,P){const w=S||"default";let C=P??c.value[w];const R=r.getCurrentInstance();if(typeof C=="string"&&R){const L=Object.keys(R.appContext.components);L&&L.includes(w)&&(C=r.resolveComponent(w,!1))}if(typeof C!="string")return C;const m=t==null?void 0:t[`node-${w}`];return m||(v.value.error(new le(re.NODE_TYPE_MISSING,C)),!1)}return(S,P)=>(r.openBlock(),r.createElementBlock("div",Sc,[r.unref(p)?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(r.unref(u),w=>(r.openBlock(),r.createBlock(r.unref(Ql),{id:w.id,key:w.id,"resize-observer":r.unref(p),type:x(w.type,w.template),name:w.type||"default",draggable:E(w.draggable),selectable:h(w.selectable),connectable:f(w.connectable),focusable:_(w.focusable),node:w},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):r.createCommentVNode("",!0)]))}}),kc=["id","markerWidth","markerHeight","markerUnits","orient"],Mc=["stroke","stroke-width","fill"],$c=["stroke","stroke-width"],Ic={name:"MarkerType",compatConfig:{MODE:3}},Rc=r.defineComponent({...Ic,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===r.unref(Ct).ArrowClosed?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,Mc)):r.createCommentVNode("",!0),e.type===r.unref(Ct).Arrow?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,$c)):r.createCommentVNode("",!0)],8,kc))}}),Oc={name:"MarkerDefinitions",compatConfig:{MODE:3}},Tc=r.defineComponent({...Oc,setup(e){const t=oe(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"connectionLineOptions"),a=r.toRef(t,"defaultMarkerColor"),l=r.computed(()=>{const u=[],s=[],c=d=>{if(d){const v=Me(d,n.value);u.includes(v)||(typeof d=="object"?s.push({...d,id:v,color:d.color||a.value}):s.push({id:v,color:a.value,type:d}),u.push(v))}};return[i.value.markerEnd,i.value.markerStart].forEach(c),o.value.reduce((d,v)=>([v.markerStart,v.markerEnd].forEach(c),d.sort((p,E)=>p.id.localeCompare(E.id))),s),s});return(u,s)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(l),c=>(r.openBlock(),r.createBlock(Rc,{id:c.id,key:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,"stroke-width":c.strokeWidth,orient:c.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Bc={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Pc={name:"Edges",compatConfig:{MODE:3}},Dc=r.defineComponent({...Pc,setup(e){const t=r.inject(Ft),n=oe(),o=r.toRef(n,"connectionStartHandle"),i=r.toRef(n,"nodesConnectable"),a=r.toRef(n,"edgesUpdatable"),l=r.toRef(n,"edgesFocusable"),u=r.toRef(n,"elementsSelectable"),s=r.toRef(n,"getSelectedNodes"),c=r.toRef(n,"findNode"),d=r.toRef(n,"getEdges"),v=r.toRef(n,"getNodesInitialized"),p=r.toRef(n,"getEdgeTypes"),E=r.toRef(n,"elevateEdgesOnSelect"),h=r.toRef(n,"dimensions"),f=r.toRef(n,"emits"),_=tn(()=>{var m;return(m=o.value)==null?void 0:m.nodeId},()=>{var m;return(m=o.value)!=null&&m.nodeId?c.value(o.value.nodeId):!1}),x=tn(()=>{var m;return(m=o.value)==null?void 0:m.nodeId},()=>{var m,L;return!!(_.value&&(typeof _.value.connectable>"u"?i.value:_.value.connectable)&&((m=o.value)!=null&&m.nodeId)&&((L=o.value)!=null&&L.type))}),S=tn([()=>d.value.map(m=>m.zIndex),()=>E.value?[s.value.length]:[0],()=>E.value?v.value.map(m=>m.computedPosition.z):[]],()=>Yr(d.value,c.value,E.value));function P(m){return typeof m>"u"?u.value:m}function w(m){return typeof m>"u"?a.value:m}function C(m){return typeof m>"u"?l.value:m}function R(m,L){const z=m||"default";let $=L??p.value[z];const V=r.getCurrentInstance();if(typeof $=="string"&&V){const K=Object.keys(V.appContext.components);K&&K.includes(z)&&($=r.resolveComponent(z,!1))}if($&&typeof $!="string")return $;const J=t==null?void 0:t[`edge-${z}`];return J||(f.value.error(new le(re.EDGE_TYPE_MISSING,$)),!1)}return(m,L)=>r.unref(h).width&&r.unref(h).height?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(S),z=>(r.openBlock(),r.createElementBlock("svg",{key:z.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${z.level}`)},[z.isMaxLevel?(r.openBlock(),r.createBlock(Tc,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(z.edges,$=>(r.openBlock(),r.createBlock(r.unref(du),{id:$.id,key:$.id,edge:$,type:R($.type,$.template),name:$.type||"default",selectable:P($.selectable),updatable:w($.updatable),focusable:C($.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"]))),128))])],4))),128)),r.unref(x)&&r.unref(_)?(r.openBlock(),r.createElementBlock("svg",Bc,[r.createVNode(yu,{"source-node":r.unref(_)},null,8,["source-node"])])):r.createCommentVNode("",!0)],64)):r.createCommentVNode("",!0)}}),zc=r.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),Ac={name:"Transform",compatConfig:{MODE:3}},Vc=r.defineComponent({...Ac,setup(e){const{id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...u}=oe(),s=r.ref(!On);return ue(()=>i.value&&a.value&&l.value.width>0&&l.value.height>0).toBeTruthy().then(()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...u}),setTimeout(()=>{s.value=!0},0)}),(c,d)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:r.unref(s)?void 0:0})},[r.createVNode(Dc),zc,r.createVNode(Cc),r.renderSlot(c.$slots,"default")],4))}}),Hc={name:"Viewport",compatConfig:{MODE:3}},Fc=r.defineComponent({...Hc,setup(e){const t=oe(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultViewport"),l=r.toRef(t,"translateExtent"),u=r.toRef(t,"dimensions"),s=r.toRef(t,"zoomActivationKeyCode"),c=r.toRef(t,"selectionKeyCode"),d=r.toRef(t,"panActivationKeyCode"),v=r.toRef(t,"panOnScroll"),p=r.toRef(t,"panOnScrollMode"),E=r.toRef(t,"panOnScrollSpeed"),h=r.toRef(t,"panOnDrag"),f=r.toRef(t,"zoomOnDoubleClick"),_=r.toRef(t,"zoomOnPinch"),x=r.toRef(t,"zoomOnScroll"),S=r.toRef(t,"preventScrolling"),P=r.toRef(t,"noWheelClassName"),w=r.toRef(t,"noPanClassName"),C=r.toRef(t,"setState"),R=r.toRef(t,"emits"),m=r.toRef(t,"connectionStartHandle"),L=r.toRef(t,"userSelectionActive"),z=r.toRef(t,"paneDragging"),$=r.ref();let V=r.ref(!1),J=r.ref(!1),K=r.ref(!1),y=r.ref(0);const H=je(d.value),k=r.computed(()=>!!m.value),O=r.computed(()=>!V.value&&h.value&&H.value),Z=r.computed(()=>c.value!==!0&&V.value||c.value===!0&&O.value!==!0);let G=r.ref({x:0,y:0,zoom:0});r.onMounted(()=>{_r($,ee);const D=Pn();Bn(D,"resize",ee)}),r.onMounted(()=>{const D=$.value,M=D.getBoundingClientRect(),F=vc().scaleExtent([o.value,i.value]).translateExtent(l.value),g=de(D).call(F),b=g.on("wheel.zoom"),B=Xe.translate(a.value.x??0,a.value.y??0).scale(Pe(a.value.zoom??1,o.value,i.value)),I=[[0,0],[M.width,M.height]],A=F.constrain()(B,I,l.value);F.transform(g,A),C.value({d3Zoom:F,d3Selection:g,d3ZoomHandler:b,viewport:{x:A.x,y:A.y,zoom:A.k},viewportRef:D}),je(c.value,N=>{V.value=N});const U=je(s.value);r.watchEffect(()=>{V.value&&L.value&&!J.value?F.on("zoom",null):!V.value&&!L.value&&F.on("zoom",N=>{C.value({viewport:{x:N.transform.x,y:N.transform.y,zoom:N.transform.k}});const q=W(N.transform);K.value=T(h.value,y.value??0),R.value.viewportChange(q),R.value.move({event:N,flowTransform:q})})}),F.on("start",N=>{var Q;if(!N.sourceEvent)return null;y.value=N.sourceEvent.button,J.value=!0;const q=W(N.transform);((Q=N.sourceEvent)==null?void 0:Q.type)==="mousedown"&&C.value({paneDragging:!0}),G.value=q,R.value.viewportChangeStart(q),R.value.moveStart({event:N,flowTransform:q})}),F.on("end",N=>{if(!N.sourceEvent)return null;if(J.value=!1,C.value({paneDragging:!1}),T(h.value,y.value??0)&&!K.value&&R.value.paneContextMenu(N.sourceEvent),K.value=!1,X(G.value,N.transform)){const q=W(N.transform);G.value=q,R.value.viewportChangeEnd(q),R.value.moveEnd({event:N,flowTransform:q})}}),r.watchEffect(()=>{v.value&&!U.value&&!L.value?g.on("wheel.zoom",N=>{if(te(N,P.value))return!1;N.preventDefault(),N.stopImmediatePropagation();const q=g.property("__zoom").k||1;if(N.ctrlKey&&_.value){const ft=ge(N),qi=-N.deltaY*(N.deltaMode===1?.05:N.deltaMode?1:.002)*10,ji=q*2**qi;F.scaleTo(g,ji,ft);return}const Q=N.deltaMode===1?20:1,ne=p.value===et.Vertical?0:N.deltaX*Q,ae=p.value===et.Horizontal?0:N.deltaY*Q;F.translateBy(g,-(ne/q)*E.value,-(ae/q)*E.value)},{passive:!1}):typeof b<"u"&&g.on("wheel.zoom",function(N,q){if(!S.value||te(N,P.value))return null;N.preventDefault(),b.call(this,N,q)},{passive:!1})}),F.filter(N=>{var ae,ft;const q=U.value||x.value,Q=_.value&&N.ctrlKey;if(N.button===1&&N.type==="mousedown"&&((ae=N.target)!=null&&ae.closest(".vue-flow__node")||(ft=N.target)!=null&&ft.closest(".vue-flow__edge")))return!0;if(!h.value&&!q&&!v.value&&!f.value&&!_.value||L.value||!f.value&&N.type==="dblclick"||te(N,P.value)&&N.type==="wheel"||te(N,w.value)&&N.type!=="wheel"||!_.value&&N.ctrlKey&&N.type==="wheel"||!q&&!v.value&&!Q&&N.type==="wheel"||!h.value&&(N.type==="mousedown"||N.type==="touchstart")||Array.isArray(h.value)&&!h.value.includes(N.button)&&(N.type==="mousedown"||N.type==="touchstart"))return!1;const ne=Array.isArray(h.value)&&h.value.includes(N.button)||!N.button||N.button<=1;return(!N.ctrlKey||N.type==="wheel")&&ne})});function T(D,M){return M===2&&Array.isArray(D)&&D.includes(2)}function X(D,M){return D.x!==M.x&&!isNaN(M.x)||D.y!==M.y&&!isNaN(M.y)||D.zoom!==M.k&&!isNaN(M.k)}function W(D){return{x:D.x,y:D.y,zoom:D.k}}function ee(){if(!$.value)return;const{width:D,height:M}=Dt($.value);(D===0||M===0)&&R.value.error(new le(re.MISSING_VIEWPORT_DIMENSIONS)),u.value.width=D||500,u.value.height=M||500}function te(D,M){return D.target.closest(`.${M}`)}return(D,M)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(),r.createElementBlock("div",{ref_key:"viewportEl",ref:$,key:`viewport-${r.unref(n)}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(bc,{"is-selecting":r.unref(Z),class:r.normalizeClass({connecting:r.unref(k),dragging:r.unref(z),draggable:!!r.unref(h)})},{default:r.withCtx(()=>[r.createVNode(Vc,null,{default:r.withCtx(()=>[r.renderSlot(D.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),r.renderSlot(D.$slots,"default")],64))}}),Lc=["id"],Gc=["id"],Yc=["id"],Xc={name:"A11yDescriptions",compatConfig:{MODE:3}},Uc=r.defineComponent({...Xc,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=oe(),i={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(a,l)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("div",{id:`${r.unref(Ci)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+r.toDisplayString(r.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Lc),r.createElementVNode("div",{id:`${r.unref(ki)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Gc),r.unref(n)?r.createCommentVNode("",!0):(r.openBlock(),r.createElementBlock("div",{key:0,id:`${r.unref(Kl)}-${r.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:i},r.toDisplayString(r.unref(o)),9,Yc))],64))}}),Zc={name:"VueFlow",compatConfig:{MODE:3}},Kc=r.defineComponent({...Zc,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,panActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=qe(o,"modelValue",n),a=qe(o,"nodes",n),l=qe(o,"edges",n),{vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:d,...v}=oe(o),p=_c({modelValue:i,nodes:a,edges:l},o,{vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:d,...v});$r(n,s);const E=r.ref();return r.provide(Ft,r.useSlots()),r.onUnmounted(()=>{p()}),r.onMounted(()=>{u.value=E.value}),t({vueFlowRef:u,hooks:s,getNodeTypes:c,getEdgeTypes:d,...v}),(h,f)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:E,class:"vue-flow"},[r.createVNode(Fc,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(c)),_=>r.renderSlot(h.$slots,`node-${_}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(d)),_=>r.renderSlot(h.$slots,`edge-${_}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(h.$slots,"connection-line")]),"zoom-pane":r.withCtx(()=>[r.renderSlot(h.$slots,"zoom-pane")]),default:r.withCtx(()=>[r.renderSlot(h.$slots,"default")]),_:3}),r.createVNode(Uc)],512))}}),Wc={name:"Panel",compatConfig:{MODE:3}},qc=r.defineComponent({...Wc,props:{position:null},setup(e){const t=e,{userSelectionActive:n}=oe(),o=r.computed(()=>`${t.position}`.split("-"));return(i,a)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__panel",r.unref(o)]),style:r.normalizeStyle({pointerEvents:r.unref(n)?"none":"all"})},[r.renderSlot(i.$slots,"default")],6))}}),vn=.1,jc=e=>{const t=oe({id:e}),n=r.toRef(t,"nodes"),o=r.toRef(t,"d3Zoom"),i=r.toRef(t,"d3Selection"),a=r.toRef(t,"dimensions"),l=r.toRef(t,"translateExtent"),u=r.toRef(t,"minZoom"),s=r.toRef(t,"maxZoom"),c=r.toRef(t,"viewport"),d=r.toRef(t,"snapToGrid"),v=r.toRef(t,"snapGrid"),p=r.toRef(t,"getNodes");return{zoomIn:f=>{E(1.2,f==null?void 0:f.duration)},zoomOut:f=>{E(1/1.2,f==null?void 0:f.duration)},zoomTo:(f,_)=>{i.value&&o.value&&o.value.scaleTo(pn(i.value,_==null?void 0:_.duration),f)},setTransform:(f,_)=>{h(f.x,f.y,f.zoom,_==null?void 0:_.duration)},getTransform:()=>({x:c.value.x,y:c.value.y,zoom:c.value.zoom}),fitView:(f={padding:vn,includeHiddenNodes:!1,duration:0})=>{if(!n.value.length)return;const _=(f.includeHiddenNodes?n.value:p.value).filter(C=>{var L;const R=C.initialized&&C.dimensions.width&&C.dimensions.height;let m=!0;return(L=f.nodes)!=null&&L.length&&(m=f.nodes.includes(C.id)),R&&m}),x=Vt(_),{x:S,y:P,zoom:w}=Je(x,a.value.width,a.value.height,f.minZoom??u.value,f.maxZoom??s.value,f.padding??vn,f.offset);h(S,P,w,f==null?void 0:f.duration)},setCenter:(f,_,x)=>{const S=typeof(x==null?void 0:x.zoom)<"u"?x.zoom:s.value,P=a.value.width/2-f*S,w=a.value.height/2-_*S;h(P,w,S,x==null?void 0:x.duration)},fitBounds:(f,_={padding:vn})=>{const{x,y:S,zoom:P}=Je(f,a.value.width,a.value.height,u.value,s.value,_.padding);h(x,S,P,_==null?void 0:_.duration)},project:f=>Hn(f,c.value,d.value,v.value)};function E(f,_){i.value&&o.value&&o.value.scaleBy(pn(i.value,_),f)}function h(f,_,x,S){const{x:P,y:w}=Dn({x:-f,y:-_},l.value),C=Xe.translate(-P,-w).scale(x);i.value&&o.value&&o.value.transform(pn(i.value,S),C)}};function pn(e,t=0){return e.transition().duration(t)}function Qc(e){const t=e??r.inject(ii,""),n=r.inject(ri,null),{findEdge:o,emits:i}=oe(),a=o(t);return a||i.error(new le(re.EDGE_NOT_FOUND,t)),{id:t,edge:a,edgeEl:n}}exports.BaseEdge=ct;exports.BezierEdge=Ii;exports.ConnectionLineType=Ce;exports.ConnectionMode=$e;exports.EdgeLabelRenderer=gu;exports.EdgeText=$i;exports.ErrorCode=re;exports.GlobalVueFlowStorage=Te;exports.Handle=tt;exports.MarkerType=Ct;exports.NodeIdInjection=Ln;exports.PanOnScrollMode=et;exports.Panel=qc;exports.PanelPosition=ni;exports.Position=j;exports.SelectionMode=Ht;exports.SimpleBezierEdge=Ri;exports.SmoothStepEdge=jn;exports.StepEdge=Oi;exports.StraightEdge=Ti;exports.VueFlow=Kc;exports.VueFlowError=le;exports.VueFlowInjection=_n;exports.addEdge=Br;exports.applyChanges=lt;exports.applyEdgeChanges=yc;exports.applyNodeChanges=xc;exports.clamp=Pe;exports.connectionExists=Vn;exports.defaultEdgeTypes=Pi;exports.defaultNodeTypes=Bi;exports.getBezierEdgeCenter=Wn;exports.getBezierPath=$t;exports.getBoundsofRects=zr;exports.getConnectedEdges=ut;exports.getIncomers=Tr;exports.getMarkerId=Me;exports.getNodesInside=Fn;exports.getOutgoers=Or;exports.getRectOfNodes=Vt;exports.getSimpleBezierPath=qn;exports.getSimpleEdgeCenter=Kn;exports.getSmoothStepPath=It;exports.getStraightPath=Qn;exports.getTransformForBounds=Je;exports.graphPosToZoomedPos=Ar;exports.isEdge=pe;exports.isGraphEdge=zn;exports.isGraphNode=_e;exports.isNode=zt;exports.updateEdge=Pr;exports.useEdge=Qc;exports.useGetPointerPosition=ci;exports.useHandle=Yn;exports.useNode=ai;exports.useVueFlow=oe;exports.useZoomPanHelper=jc;
